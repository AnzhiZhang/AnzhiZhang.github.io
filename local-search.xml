<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>è®°ä¸€æ¬¡éå¸¸æ›²æŠ˜çš„è½¯è·¯ç”±åŠå®¶é‡Œäº‘ç³»ç»Ÿæ›´æ–°</title>
    <link href="/zh-CN/2025/09/95687a4df9d5/"/>
    <url>/zh-CN/2025/09/95687a4df9d5/</url>
    
    <content type="html"><![CDATA[<p>äº‹æƒ…çš„èµ·å› æ˜¯è½¯è·¯ç”±ç³»ç»Ÿå¾ˆå¤šå¹´äº†ï¼Œåˆ°ç°åœ¨ç»å†äº† Clash æ›´æ–°ï¼Œä¹‹å‰ç”¨çš„ç¬¬ä¸‰æ–¹ç¼–è¯‘æœ‰ä¸€å †ç”¨ä¸ä¸Šçš„è½¯ä»¶åŒ…ï¼Œä¹Ÿä¸æ€ä¹ˆç¨³å®šäº†ï¼Œæ­£å¥½å®˜æ–¹ç°åœ¨æä¾›ç¼–è¯‘å›ºä»¶äº†ï¼Œç´¢æ€§æ‰“ç®—å‡çº§ä¸€ä¸‹ã€‚</p><p>æƒ³ç€æ—¢ç„¶æŠ˜è…¾äº†ï¼Œå°±æŠŠå®¶é‡Œäº‘çš„æ ‘è“æ´¾ç³»ç»Ÿä¹Ÿé‡è£…ä¸€ä¸‹ï¼Œä¹‹å‰çš„ 21 LTS å‡çº§åˆ° 24 LTS åæœ‰ç‚¹ä¸ç¨³å®šï¼Œé¡ºä¾¿æ”¹æˆæ¡Œé¢ç‰ˆã€‚</p><span id="more"></span><hr><p>å…ˆè¯´å®¶é‡Œäº‘è¿™è¾¹ï¼Œç³»ç»Ÿè¢«æˆ‘ä¸€é€šæŠ˜è…¾åå¼€ä¸å¼€æœºäº†ï¼Œäºæ˜¯æ–¥å·¨èµ„15å…ƒè´­å…¥ä¸€ä¸ª Micro HDMI è½¬æ¥å¤´ï¼Œæœç„¶æ˜¯å¯åŠ¨å¡ä½äº†ï¼Œè§£å†³åå¤‡ä»½æ–‡ä»¶ï¼Œå‡†å¤‡åˆ·ç³»ç»Ÿã€‚</p><p>æ¥ä¸‹æ¥æ¥åˆ°è½¯è·¯ç”±é‚£è¾¹ï¼Œç”¨ sysupgrade å‡çº§äº†æ–°ç³»ç»Ÿï¼Œè½¯ä»¶åŒ…éƒ½è¢«åˆ æ‰äº†ï¼Œè€Œä¸”ç³»ç»Ÿè¢«åˆ†åŒºä¸ºäº†ä¸€ä¸ª 100M çš„ç³»ç»Ÿåˆ†åŒºï¼Œå…¶å®ƒç©ºé—´ç©ºé—²äº†ã€‚</p><p>æ‰€ä»¥æˆ‘éœ€è¦åšä¸¤ä¸ªå·¥ä½œï¼Œå®‰è£…éœ€è¦çš„æœåŠ¡å¹¶é…ç½®ï¼Œè¿˜æœ‰æ‰©å±•ç³»ç»Ÿåˆ†åŒºã€‚æŠ˜è…¾ä¸€ç•ªåé…ç½®å¥½äº†ï¼Œä½†æ˜¨å¤©å¤œé‡Œ OpenClash è‡ªåŠ¨æ›´æ–°æ•°æ®åº“æ—¶ç½‘ç»œç›´æ¥å¯„äº†ï¼ŒDDNS æœåŠ¡å™¨ä¹Ÿæ¶ˆå¤±äº†ã€‚å…³é—­å’Œé‡ç½® OpenClash åè¿˜æ²¡å¥½ï¼Œè€Œä¸” Meta å†…æ ¸ä¹Ÿæ¶ˆå¤±äº†ï¼Œè‡ªåŠ¨æ›´æ–°å¤±è´¥ï¼Œæ‰‹åŠ¨ä¸Šä¼ å‘ç°ç©ºé—´ä¸å¤Ÿäº†ï¼Œäºæ˜¯çŒœæµ‹æ˜¨å¤©æ–­ç½‘ä¹Ÿæ˜¯ç”±äºç©ºé—´ä¸å¤Ÿå¯¼è‡´ dnsmasq çš„ DDNS æœåŠ¡å™¨ä¸€èµ·å‡ºäº†é—®é¢˜ã€‚</p><hr><p>æ—¢ç„¶ç©ºé—´ä¸å¤Ÿäº†ï¼Œé‚£æ‹–äº†å¥½å‡ å¤©çš„æ‰©å®¹åˆ†åŒºä¸å¾—ä¸å¹²äº†ï¼Œæ‹”ä¸‹æ¥æ’åˆ° Windows ç”µè„‘ä¸Šï¼Œç°‡æ ‡è®°æœ‰é—®é¢˜ DiskGenius ä¸ç»™æ‰©å®¹ï¼Œå„ç§æŠ˜è…¾åæ”¾å¼ƒäº†ï¼Œæ¯•ç«Ÿæ˜¯ ext4ï¼Œä¹Ÿç†è§£ï¼Œæ‰“ç®—ç”¨ Linux æ‰©å®¹äº†ã€‚æ­¤æ—¶æˆå‰§æ€§çš„äº‹æƒ…æ¥äº†ï¼Œæˆ‘å®¶å”¯ä¸€çš„ Linux è®¾å¤‡æ˜¯æˆ‘çš„å®¶é‡Œäº‘ï¼Œç„¶è€Œå®ƒåªæœ‰ä¸€ä¸ªç³»ç»Ÿ SD å¡æ§½ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—ç”µè„‘ä¸Šç”¨ USB å¯åŠ¨ä¸€ä¸ª Linux ç³»ç»Ÿï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ä¸ª USB A å£çš„è¯»å¡å™¨ã€‚</p><p>ä½†æˆ‘çš„ USB A ä¸‡ç”¨è¯»å¡å™¨å‰å‡ å‘¨åˆšè¢«æˆ‘å–äº†ï¼Œå› ä¸ºç°åœ¨è¯»å¡ç”¨çš„æ˜¯ Type C æ‰©å±•åï¼Œæƒ³ç€ 2025 å¹´äº†è°è¿˜ç”¨è¿™è¯»å¡å™¨ï¼Œæˆ‘ä¹Ÿä¸è¯» TF å¡â€¦â€¦äºæ˜¯å†æ¬¡æ–¥å·¨èµ„13å…ƒè´­å…¥äº†ä¸ªç»¿è”å»‰ä»·è¯»å¡å™¨ï¼Œæ‰“ç®—æ’ç”µè„‘ä¸Šç”¨ã€‚</p><p>ï¼ˆæˆ‘å†™è¿™ä¸ªæ–‡ç« çš„æ—¶å€™æ‰æƒ³èµ·æ¥ç”µè„‘æœ‰ Type C æ’æ‰©å±•åè¯»å¡ï¼Œè€Œä¸”æˆ‘è¿˜ç”¨å®ƒå°è¯•äº† Windows DiskGenius è°ƒåˆ†åŒºï¼Œæ‰€ä»¥åŒæ ·ä¹Ÿå¯ä»¥ USB å¯åŠ¨ä¸ª Linux ç„¶åè°ƒåˆ†åŒºâ€¦â€¦ï¼‰</p><p>ä¸æ­¤åŒæ—¶ï¼Œæäº†ä¸€ä¸‹æ ‘è“æ´¾çš„ USB å¯åŠ¨å‘ç°èƒ½è¡Œï¼Œå°±åˆ·äº†ä¸ªç³»ç»ŸæˆåŠŸå¯åŠ¨èµ·æ¥ï¼Œæ’å…¥è½¯è·¯ç”±çš„ SD å¡æˆåŠŸæ‰©å®¹ã€‚æ’å›è½¯è·¯ç”±é…ç½®å¥½ï¼Œè½¯è·¯ç”±è¿™è¾¹ç®—å‘Šä¸€æ®µè½äº†ã€‚</p><p>ç„¶åæ˜¯æ ‘è“æ´¾è¿™è¾¹ï¼Œåˆ·å¥½ç³»ç»Ÿå¼€å§‹é…ç½®ï¼Œç„¶åè£…è½¯ä»¶æŠŠä¹‹å‰çš„æœåŠ¡å¯åŠ¨èµ·æ¥ï¼Œåˆæ˜¯ä¸€ç•ªæŠ˜è…¾ï¼Œç°åœ¨è¿˜æ²¡å®Œå…¨æå®Œã€‚ä¸è¿‡è¿™ä¸ªæ¡Œé¢ç³»ç»Ÿçœ‹ç€ç¡®å®æŒºçˆ½ã€‚</p><hr><p>é¡ºä¾¿å†èŠä¸¤å¥AIã€‚ç”Ÿæˆå¼AIèŠå¤©è½¯ä»¶åœ¨è¿™ç§è¿ç»´å·¥ä½œä¸­æœ‰å¾ˆå¤§çš„ç”¨é€”ï¼Œæå¤§åœ°æé«˜äº†å·¥ä½œæ•ˆç‡ã€‚ä¼ ç»Ÿè¿ç»´æ–¹å¼å¾ˆå¤šèµ„æ–™éœ€è¦è‡ªå·±è°·æ­Œæœç´¢ï¼Œç„¶åå†ç­›é€‰ä¿®æ”¹ï¼Œè€Œä½¿ç”¨AIå¯ä»¥å½»åº•æ”¹å˜è¿™ä¸ªå·¥ä½œæµã€‚ç¬¬ä¸€æ˜¯æä¾›å„ç§å‘½ä»¤ï¼Œå°¤å…¶æ˜¯æ‹¥æœ‰è·¯å¾„å’Œç³»ç»Ÿç¯å¢ƒç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ç›´æ¥æä¾›éœ€è¦çš„å‘½ä»¤ï¼Œä¸ä¼šå‡ºç°è¿‡æ—§å’Œä¸å…¼å®¹çš„å‘½ä»¤ï¼Œä¹Ÿä¸éœ€è¦å°†æŸ¥å‡ºæ¥çš„å‘½ä»¤è‡ªå·±ä¿®æ”¹è·¯å¾„ç­‰ä¿¡æ¯ã€‚ç¬¬äºŒæ˜¯æä¾›å’¨è¯¢æœåŠ¡ï¼Œå½“æˆ‘ä»¬å¯¹ä¸€äº›é…ç½®ä¸æ¸…æ¥šçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å‡ è½®å¯¹è¯å¿«é€Ÿå­¦ä¹ å’Œåˆ¤æ–­ï¼Œäº†è§£ä¸åŒé…ç½®çš„ä½œç”¨å’Œåˆ©å¼Šã€‚</p><hr><p>è‡³äºé‚£ä¸ªè¯»å¡å™¨ï¼Œæ‰“ç®—é€€äº†ğŸ˜‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è¿ç»´</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ubuntu</tag>
      
      <tag>è¿ç»´</tag>
      
      <tag>Linux</tag>
      
      <tag>OpenWrt</tag>
      
      <tag>æ ‘è“æ´¾</tag>
      
      <tag>è½¯è·¯ç”±</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Autoware Development Environment Setup</title>
    <link href="/en/2025/07/ef9e4425c7c1/"/>
    <url>/en/2025/07/ef9e4425c7c1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>This article introduces how to set up the Autoware development environment.</p></blockquote><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p><a href="https://autoware.org/">Autoware</a> is the worldâ€™s leading open-source project for autonomous driving.</p><span id="more"></span><p>This article was written on July 19, 2025, based on Autoware version 0.45.1.</p><h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><p>My system environment.</p><ul><li>Intel(R) Core(TM) i9-14900K</li><li>NVIDIA GeForce RTX 2080 Ti</li><li>Ubuntu 22.04.5 LTS</li></ul><p>Please install Docker Engine and NVIDIA Container Toolkit yourself. You can refer to the <a href="https://docs.docker.com/engine/install/ubuntu/">official Docker documentation</a> and others.</p><h2 id="Download-Source-Code"><a href="#Download-Source-Code" class="headerlink" title="Download Source Code"></a>Download Source Code</h2><p>Clone the Autoware repository and switch to the specified version.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/autowarefoundation/autoware.git<br><span class="hljs-built_in">cd</span> autoware<br>git checkout 0.45.1<br></code></pre></td></tr></table></figure><p>Install required dependencies.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./setup-dev-env.sh -y docker<br></code></pre></td></tr></table></figure><p>To use <code>-y</code>, you can run <code>sudo ls</code> or a similar command to enter your password once. Alternatively, you can remove the <code>-y</code> option and manually confirm and enter your password when prompted. Otherwise, the script may fail due to needing sudo privileges.</p><p>After completion, you should see the following output.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">PLAY RECAP **************************************************************************************************<br>localhost                  : ok=36   changed=3    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   <br><br>Completed.<br></code></pre></td></tr></table></figure><h2 id="Development-Environment"><a href="#Development-Environment" class="headerlink" title="Development Environment"></a>Development Environment</h2><p>Start the <code>devel</code> container.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./docker/run.sh --devel<br></code></pre></td></tr></table></figure><p>To exit the development container, it is recommended to use the CTRL-p CTRL-q key combination to avoid losing changes. You can reconnect to the container using <code>docker attach CONTAINER</code> or <code>docker exec -it CONTAINER bash</code>. For more information, refer to <a href="https://docs.docker.com/reference/cli/docker/container/attach/">docker container attach</a>.</p><p>Enter the workspace directory.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /workspace<br></code></pre></td></tr></table></figure><p>Create the <code>src</code> directory and clone repositories.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p src<br>vcs import src &lt; autoware.repos<br></code></pre></td></tr></table></figure><p>Update dependent ROS packages.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update &amp;&amp; sudo apt upgrade<br>rosdep update<br>rosdep install -y --from-paths src --ignore-src --rosdistro <span class="hljs-variable">$ROS_DISTRO</span><br></code></pre></td></tr></table></figure><p>If you encounter GPG Key errors during apt update, you can try the following commands.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">W: GPG error: http://packages.ros.org/ros2/ubuntu jammy InRelease: The following signatures were invalid: EXPKEYSIG F42ED6FBAB17C654 Open Robotics &lt;info@osrfoundation.org&gt;<br>E: The repository <span class="hljs-string">&#x27;http://packages.ros.org/ros2/ubuntu jammy InRelease&#x27;</span> is not signed.<br>N: Updating from such a repository can<span class="hljs-string">&#x27;t be done securely, and is therefore disabled by default.</span><br><span class="hljs-string">N: See apt-secure(8) manpage for repository creation and user configuration details.</span><br><span class="hljs-string">W: http://ppa.launchpad.net/kisak/kisak-mesa/ubuntu/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">rm</span> -f /etc/apt/sources.list.d/ros2-latest.list<br>sudo <span class="hljs-built_in">rm</span> -f /etc/apt/sources.list.d/ros2.list<br>sudo curl -fsSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key | gpg --dearmor | sudo <span class="hljs-built_in">tee</span> /usr/share/keyrings/ros-archive-keyring.gpg &gt; /dev/null<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;deb [arch=amd64 signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu jammy main&quot;</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/ros2.list &gt; /dev/null<br></code></pre></td></tr></table></figure><p>Build the workspace.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release<br></code></pre></td></tr></table></figure><p>The first build may not succeed for all packages. Continue rebuilding, the number of failed packages will decrease until success.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@SORA-WS3:/workspace<span class="hljs-comment"># colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br>...<br>Summary: 403 packages finished [14min 18s]<br>  32 packages had stderr output: autoware_bag_time_manager_rviz_plugin autoware_bevfusion autoware_bytetrack autoware_costmap_generator autoware_crop_box_filter autoware_elevation_map_loader autoware_external_velocity_limit_selector autoware_freespace_planning_algorithms autoware_lanelet2_extension_python autoware_overlay_rviz_plugin autoware_path_generator autoware_radar_scan_to_pointcloud2 autoware_remaining_distance_time_calculator autoware_shape_estimation autoware_smart_mpc_trajectory_follower autoware_surround_obstacle_checker autoware_system_monitor autoware_tensorrt_classifier autoware_tensorrt_plugins autoware_traffic_light_selector eagleye_can_velocity_converter eagleye_coordinate eagleye_geo_pose_fusion eagleye_rt nebula_ros negotiated pointcloud_to_laserscan trt_batched_nms yabloc_common yabloc_image_processing yabloc_particle_filter yabloc_pose_initializer<br>root@SORA-WS3:/workspace<span class="hljs-comment"># colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br>...<br>Summary: 403 packages finished [11.9s]<br></code></pre></td></tr></table></figure><h2 id="Scenario-Simulation"><a href="#Scenario-Simulation" class="headerlink" title="Scenario Simulation"></a>Scenario Simulation</h2><h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><p>In the <code>/workspace</code> directory of the development environment, run the following commands.</p><p>Import simulator dependencies.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vcs import src &lt; simulator.repos<br></code></pre></td></tr></table></figure><p>Install ROS dependencies.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> /opt/ros/humble/setup.bash<br>rosdep install -y --from-paths src --ignore-src --rosdistro <span class="hljs-variable">$ROS_DISTRO</span><br></code></pre></td></tr></table></figure><p>Build the workspace.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release<br></code></pre></td></tr></table></figure><h3 id="Scenario-Test-Simulation"><a href="#Scenario-Test-Simulation" class="headerlink" title="Scenario Test Simulation"></a>Scenario Test Simulation</h3><p>In the <code>/workspace</code> directory of the development environment, run the following commands.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> install/setup.bash<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">ros2 launch scenario_test_runner scenario_test_runner.launch.py \<br>  architecture_type:=awf/universe/20250130 \<br>  record:=<span class="hljs-literal">false</span> \<br>  scenario:=<span class="hljs-string">&#x27;$(find-pkg-share scenario_test_runner)/scenario/sample.yaml&#x27;</span> \<br>  sensor_model:=sample_sensor_kit \<br>  vehicle_model:=sample_vehicle<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2025/07/20/79r5zk7.png" alt="Running scenario test simulation"></p><h2 id="Runtime-Environment"><a href="#Runtime-Environment" class="headerlink" title="Runtime Environment"></a>Runtime Environment</h2><h3 id="Download-Map-and-Data"><a href="#Download-Map-and-Data" class="headerlink" title="Download Map and Data"></a>Download Map and Data</h3><p>Run the following commands on the host to download the map. Please install <code>gdown</code> and <code>unzip</code> yourself.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">gdown -O ~/autoware_map/ <span class="hljs-string">&#x27;https://docs.google.com/uc?export=download&amp;id=1A-8BvYRX3DhSzkAnOcGWFw5T30xTlwZI&#x27;</span><br>unzip -d ~/autoware_map/ ~/autoware_map/sample-map-rosbag.zip<br>gdown -O ~/autoware_map/ <span class="hljs-string">&#x27;https://docs.google.com/uc?export=download&amp;id=1499_nsbUbIeturZaDj7jhUownh5fvXHd&#x27;</span><br>unzip -d ~/autoware_map ~/autoware_map/sample-map-planning.zip<br></code></pre></td></tr></table></figure><p>Install ansible (only needed for the first installation).</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Remove apt installed ansible (In Ubuntu 22.04, ansible the version is old)</span><br>sudo apt-get purge ansible<br><br><span class="hljs-comment"># Install pipx</span><br>sudo apt-get -y update<br>sudo apt-get -y install pipx<br><br><span class="hljs-comment"># Add pipx to the system PATH</span><br>python3 -m pipx ensurepath<br><br><span class="hljs-comment"># Install ansible</span><br>pipx install --include-deps --force <span class="hljs-string">&quot;ansible==6.*&quot;</span><br></code></pre></td></tr></table></figure><p>Install ansible collections (only needed for the first installation).</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/autoware <span class="hljs-comment"># The root directory of the cloned repository</span><br>ansible-galaxy collection install -f -r <span class="hljs-string">&quot;ansible-galaxy-requirements.yaml&quot;</span><br></code></pre></td></tr></table></figure><p>Run the playbook to download and extract data.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ansible-playbook autoware.dev_env.download_artifacts -e <span class="hljs-string">&quot;data_dir=<span class="hljs-variable">$HOME</span>/autoware_data&quot;</span> --ask-become-pass<br></code></pre></td></tr></table></figure><h3 id="Start-Runtime-Container"><a href="#Start-Runtime-Container" class="headerlink" title="Start Runtime Container"></a>Start Runtime Container</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./docker/run.sh --map-path ~/autoware_map/sample-map-planning --data-path ~/autoware_data ros2 launch autoware_launch planning_simulator.launch.xml map_path:=/autoware_map vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2025/07/20/htjoh14.png" alt="Interface after startup"></p><h2 id="Manual-Path-Planning-and-Testing"><a href="#Manual-Path-Planning-and-Testing" class="headerlink" title="Manual Path Planning and Testing"></a>Manual Path Planning and Testing</h2><p>After starting the runtime container, select the 2D Pose Estimation tool and click and drag to set the start point.</p><p><img src="https://picture.zhanganzhi.com/2025/07/20/sdj8vqe.png" alt="Set start point"></p><p>Select the 2D Goal Pose tool and click and drag to set the goal point.</p><p><img src="https://picture.zhanganzhi.com/2025/07/20/dzkt61l.png" alt="Set goal point"></p><p>Click <code>Auto</code>, and the vehicle will automatically drive to the goal.</p><p><img src="https://picture.zhanganzhi.com/2025/07/20/j05gfq5.png" alt="Vehicle driving"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>The Autoware Foundation. <a href="https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/">Open AD Kit: containerized workloads for Autoware</a>. 2025. <a href="https://web.archive.org/web/20250719222539/https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>The Autoware Foundation. <a href="https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/installation/">Installation</a>. 2025. <a href="https://web.archive.org/web/20250720025404/https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/installation/">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>The Autoware Foundation. <a href="https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/">Scenario test simulation</a>. 2025. <a href="https://web.archive.org/web/20250720025412/https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>The Autoware Foundation. <a href="https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/">Planning simulation</a>. 2025. <a href="https://web.archive.org/web/20250720025354/https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>The Autoware Foundation. <a href="https://github.com/autowarefoundation/autoware/tree/main/ansible/roles/artifacts">Autoware artifacts</a>. 2025. <a href="https://web.archive.org/web/20250720025501/https://github.com/autowarefoundation/autoware/tree/main/ansible/roles/artifacts">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>The Autoware Foundation. <a href="https://github.com/autowarefoundation/autoware/blob/main/ansible/README.md">Ansible Collection - autoware.dev_env</a>. 2025. <a href="https://web.archive.org/web/20250720025333/https://github.com/autowarefoundation/autoware/blob/main/ansible/README.md">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è‡ªåŠ¨é©¾é©¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‡ªåŠ¨é©¾é©¶</tag>
      
      <tag>æ•™ç¨‹</tag>
      
      <tag>Ubuntu</tag>
      
      <tag>Docker</tag>
      
      <tag>Autoware</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Autoware å¼€å‘ç¯å¢ƒæ­å»º</title>
    <link href="/zh-CN/2025/07/6cb09a5639d5/"/>
    <url>/zh-CN/2025/07/6cb09a5639d5/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä»‹ç»å¦‚ä½•æ­å»º Autoware çš„å¼€å‘ç¯å¢ƒã€‚</p></blockquote><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><a href="https://autoware.org/">Autoware</a> æ˜¯ä¸–ç•Œé¢†å…ˆçš„å¼€æºè‡ªåŠ¨é©¾é©¶é¡¹ç›®ã€‚</p><span id="more"></span><p>æœ¬æ–‡æ’°å†™äº 2025 å¹´ 7 æœˆ 19 æ—¥ï¼ŒåŸºäº Autoware 0.45.1 ç‰ˆæœ¬ã€‚</p><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æˆ‘ä½¿ç”¨çš„ç³»ç»Ÿç¯å¢ƒã€‚</p><ul><li>Intel(R) Core(TM) i9-14900K</li><li>NVIDIA GeForce RTX 2080 Ti</li><li>Ubuntu 22.04.5 LTS</li></ul><p>è¯·è‡ªè¡Œå®‰è£… Docker Engine å’Œ NVIDIA Container Toolkitï¼Œå¯å‚è€ƒ <a href="https://docs.docker.com/engine/install/ubuntu/">Docker å®˜æ–¹æ–‡æ¡£</a> ç­‰ã€‚</p><h2 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h2><p>å…‹éš† Autoware ä»“åº“å¹¶åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/autowarefoundation/autoware.git<br><span class="hljs-built_in">cd</span> autoware<br>git checkout 0.45.1<br></code></pre></td></tr></table></figure><p>å®‰è£…æ‰€éœ€ä¾èµ–ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./setup-dev-env.sh -y docker<br></code></pre></td></tr></table></figure><p>ä¸ºäº†ä½¿ç”¨ <code>-y</code>ï¼Œä½ å¯ä»¥å…ˆæ‰§è¡Œ <code>sudo ls</code> æˆ–ç±»ä¼¼å‘½ä»¤è¾“å…¥ä¸€æ¬¡å¯†ç ã€‚æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥å»æ‰ <code>-y</code> é€‰é¡¹ï¼Œè¿™æ ·åœ¨éœ€è¦æ—¶æ‰‹åŠ¨åŒæ„å¹¶è¾“å…¥å¯†ç ï¼Œå¦åˆ™è„šæœ¬ä¼šå› ä¸ºéœ€è¦ sudo æƒé™è€Œå¤±è´¥ã€‚</p><p>å®Œæˆåçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">PLAY RECAP **************************************************************************************************<br>localhost                  : ok=36   changed=3    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   <br><br>Completed.<br></code></pre></td></tr></table></figure><h2 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h2><p>å¯åŠ¨ <code>devel</code> å®¹å™¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./docker/run.sh --devel<br></code></pre></td></tr></table></figure><p>è¦é€€å‡ºå¼€å‘å®¹å™¨ï¼Œå»ºè®®ä½¿ç”¨ CTRL-p CTRL-q é”®ç»„åˆï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸¢å¤±ä¿®æ”¹å†…å®¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>docker attach CONTAINER</code> æˆ– <code>docker exec -it CONTAINER bash</code> å‘½ä»¤é‡æ–°è¿æ¥åˆ°å®¹å™¨ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ <a href="https://docs.docker.com/reference/cli/docker/container/attach/">docker container attach</a>ã€‚</p><p>è¿›å…¥å·¥ä½œç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /workspace<br></code></pre></td></tr></table></figure><p>åˆ›å»º <code>src</code> ç›®å½•å¹¶å…‹éš†å­˜å‚¨åº“ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p src<br>vcs import src &lt; autoware.repos<br></code></pre></td></tr></table></figure><p>æ›´æ–°ä¾èµ–çš„ ROS åŒ…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update &amp;&amp; sudo apt upgrade<br>rosdep update<br>rosdep install -y --from-paths src --ignore-src --rosdistro <span class="hljs-variable">$ROS_DISTRO</span><br></code></pre></td></tr></table></figure><p>å¦‚æœ apt æ›´æ–°æ—¶é‡åˆ° GPG Key é”™è¯¯ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">W: GPG error: http://packages.ros.org/ros2/ubuntu jammy InRelease: The following signatures were invalid: EXPKEYSIG F42ED6FBAB17C654 Open Robotics &lt;info@osrfoundation.org&gt;<br>E: The repository <span class="hljs-string">&#x27;http://packages.ros.org/ros2/ubuntu jammy InRelease&#x27;</span> is not signed.<br>N: Updating from such a repository can<span class="hljs-string">&#x27;t be done securely, and is therefore disabled by default.</span><br><span class="hljs-string">N: See apt-secure(8) manpage for repository creation and user configuration details.</span><br><span class="hljs-string">W: http://ppa.launchpad.net/kisak/kisak-mesa/ubuntu/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">rm</span> -f /etc/apt/sources.list.d/ros2-latest.list<br>sudo <span class="hljs-built_in">rm</span> -f /etc/apt/sources.list.d/ros2.list<br>sudo curl -fsSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key | gpg --dearmor | sudo <span class="hljs-built_in">tee</span> /usr/share/keyrings/ros-archive-keyring.gpg &gt; /dev/null<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;deb [arch=amd64 signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu jammy main&quot;</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/ros2.list &gt; /dev/null<br></code></pre></td></tr></table></figure><p>æ„å»ºå·¥ä½œåŒºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡ç¼–è¯‘å®Œæˆåä¸ä¸€å®šä¼šå…¨éƒ¨æˆåŠŸï¼Œæ­¤æ—¶ç»§ç»­é‡æ–°ç¼–è¯‘ï¼Œå¤±è´¥çš„åŒ…ä¼šè¶Šæ¥è¶Šå°‘ï¼Œç›´åˆ°æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@SORA-WS3:/workspace<span class="hljs-comment"># colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br>...<br>Summary: 403 packages finished [14min 18s]<br>  32 packages had stderr output: autoware_bag_time_manager_rviz_plugin autoware_bevfusion autoware_bytetrack autoware_costmap_generator autoware_crop_box_filter autoware_elevation_map_loader autoware_external_velocity_limit_selector autoware_freespace_planning_algorithms autoware_lanelet2_extension_python autoware_overlay_rviz_plugin autoware_path_generator autoware_radar_scan_to_pointcloud2 autoware_remaining_distance_time_calculator autoware_shape_estimation autoware_smart_mpc_trajectory_follower autoware_surround_obstacle_checker autoware_system_monitor autoware_tensorrt_classifier autoware_tensorrt_plugins autoware_traffic_light_selector eagleye_can_velocity_converter eagleye_coordinate eagleye_geo_pose_fusion eagleye_rt nebula_ros negotiated pointcloud_to_laserscan trt_batched_nms yabloc_common yabloc_image_processing yabloc_particle_filter yabloc_pose_initializer<br>root@SORA-WS3:/workspace<span class="hljs-comment"># colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br>...<br>Summary: 403 packages finished [11.9s]<br></code></pre></td></tr></table></figure><h2 id="åœºæ™¯æ¨¡æ‹Ÿ"><a href="#åœºæ™¯æ¨¡æ‹Ÿ" class="headerlink" title="åœºæ™¯æ¨¡æ‹Ÿ"></a>åœºæ™¯æ¨¡æ‹Ÿ</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>åœ¨å¼€å‘ç¯å¢ƒçš„ <code>/workspace</code> ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><p>å¯¼å…¥æ¨¡æ‹Ÿå™¨ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vcs import src &lt; simulator.repos<br></code></pre></td></tr></table></figure><p>å®‰è£… ROS ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> /opt/ros/humble/setup.bash<br>rosdep install -y --from-paths src --ignore-src --rosdistro <span class="hljs-variable">$ROS_DISTRO</span><br></code></pre></td></tr></table></figure><p>æ„å»ºå·¥ä½œåŒº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release<br></code></pre></td></tr></table></figure><h3 id="åœºæ™¯æµ‹è¯•æ¨¡æ‹Ÿ"><a href="#åœºæ™¯æµ‹è¯•æ¨¡æ‹Ÿ" class="headerlink" title="åœºæ™¯æµ‹è¯•æ¨¡æ‹Ÿ"></a>åœºæ™¯æµ‹è¯•æ¨¡æ‹Ÿ</h3><p>åœ¨å¼€å‘ç¯å¢ƒçš„ <code>/workspace</code> ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> install/setup.bash<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">ros2 launch scenario_test_runner scenario_test_runner.launch.py \<br>  architecture_type:=awf/universe/20250130 \<br>  record:=<span class="hljs-literal">false</span> \<br>  scenario:=<span class="hljs-string">&#x27;$(find-pkg-share scenario_test_runner)/scenario/sample.yaml&#x27;</span> \<br>  sensor_model:=sample_sensor_kit \<br>  vehicle_model:=sample_vehicle<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2025/07/20/79r5zk7.png" alt="è¿è¡Œåœºæ™¯æµ‹è¯•æ¨¡æ‹Ÿ"></p><h2 id="è¿è¡Œæ—¶ç¯å¢ƒ"><a href="#è¿è¡Œæ—¶ç¯å¢ƒ" class="headerlink" title="è¿è¡Œæ—¶ç¯å¢ƒ"></a>è¿è¡Œæ—¶ç¯å¢ƒ</h2><h3 id="ä¸‹è½½åœ°å›¾å’Œæ•°æ®"><a href="#ä¸‹è½½åœ°å›¾å’Œæ•°æ®" class="headerlink" title="ä¸‹è½½åœ°å›¾å’Œæ•°æ®"></a>ä¸‹è½½åœ°å›¾å’Œæ•°æ®</h3><p>åœ¨ä¸»æœºä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ä¸‹è½½åœ°å›¾ï¼Œè¯·è‡ªè¡Œå®‰è£… <code>gdown</code> å’Œ <code>unzip</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">gdown -O ~/autoware_map/ <span class="hljs-string">&#x27;https://docs.google.com/uc?export=download&amp;id=1A-8BvYRX3DhSzkAnOcGWFw5T30xTlwZI&#x27;</span><br>unzip -d ~/autoware_map/ ~/autoware_map/sample-map-rosbag.zip<br>gdown -O ~/autoware_map/ <span class="hljs-string">&#x27;https://docs.google.com/uc?export=download&amp;id=1499_nsbUbIeturZaDj7jhUownh5fvXHd&#x27;</span><br>unzip -d ~/autoware_map ~/autoware_map/sample-map-planning.zip<br></code></pre></td></tr></table></figure><p>å®‰è£… ansibleï¼Œè¯¥æ­¥éª¤ä»…é¦–æ¬¡å®‰è£…éœ€è¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Remove apt installed ansible (In Ubuntu 22.04, ansible the version is old)</span><br>sudo apt-get purge ansible<br><br><span class="hljs-comment"># Install pipx</span><br>sudo apt-get -y update<br>sudo apt-get -y install pipx<br><br><span class="hljs-comment"># Add pipx to the system PATH</span><br>python3 -m pipx ensurepath<br><br><span class="hljs-comment"># Install ansible</span><br>pipx install --include-deps --force <span class="hljs-string">&quot;ansible==6.*&quot;</span><br></code></pre></td></tr></table></figure><p>å®‰è£… ansible collectionsï¼Œä¹Ÿæ˜¯ä»…é¦–æ¬¡å®‰è£…éœ€è¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/autoware <span class="hljs-comment"># The root directory of the cloned repository</span><br>ansible-galaxy collection install -f -r <span class="hljs-string">&quot;ansible-galaxy-requirements.yaml&quot;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œ playbook ä»¥ä¸‹è½½å’Œè§£å‹æ•°æ®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ansible-playbook autoware.dev_env.download_artifacts -e <span class="hljs-string">&quot;data_dir=<span class="hljs-variable">$HOME</span>/autoware_data&quot;</span> --ask-become-pass<br></code></pre></td></tr></table></figure><h3 id="å¯åŠ¨è¿è¡Œæ—¶å®¹å™¨"><a href="#å¯åŠ¨è¿è¡Œæ—¶å®¹å™¨" class="headerlink" title="å¯åŠ¨è¿è¡Œæ—¶å®¹å™¨"></a>å¯åŠ¨è¿è¡Œæ—¶å®¹å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./docker/run.sh --map-path ~/autoware_map/sample-map-planning --data-path ~/autoware_data ros2 launch autoware_launch planning_simulator.launch.xml map_path:=/autoware_map vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2025/07/20/htjoh14.png" alt="å¯åŠ¨åçš„ç•Œé¢"></p><h2 id="æ‰‹åŠ¨è·¯å¾„è§„åˆ’å’Œæµ‹è¯•"><a href="#æ‰‹åŠ¨è·¯å¾„è§„åˆ’å’Œæµ‹è¯•" class="headerlink" title="æ‰‹åŠ¨è·¯å¾„è§„åˆ’å’Œæµ‹è¯•"></a>æ‰‹åŠ¨è·¯å¾„è§„åˆ’å’Œæµ‹è¯•</h2><p>å¯åŠ¨è¿è¡Œæ—¶å®¹å™¨åï¼Œé€‰æ‹© 2D Pose Estimation å·¥å…·ï¼Œç‚¹å‡»å¹¶æ‹–æ‹½è®¾ç½®èµ·ç‚¹ã€‚</p><p><img src="https://picture.zhanganzhi.com/2025/07/20/sdj8vqe.png" alt="è®¾ç½®èµ·ç‚¹"></p><p>é€‰æ‹© 2D Goal Pose å·¥å…·ï¼Œç‚¹å‡»å¹¶æ‹–æ‹½è®¾ç½®ç»ˆç‚¹ã€‚</p><p><img src="https://picture.zhanganzhi.com/2025/07/20/dzkt61l.png" alt="è®¾ç½®ç»ˆç‚¹"></p><p>ç‚¹å‡» <code>Auto</code>ï¼Œè½¦è¾†ä¼šè‡ªåŠ¨è¿è¡Œè‡³ç»ˆç‚¹ã€‚</p><p><img src="https://picture.zhanganzhi.com/2025/07/20/j05gfq5.png" alt="è½¦è¾†è¡Œé©¶"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>The Autoware Foundation. <a href="https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/">Open AD Kit: containerized workloads for Autoware</a>. 2025. <a href="https://web.archive.org/web/20250719222539/https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>The Autoware Foundation. <a href="https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/installation/">Installation</a>. 2025. <a href="https://web.archive.org/web/20250720025404/https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/installation/">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>The Autoware Foundation. <a href="https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/">Scenario test simulation</a>. 2025. <a href="https://web.archive.org/web/20250720025412/https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>The Autoware Foundation. <a href="https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/">Planning simulation</a>. 2025. <a href="https://web.archive.org/web/20250720025354/https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>The Autoware Foundation. <a href="https://github.com/autowarefoundation/autoware/tree/main/ansible/roles/artifacts">Autoware artifacts</a>. 2025. <a href="https://web.archive.org/web/20250720025501/https://github.com/autowarefoundation/autoware/tree/main/ansible/roles/artifacts">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>The Autoware Foundation. <a href="https://github.com/autowarefoundation/autoware/blob/main/ansible/README.md">Ansible Collection - autoware.dev_env</a>. 2025. <a href="https://web.archive.org/web/20250720025333/https://github.com/autowarefoundation/autoware/blob/main/ansible/README.md">Archived</a> on 2025-07-19. Retrieved 2025-07-19.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è‡ªåŠ¨é©¾é©¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‡ªåŠ¨é©¾é©¶</tag>
      
      <tag>æ•™ç¨‹</tag>
      
      <tag>Ubuntu</tag>
      
      <tag>Docker</tag>
      
      <tag>Autoware</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Apollo Development Environment Setup</title>
    <link href="/en/2025/07/18a74626a42a/"/>
    <url>/en/2025/07/18a74626a42a/</url>
    
    <content type="html"><![CDATA[<!-- markdownlint-disable-file MD024 --><blockquote><p>This article describes how to set up the Baidu Apollo development environment.</p></blockquote><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p><a href="https://apollo.auto/">Apollo</a> is a high performance, flexible architecture which accelerates the development, testing, and deployment of Autonomous Vehicles.</p><span id="more"></span><p>This article was written on July 7, 2025, based on Apollo version 10.0.</p><h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><p>My system environment:</p><ul><li>Intel(R) Core(TM) i9-14900K</li><li>NVIDIA GeForce RTX 2080 Ti</li><li>Ubuntu 22.04.5 LTS</li></ul><p>Please install Docker Engine and GPU support yourself. You may refer to the <a href="https://docs.docker.com/engine/install/ubuntu/">Docker official documentation</a> and <a href="https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html">Apollo Installation Guide</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Baidu. [å®‰è£…æŒ‡å—](https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html). 2024. [Archived](https://web.archive.org/web/20250707190258/https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html) on 2025-07-07. Retrieved 2025-07-07.">[1]</span></a></sup>.</p><h2 id="Package-Management-Installation"><a href="#Package-Management-Installation" class="headerlink" title="Package Management Installation"></a>Package Management Installation</h2><h3 id="Install-Apollo-Environment-Manager"><a href="#Install-Apollo-Environment-Manager" class="headerlink" title="Install Apollo Environment Manager"></a>Install Apollo Environment Manager</h3><p>Apollo Environment Manager is a command-line tool that helps manage and launch Apollo environments.</p><h4 id="1-Install-required-dependencies"><a href="#1-Install-required-dependencies" class="headerlink" title="1. Install required dependencies"></a>1. Install required dependencies</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get update<br>sudo apt-get install ca-certificates curl gnupg<br></code></pre></td></tr></table></figure><h4 id="2-Add-Apollo-software-source-GPG-key-and-configure-source"><a href="#2-Add-Apollo-software-source-GPG-key-and-configure-source" class="headerlink" title="2. Add Apollo software source GPG key and configure source"></a>2. Add Apollo software source GPG key and configure source</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Add GPG key</span><br>sudo install -m 0755 -d /etc/apt/keyrings<br>curl -fsSL https://apollo-pkg-beta.cdn.bcebos.com/neo/beta/key/deb.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/apolloauto.gpg<br>sudo <span class="hljs-built_in">chmod</span> a+r /etc/apt/keyrings/apolloauto.gpg<br><br><span class="hljs-comment"># Configure source and update</span><br><span class="hljs-built_in">echo</span> \<br>    <span class="hljs-string">&quot;deb [arch=&quot;</span>$(dpkg --print-architecture)<span class="hljs-string">&quot; signed-by=/etc/apt/keyrings/apolloauto.gpg] https://apollo-pkg-beta.cdn.bcebos.com/apollo/core&quot;</span>\<br>    $(. /etc/os-release &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$VERSION_CODENAME</span>&quot;</span>) <span class="hljs-string">&quot;main&quot;</span> | \<br>    sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/apolloauto.list<br>sudo apt-get update<br></code></pre></td></tr></table></figure><h4 id="3-Install-aem"><a href="#3-Install-aem" class="headerlink" title="3. Install aem"></a>3. Install aem</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install apollo-neo-env-manager-dev --reinstall<br></code></pre></td></tr></table></figure><p>After installation, you can use:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aem -h<br></code></pre></td></tr></table></figure><h3 id="Install-Example-Project"><a href="#Install-Example-Project" class="headerlink" title="Install Example Project"></a>Install Example Project</h3><h4 id="1-Select-an-example-project"><a href="#1-Select-an-example-project" class="headerlink" title="1. Select an example project"></a>1. Select an example project</h4><p>Apollo currently provides 3 example projects. You can choose one as needed:</p><ul><li><p><a href="https://github.com/ApolloAuto/application-core">application-core</a>: contains all open-source Apollo packages, suitable for building your own application.</p></li><li><p><a href="https://github.com/ApolloAuto/application-pnc">application-pnc</a>: contains only planning and control packages, suitable for users focusing on that area.</p></li><li><p><a href="https://github.com/ApolloAuto/application-perception">application-perception</a>: contains only perception-related packages.</p></li></ul><blockquote><p>Alternatively, you can use the full Apollo source project: <a href="https://github.com/ApolloAuto/apollo">apollo</a></p><p>Note: Starting from Apollo 10.0, both source and package modes use the same build tool. It is recommended to use the unified build commands below. Scripts such as dev_start.sh, dev_into.sh, apollo.sh are no longer recommended.</p></blockquote><h4 id="2-Clone-the-project"><a href="#2-Clone-the-project" class="headerlink" title="2. Clone the project"></a>2. Clone the project</h4><p>Taking application-core as an example:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/ApolloAuto/application-core.git<br></code></pre></td></tr></table></figure><h4 id="3-Start-and-enter-the-Apollo-environment"><a href="#3-Start-and-enter-the-Apollo-environment" class="headerlink" title="3. Start and enter the Apollo environment"></a>3. Start and enter the Apollo environment</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">Enter project directory</span><br>cd application-core<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Switch environment configuration, will automatically recognize your host environment to switch .<span class="hljs-built_in">env</span> and .workspace.json configuration</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">If you use apollo <span class="hljs-built_in">source</span> code, you don<span class="hljs-string">&#x27;t need to perform this step, aem will automatically recognize the starting environment.</span></span><br>bash setup.sh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">Start container</span></span><br>aem start<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">If you prefer using host machine instead of docker:</span></span><br>aem start -b host<br></code></pre></td></tr></table></figure><blockquote><p>Note: In host mode, subsequent operations are the same as in container mode. You can later run aem enter in the project root to enter the environment, either as a docker container or an Apollo bash shell.</p></blockquote><h4 id="4-Install-packages"><a href="#4-Install-packages" class="headerlink" title="4. Install packages"></a>4. Install packages</h4><p>The example project includes a <code>core</code> directory with <code>core/cyberfile.xml</code> that describes dependencies to install:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">buildtool build -p core<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Or build all code and packages:</span><br>buildtool build<br></code></pre></td></tr></table></figure><blockquote><p>This command builds the <code>core</code> package. Since it contains no source code, this step only installs dependencies from <code>core/cyberfile.xml</code>.</p><p>Note: New buildtool versions use â€“opt â€“gpu by default (if GPU is available). Use â€“dbg for gdb debugging.</p></blockquote><p>You might encounter permission errors:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">PermissionError: [Errno 13] Permission denied: &#x27;tools/proto/proto.bzl&#x27;<br></code></pre></td></tr></table></figure><p>Use <code>sudo chmod 777 tools/proto/proto.bzl</code> to resolve. Repeat for other files as needed.</p><h4 id="5-Select-vehicle-profile"><a href="#5-Select-vehicle-profile" class="headerlink" title="5. Select vehicle profile"></a>5. Select vehicle profile</h4><p>The <code>profiles/sample</code> directory provides an official config with 1 radar and 2 cameras. You can create your own vehicle profile based on this. To apply a profile:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">Example: apply sample profile</span><br>aem profile use sample<br></code></pre></td></tr></table></figure><h4 id="6-Play-record-data"><a href="#6-Play-record-data" class="headerlink" title="6. Play record data"></a>6. Play record data</h4><h5 id="Get-map-for-the-record"><a href="#Get-map-for-the-record" class="headerlink" title="Get map for the record"></a>Get map for the record</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">buildtool map get sunnyvale<br></code></pre></td></tr></table></figure><blockquote><p>Starting with version 9.0.0-rc-r10, map data is no longer bundled and must be downloaded separately. Use buildtool map list to view all available maps.</p></blockquote><h5 id="Launch-Dreamview"><a href="#Launch-Dreamview" class="headerlink" title="Launch Dreamview+"></a>Launch Dreamview+</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">aem bootstrap start --plus<br></code></pre></td></tr></table></figure><p>Other steps can be found in the <a href="#play-record">Play Record</a> section below.</p><h2 id="Source-Code-Installation"><a href="#Source-Code-Installation" class="headerlink" title="Source Code Installation"></a>Source Code Installation</h2><h3 id="Download-and-Install-Apollo-Source-Code"><a href="#Download-and-Install-Apollo-Source-Code" class="headerlink" title="Download and Install Apollo Source Code"></a>Download and Install Apollo Source Code</h3><h4 id="1-Clone-Apollo-source-code"><a href="#1-Clone-Apollo-source-code" class="headerlink" title="1. Clone Apollo source code"></a>1. Clone Apollo source code</h4><p>Execute the following commands to clone Apollo source code:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">SSH method</span><br>git clone git@github.com:ApolloAuto/apollo.git<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">HTTPS method</span><br>git clone https://github.com/ApolloAuto/apollo.git<br></code></pre></td></tr></table></figure><p>Check out to the latest branch:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> apollo<br>git checkout master<br></code></pre></td></tr></table></figure><h4 id="2-Start-Apollo-environment-container"><a href="#2-Start-Apollo-environment-container" class="headerlink" title="2. Start Apollo environment container"></a>2. Start Apollo environment container</h4><p>In the apollo directory, enter the following command to start the environment container:</p><blockquote><p>Note: If your graphics card is RTX 40 series and you have properly installed the drivers, refer to <a href="https://apollo.baidu.com/community/article/1212">RTX 40 series image support</a> for operations.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash docker/scripts/dev_start.sh<br></code></pre></td></tr></table></figure><p>After successful operation, you will see the following output:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ OK ] Congratulations! You have successfully finished setting up Apollo Dev Environment.<br>[ OK ] To login into the newly created apollo_dev_michael container, please run the following <span class="hljs-built_in">command</span>:<br>[ OK ]   bash docker/scripts/dev_into.sh<br>[ OK ] Enjoy!<br></code></pre></td></tr></table></figure><h4 id="3-Enter-Apollo-environment-container"><a href="#3-Enter-Apollo-environment-container" class="headerlink" title="3. Enter Apollo environment container"></a>3. Enter Apollo environment container</h4><p>In the apollo directory, enter the following command to enter the container:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash docker/scripts/dev_into.sh<br></code></pre></td></tr></table></figure><h4 id="4-Build"><a href="#4-Build" class="headerlink" title="4. Build"></a>4. Build</h4><p>In the &#x2F;apollo directory inside the container, execute the following command to build the entire project:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./apollo.sh build<br></code></pre></td></tr></table></figure><p>If you need to enable build optimization, use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./apollo.sh build_opt<br></code></pre></td></tr></table></figure><h4 id="5-Start-Apollo-for-record-playback-verification"><a href="#5-Start-Apollo-for-record-playback-verification" class="headerlink" title="5. Start Apollo for record playback verification"></a>5. Start Apollo for record playback verification</h4><h5 id="Launch-Dreamview-1"><a href="#Launch-Dreamview-1" class="headerlink" title="Launch Dreamview+"></a>Launch Dreamview+</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bash scripts/bootstrap.sh start_plus<br></code></pre></td></tr></table></figure><p>Other steps can be found in the <a href="#play-record">Play Record</a> section below.</p><h2 id="Play-Record"><a href="#Play-Record" class="headerlink" title="Play Record"></a>Play Record</h2><h3 id="Get-the-record"><a href="#Get-the-record" class="headerlink" title="Get the record"></a>Get the record</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget https://apollo-system.cdn.bcebos.com/dataset/6.0_edu/demo_3.5.record -P $HOME/.apollo/resources/records/<br></code></pre></td></tr></table></figure><h3 id="Play-record-in-Dreamview"><a href="#Play-record-in-Dreamview" class="headerlink" title="Play record in Dreamview+"></a>Play record in Dreamview+</h3><p>After launching Dreamview+, go to <code>localhost:8888</code> in your browser. You can select Default Mode or other modes. Weâ€™ll use Default Mode here.</p><p><img src="https://picture.zhanganzhi.com/2025/07/07/ybx2zd9.png" alt="Dreamview+ Welcome Page"></p><ol><li>Select <strong>Default Mode</strong>.</li><li>Check <strong>Accept the User Agreement and Privacy Policy</strong>, then click <strong>Enter this Mode</strong>.</li><li>On <strong>Mode Settings</strong> page:<ul><li>Under <strong>Operations</strong>, select <strong>Record</strong></li><li>Under <strong>Environment Resources &gt; Records</strong>, select the desired record</li><li>Under <strong>Environment Resources &gt; HDMap</strong>, select <strong>Sunnyvale Big Loop</strong></li></ul></li><li>Click the Play button at the bottom<br><img src="https://picture.zhanganzhi.com/2025/07/07/azpt4rp.png" alt="Play Record"><br>Youâ€™ll see the record playback in the Vehicle Visualization panel.</li></ol><h3 id="Play-record-via-command-line"><a href="#Play-record-via-command-line" class="headerlink" title="Play record via command line"></a>Play record via command line</h3><ol><li>Enter docker environment.</li><li>After downloading the record in Dreamview+ &gt; Resource Manager &gt; Records, run:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cyber_recorder play -f ~/.apollo/resources/records/demo_3.5.record<br></code></pre></td></tr></table></figure><blockquote><p>Tip: Add <code>-l</code> to loop playback. Without <code>-l</code>, it plays once.</p></blockquote><h2 id="Using-Dreamview"><a href="#Using-Dreamview" class="headerlink" title="Using Dreamview"></a>Using Dreamview</h2><p>New versions (around 9.0 and above) recommend using Dreamview+. Dreamviewâ€™s path planning and other features may be inconvenient or unavailable due to lack of maintenance.</p><h3 id="Dreamview"><a href="#Dreamview" class="headerlink" title="Dreamview+"></a>Dreamview+</h3><p>Go to <a href="http://localhost:8888/">http://localhost:8888/</a></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/pfr2u72.png" alt="Waiting for loading"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/t9dusv6.png" alt="Enter Default Mode"></p><p>Play record</p><p><img src="https://picture.zhanganzhi.com/2025/07/17/dmqkekn.png" alt="Select Record"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/b65qi1e.png" alt="Select Map"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/fvm1thn.png" alt="Play Record"></p><p>Route Editing</p><p><img src="https://picture.zhanganzhi.com/2025/07/17/9uoenml.png" alt="Switch to Sim Control mode, open Planning module, enter Route Editing"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/kpqxvpk.png" alt="Use Initial Point and Way Point to set start, waypoints, and end points, drag the mouse to set direction, click Save Editing to save and exit"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/32csxb6.png" alt="Click Start to run"></p><h3 id="Dreamview-1"><a href="#Dreamview-1" class="headerlink" title="Dreamview"></a>Dreamview</h3><p>Go to <a href="http://localhost:8899/">http://localhost:8899/</a></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/z5mg80p.png" alt="Basic Interface"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/g90gdhi.png" alt="Start Sim Control"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/ti9o1xk.png" alt="Open Planning module, enter Route Editing"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/e8uon79.png" alt="Directly click to set route points, drag the mouse to set direction, click Send Routing Request"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/kapw2kh.png" alt="Vehicle Driving"></p><h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><ol><li>If you see a blank page at Dreamview+ <code>localhost:8888</code>, try clearing your browser cache, you can also try this if you encounter other display issues.</li><li>After <code>git clone</code>, remember to <code>git checkout</code> to the correct version.</li><li>When building Apollo 7.0 from source, you might encounter the following issues:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">(21:25:48) ERROR: An error occurred during the fetch of repository <span class="hljs-string">&#x27;zlib&#x27;</span>:<br>   Traceback (most recent call last):<br>        File <span class="hljs-string">&quot;/apollo/.cache/bazel/540135163923dd7d5820f3ee4b306b32/external/bazel_tools/tools/build_defs/repo/http.bzl&quot;</span>, line 111, column 45, <span class="hljs-keyword">in</span> _http_archive_impl<br>                download_info = ctx.download_and_extract(<br>Error <span class="hljs-keyword">in</span> download_and_extract: java.io.IOException: Error downloading [https://zlib.net/zlib-1.2.11.tar.gz] to /apollo/.cache/bazel/540135163923dd7d5820f3ee4b306b32/external/zlib/temp2343066494928926687/zlib-1.2.11.tar.gz: GET returned 404 Not Found<br>(21:25:49) ERROR: /apollo/.cache/bazel/540135163923dd7d5820f3ee4b306b32/external/com_google_protobuf/BUILD:210:11: @com_google_protobuf//:protobuf depends on @zlib//:zlib <span class="hljs-keyword">in</span> repository @zlib <span class="hljs-built_in">which</span> failed to fetch. no such package <span class="hljs-string">&#x27;@zlib//&#x27;</span>: java.io.IOException: Error downloading [https://zlib.net/zlib-1.2.11.tar.gz] to /apollo/.cache/bazel/540135163923dd7d5820f3ee4b306b32/external/zlib/temp2343066494928926687/zlib-1.2.11.tar.gz: GET returned 404 Not Found<br></code></pre></td></tr></table></figure><p>At this point, you need to add the following content to the <code>WORKSPACE</code> file in the apollo directory to fix the zlib download address. This should be added after <code>workspace(name = &quot;apollo&quot;)</code> on the first line of the file.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bzl">load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)<br>http_archive(<br>    name = &quot;zlib&quot;,<br>    urls = [&quot;https://github.com/madler/zlib/archive/refs/tags/v1.2.11.tar.gz&quot;],<br>    sha256 = &quot;629380c90a77b964d896ed37163f5c3a34f6e6d897311f1df2a7016355c45eff&quot;,<br>    strip_prefix = &quot;zlib-1.2.11&quot;,<br>    build_file_content = &quot;&quot;&quot;<br>cc_library(<br>    name = &quot;zlib&quot;,<br>    srcs = glob([&quot;*.c&quot;]),<br>    hdrs = glob([&quot;*.h&quot;]),<br>    includes = [&quot;.&quot;],<br>    visibility = [&quot;//visibility:public&quot;],<br>)<br>    &quot;&quot;&quot;,<br>)<br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Baidu. <a href="https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html">å®‰è£…æŒ‡å—</a>. 2024. <a href="https://web.archive.org/web/20250707190258/https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html">Archived</a> on 2025-07-07. Retrieved 2025-07-07.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>Baidu. <a href="https://apollo.baidu.com/docs/apollo/9.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE6_xBA_x90_xE7_xA0_x81_xE5_xAE_x89_c6622abe953930b2197ae66df0a51dcd.html#autotoc_md57">æºç å®‰è£…æ–¹å¼</a>. 2023. <a href="https://web.archive.org/web/20250716213629/https://apollo.baidu.com/docs/apollo/9.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE6_xBA_x90_xE7_xA0_x81_xE5_xAE_x89_c6622abe953930b2197ae66df0a51dcd.html">Archived</a> on 2025-07-16. Retrieved 2025-07-16.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è‡ªåŠ¨é©¾é©¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Apollo</tag>
      
      <tag>è‡ªåŠ¨é©¾é©¶</tag>
      
      <tag>æ•™ç¨‹</tag>
      
      <tag>Ubuntu</tag>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Apollo å¼€å‘ç¯å¢ƒæ­å»º</title>
    <link href="/zh-CN/2025/07/1d260f43e20f/"/>
    <url>/zh-CN/2025/07/1d260f43e20f/</url>
    
    <content type="html"><![CDATA[<!-- markdownlint-disable-file MD024 --><blockquote><p>æœ¬æ–‡ä»‹ç»å¦‚ä½•æ­å»º Baidu Apollo çš„å¼€å‘ç¯å¢ƒã€‚</p></blockquote><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><a href="https://apollo.auto/">Apollo</a> æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€çµæ´»çš„æ¶æ„ï¼Œå¯åŠ é€Ÿè‡ªåŠ¨é©¾é©¶æ±½è½¦çš„å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚</p><span id="more"></span><p>æœ¬æ–‡æ’°å†™äº 2025 å¹´ 7 æœˆ 7 æ—¥ï¼ŒåŸºäº Apollo 10.0 ç‰ˆæœ¬ã€‚</p><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æˆ‘ä½¿ç”¨çš„ç³»ç»Ÿç¯å¢ƒï¼š</p><ul><li>Intel(R) Core(TM) i9-14900K</li><li>NVIDIA GeForce RTX 2080 Ti</li><li>Ubuntu 22.04.5 LTS</li></ul><p>è¯·è‡ªè¡Œå®‰è£… Docker Engine å’Œ GPU æ”¯æŒï¼Œå¯å‚è€ƒ <a href="https://docs.docker.com/engine/install/ubuntu/">Docker å®˜æ–¹æ–‡æ¡£</a> å’Œ <a href="https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html">Apolloå®‰è£…æŒ‡å—</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Baidu. [å®‰è£…æŒ‡å—](https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html). 2024. [Archived](https://web.archive.org/web/20250707190258/https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html) on 2025-07-07. Retrieved 2025-07-07.">[1]</span></a></sup>ã€‚</p><h2 id="åŒ…ç®¡ç†å®‰è£…æ–¹å¼"><a href="#åŒ…ç®¡ç†å®‰è£…æ–¹å¼" class="headerlink" title="åŒ…ç®¡ç†å®‰è£…æ–¹å¼"></a>åŒ…ç®¡ç†å®‰è£…æ–¹å¼</h2><h3 id="å®‰è£…-Apollo-ç¯å¢ƒç®¡ç†å·¥å…·"><a href="#å®‰è£…-Apollo-ç¯å¢ƒç®¡ç†å·¥å…·" class="headerlink" title="å®‰è£… Apollo ç¯å¢ƒç®¡ç†å·¥å…·"></a>å®‰è£… Apollo ç¯å¢ƒç®¡ç†å·¥å…·</h3><p>Apollo ç¯å¢ƒç®¡ç†å·¥å…·æ˜¯ä¸€ä¸ªå¸®å¿™ç®¡ç†å’Œå¯åŠ¨ Apollo ç¯å¢ƒçš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p><h4 id="1-å®‰è£…ä¾èµ–è½¯ä»¶"><a href="#1-å®‰è£…ä¾èµ–è½¯ä»¶" class="headerlink" title="1. å®‰è£…ä¾èµ–è½¯ä»¶"></a>1. å®‰è£…ä¾èµ–è½¯ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get update<br>sudo apt-get install ca-certificates curl gnupg<br></code></pre></td></tr></table></figure><h4 id="2-åœ¨å®¿ä¸»æœºæ·»åŠ -Apollo-è½¯ä»¶æºçš„-gpg-keyï¼Œå¹¶è®¾ç½®å¥½æºå’Œæ›´æ–°"><a href="#2-åœ¨å®¿ä¸»æœºæ·»åŠ -Apollo-è½¯ä»¶æºçš„-gpg-keyï¼Œå¹¶è®¾ç½®å¥½æºå’Œæ›´æ–°" class="headerlink" title="2. åœ¨å®¿ä¸»æœºæ·»åŠ  Apollo è½¯ä»¶æºçš„ gpg keyï¼Œå¹¶è®¾ç½®å¥½æºå’Œæ›´æ–°"></a>2. åœ¨å®¿ä¸»æœºæ·»åŠ  Apollo è½¯ä»¶æºçš„ gpg keyï¼Œå¹¶è®¾ç½®å¥½æºå’Œæ›´æ–°</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ·»åŠ  gpg key</span><br>sudo install -m 0755 -d /etc/apt/keyrings<br>curl -fsSL https://apollo-pkg-beta.cdn.bcebos.com/neo/beta/key/deb.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/apolloauto.gpg<br>sudo <span class="hljs-built_in">chmod</span> a+r /etc/apt/keyrings/apolloauto.gpg<br><br><span class="hljs-comment"># è®¾ç½®æºå¹¶æ›´æ–°</span><br><span class="hljs-built_in">echo</span> \<br>    <span class="hljs-string">&quot;deb [arch=&quot;</span>$(dpkg --print-architecture)<span class="hljs-string">&quot; signed-by=/etc/apt/keyrings/apolloauto.gpg] https://apollo-pkg-beta.cdn.bcebos.com/apollo/core&quot;</span>\<br>    $(. /etc/os-release &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$VERSION_CODENAME</span>&quot;</span>) <span class="hljs-string">&quot;main&quot;</span> | \<br>    sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/apolloauto.list<br>sudo apt-get update<br></code></pre></td></tr></table></figure><h4 id="3-å®‰è£…-aem"><a href="#3-å®‰è£…-aem" class="headerlink" title="3. å®‰è£… aem"></a>3. å®‰è£… aem</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install apollo-neo-env-manager-dev --reinstall<br></code></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåå³å¯ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aem -h<br></code></pre></td></tr></table></figure><h3 id="å®‰è£…ç¤ºä¾‹å·¥ç¨‹"><a href="#å®‰è£…ç¤ºä¾‹å·¥ç¨‹" class="headerlink" title="å®‰è£…ç¤ºä¾‹å·¥ç¨‹"></a>å®‰è£…ç¤ºä¾‹å·¥ç¨‹</h3><h4 id="1-é€‰æ‹©ç¤ºä¾‹å·¥ç¨‹"><a href="#1-é€‰æ‹©ç¤ºä¾‹å·¥ç¨‹" class="headerlink" title="1. é€‰æ‹©ç¤ºä¾‹å·¥ç¨‹"></a>1. é€‰æ‹©ç¤ºä¾‹å·¥ç¨‹</h4><p>Apollo ç›®å‰æä¾›äº†3ä¸ªç¤ºä¾‹å·¥ç¨‹ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©å…¶ä¸€</p><ul><li><p><a href="https://github.com/ApolloAuto/application-core">application-core</a> , åŒ…å« Apollo æ‰€æœ‰å¼€æºè½¯ä»¶åŒ…ï¼Œå¯ä»¥åŸºäºæ­¤å·¥ç¨‹æ­å»ºè‡ªå·±çš„åº”ç”¨</p></li><li><p><a href="https://github.com/ApolloAuto/application-pnc">application-pnc</a> , ä»…åŒ…å«è§„åˆ’æ§åˆ¶ç›¸å…³çš„è½¯ä»¶åŒ…ï¼Œé€‚åˆä»…å…³æ³¨è§„åˆ’æ§åˆ¶æ–¹å‘çš„ç”¨æˆ·</p></li><li><p><a href="https://github.com/ApolloAuto/application-perception">application-perception</a> , ä»…åŒ…å«æ„ŸçŸ¥ç›¸å…³çš„è½¯ä»¶åŒ…ï¼Œé€‚åˆä»…å…³æ³¨æ„ŸçŸ¥æ–¹å‘çš„ç”¨æˆ·</p></li></ul><blockquote><p>å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨ Apollo å…¨é‡æºç çš„å·¥ç¨‹ <a href="https://github.com/ApolloAuto/apollo">apollo</a></p><p>æç¤ºï¼šä»Apollo 10.0å¼€å§‹ï¼Œæºç æ¨¡å¼å’ŒåŒ…æ¨¡å¼é‡‡ç”¨åŒä¸€å¥—ç¼–è¯‘å·¥å…·ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ç»Ÿä¸€ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œç¼–è¯‘å’Œè¿è¡Œï¼Œæºç æ¨¡å¼ä¸‹çš„dev_start.shã€dev_into.shã€apollo.shç­‰è„šæœ¬ä¸å†å»ºè®®ä½¿ç”¨ã€‚</p></blockquote><h4 id="2-å…‹éš†å·¥ç¨‹"><a href="#2-å…‹éš†å·¥ç¨‹" class="headerlink" title="2. å…‹éš†å·¥ç¨‹"></a>2. å…‹éš†å·¥ç¨‹</h4><p>ä»¥ application-core ä¸ºä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/ApolloAuto/application-core.git<br></code></pre></td></tr></table></figure><h4 id="3-å¯åŠ¨å¹¶è¿›å…¥-Apollo-ç¯å¢ƒ"><a href="#3-å¯åŠ¨å¹¶è¿›å…¥-Apollo-ç¯å¢ƒ" class="headerlink" title="3. å¯åŠ¨å¹¶è¿›å…¥ Apollo ç¯å¢ƒ"></a>3. å¯åŠ¨å¹¶è¿›å…¥ Apollo ç¯å¢ƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å…ˆè¿›å…¥å·¥ç¨‹ç›®å½•</span><br>cd application-core<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆ‡æ¢ç¯å¢ƒé…ç½®, ä¼šè‡ªåŠ¨è¯†åˆ«æ‚¨çš„å®¿ä¸»æœºç¯å¢ƒåˆ‡æ¢.<span class="hljs-built_in">env</span>å’Œ.workspace.jsoné…ç½®</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœæ‚¨ä½¿ç”¨apolloæºç æ–¹å¼ï¼Œä¸éœ€è¦æ‰§è¡Œæ­¤æ­¥éª¤ï¼Œaemä¼šè‡ªåŠ¨è¯†åˆ«èµ·åŠ¨ç¯å¢ƒ</span><br>bash setup.sh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨å®¹å™¨</span><br>aem start<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœæ‚¨é€‰æ‹©ä½¿ç”¨æœ¬æœºè€Œédockerå®¹å™¨è¿›è¡Œç¯å¢ƒå®‰è£…ï¼Œæ‰§è¡Œï¼š</span><br>aem start -b host<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæœ¬æœºæ¨¡å¼ä¸‹åé¢çš„æ“ä½œå’Œå®¹å™¨å†…æ˜¯ä¸€è‡´çš„ã€‚åç»­éƒ½å¯ä»¥åœ¨å½“å‰å·¥ç¨‹ç›®å½•ä¸‹æ‰§è¡Œ aem enter å‘½ä»¤è¿›å…¥ç¯å¢ƒï¼Œä¸€ä¸ªæ˜¯è¿›å…¥dockerå®¹å™¨ï¼Œä¸€ä¸ªæ˜¯è¿›å…¥ä¸€ä¸ªapollo bashç©ºé—´ã€‚</p></blockquote><h4 id="4-å®‰è£…è½¯ä»¶åŒ…"><a href="#4-å®‰è£…è½¯ä»¶åŒ…" class="headerlink" title="4. å®‰è£…è½¯ä»¶åŒ…"></a>4. å®‰è£…è½¯ä»¶åŒ…</h4><p>ç¤ºä¾‹å·¥ç¨‹ä¸­åŒ…å«ä¸€ä¸ªåä¸º <code>core</code> ç›®å½•ï¼Œå…¶ä¸­ <code>core/cyberfile.xml</code> æ–‡ä»¶ä¸­æè¿°äº†å·¥ç¨‹æ‰€ä¾èµ–è½¯ä»¶åŒ…ï¼Œå¯ä»¥é€šè¿‡ buildtool å·¥å…·è¿›è¡Œä¾èµ–åŒ…çš„å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">buildtool build -p core<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ³¨ï¼šå¦‚æœæ‚¨æƒ³ç¼–è¯‘å®‰è£…å·¥ä½œç›®å½•ä¸‹çš„æ‰€æœ‰ä»£ç å’ŒåŒ…ï¼Œè¯·æ‰§è¡Œ</span><br>buildtool build<br></code></pre></td></tr></table></figure><blockquote><p>æ­¤æ“ä½œçœŸæ­£å«ä¹‰æ˜¯ç¼–è¯‘å·¥ç¨‹ä¸­ <code>core</code> è¿™ä¸ªåŒ…ï¼Œä½† <code>core</code> æœ¬èº«å¹¶æ²¡æœ‰éœ€è¦ç¼–è¯‘çš„ä»£ç ï¼Œæ‰€ä»¥æ­¤æ“ä½œä»…ä¼šå®‰è£… <code>core/cyberfile.xml</code> ä¸­å£°æ˜çš„ä¾èµ–åŒ…</p><p>æç¤ºï¼šæ–°ç‰ˆæœ¬buildtoolç¼–è¯‘çš„æ—¶å€™ä¼šé»˜è®¤å¸¦ä¸Š â€“opt â€“gpuï¼ˆå¦‚æœæ‚¨ä½¿ç”¨gpuç¯å¢ƒï¼‰å‚æ•°ï¼Œå¦‚æœéœ€è¦gdbè°ƒå¼è¯·ä½¿ç”¨â€“dbgå‚æ•°ç¼–è¯‘ã€‚</p></blockquote><p>å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°æƒé™é—®é¢˜ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">PermissionError: [Errno 13] Permission denied: &#x27;tools/proto/proto.bzl&#x27;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>sudo chmod 777 tools/proto/proto.bzl</code> å‘½ä»¤ä¿®æ”¹æƒé™å³å¯ï¼Œå…¶å®ƒæ–‡ä»¶åŒç†ã€‚</p><h4 id="5-é€‰æ‹©è½¦å‹é…ç½®"><a href="#5-é€‰æ‹©è½¦å‹é…ç½®" class="headerlink" title="5. é€‰æ‹©è½¦å‹é…ç½®"></a>5. é€‰æ‹©è½¦å‹é…ç½®</h4><p>ç¤ºä¾‹å·¥ç¨‹ä¸­profiles&#x2F;sampleç›®å½•æ˜¯å®˜æ–¹æä¾›çš„åŸºäºä¸€ä¸ªé›·è¾¾ä¸¤ä¸ªæ‘„åƒå¤´çš„è½¦å‹é…ç½®ï¼Œæ‚¨å¯ä»¥å‚è€ƒprofilesç›®å½•ä¸‹çš„sampleç¼–å†™è‡ªå·±çš„è½¦å‹é…ç½®ï¼Œç”Ÿæ•ˆè½¦å‹é…ç½®çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ä»¥sampleä¸ºä¾‹</span><br>aem profile use sample<br></code></pre></td></tr></table></figure><h4 id="6-æ’­æ”¾æ•°æ®åŒ…"><a href="#6-æ’­æ”¾æ•°æ®åŒ…" class="headerlink" title="6. æ’­æ”¾æ•°æ®åŒ…"></a>6. æ’­æ”¾æ•°æ®åŒ…</h4><h5 id="è·å–æ•°æ®åŒ…å¯¹åº”çš„åœ°å›¾"><a href="#è·å–æ•°æ®åŒ…å¯¹åº”çš„åœ°å›¾" class="headerlink" title="è·å–æ•°æ®åŒ…å¯¹åº”çš„åœ°å›¾"></a>è·å–æ•°æ®åŒ…å¯¹åº”çš„åœ°å›¾</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">buildtool map get sunnyvale<br></code></pre></td></tr></table></figure><blockquote><p>ä» <code>9.0.0-rc-r10</code> ç‰ˆæœ¬å¼€å§‹ï¼Œåœ°å›¾æ•°æ®å·²ç»è¢«åˆ†ç¦»å‡ºæ¥ï¼Œéœ€è¦å•ç‹¬ä¸‹è½½ï¼Œä¸å†éšåœ°å›¾åŒ…å‘å¸ƒï¼›é€šè¿‡ <code>buildtool map list</code> å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„åœ°å›¾</p></blockquote><h5 id="å¯åŠ¨-Dreamview"><a href="#å¯åŠ¨-Dreamview" class="headerlink" title="å¯åŠ¨ Dreamview+"></a>å¯åŠ¨ Dreamview+</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">aem bootstrap start --plus<br></code></pre></td></tr></table></figure><p>å…¶ä½™æ­¥éª¤è¯·å‚è€ƒä¸‹æ–¹ <a href="#%E6%92%AD%E6%94%BE%E6%95%B0%E6%8D%AE%E5%8C%85">æ’­æ”¾æ•°æ®åŒ…</a> éƒ¨åˆ†ã€‚</p><h2 id="æºç å®‰è£…æ–¹å¼"><a href="#æºç å®‰è£…æ–¹å¼" class="headerlink" title="æºç å®‰è£…æ–¹å¼"></a>æºç å®‰è£…æ–¹å¼</h2><h3 id="ä¸‹è½½å®‰è£…-Apollo-æºç "><a href="#ä¸‹è½½å®‰è£…-Apollo-æºç " class="headerlink" title="ä¸‹è½½å®‰è£… Apollo æºç "></a>ä¸‹è½½å®‰è£… Apollo æºç </h3><h4 id="1-å…‹éš†-Apollo-æºç "><a href="#1-å…‹éš†-Apollo-æºç " class="headerlink" title="1. å…‹éš† Apollo æºç "></a>1. å…‹éš† Apollo æºç </h4><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…‹éš† Apollo æºç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">SSH æ–¹å¼</span><br>git clone git@github.com:ApolloAuto/apollo.git<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">HTTPS æ–¹å¼</span><br>git clone https://github.com/ApolloAuto/apollo.git<br></code></pre></td></tr></table></figure><p>æ£€å‡ºåˆ°æœ€æ–°åˆ†æ”¯:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> apollo<br>git checkout master<br></code></pre></td></tr></table></figure><h4 id="2-å¯åŠ¨-Apollo-ç¯å¢ƒå®¹å™¨"><a href="#2-å¯åŠ¨-Apollo-ç¯å¢ƒå®¹å™¨" class="headerlink" title="2. å¯åŠ¨ Apollo ç¯å¢ƒå®¹å™¨"></a>2. å¯åŠ¨ Apollo ç¯å¢ƒå®¹å™¨</h4><p>åœ¨ apollo ç›®å½•ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ç¯å¢ƒå®¹å™¨</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ˜¾å¡æ˜¯40ç³»åˆ—ï¼Œå¹¶ä¸”æ­£ç¡®å®‰è£…é©±åŠ¨åï¼Œå‚è€ƒ<a href="https://apollo.baidu.com/community/article/1212">40ç³»åˆ—é•œåƒæ”¯æŒ</a>è¿›è¡Œæ“ä½œã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash docker/scripts/dev_start.sh<br></code></pre></td></tr></table></figure><p>æ“ä½œæˆåŠŸåæ‚¨å°†ä¼šçœ‹åˆ°å¦‚ä¸‹æ ·å¼çš„æç¤ºè¾“å‡º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ OK ] Congratulations! You have successfully finished setting up Apollo Dev Environment.<br>[ OK ] To login into the newly created apollo_dev_michael container, please run the following <span class="hljs-built_in">command</span>:<br>[ OK ]   bash docker/scripts/dev_into.sh<br>[ OK ] Enjoy!<br></code></pre></td></tr></table></figure><h4 id="3-è¿›å…¥-Apollo-ç¯å¢ƒå®¹å™¨"><a href="#3-è¿›å…¥-Apollo-ç¯å¢ƒå®¹å™¨" class="headerlink" title="3. è¿›å…¥ Apollo ç¯å¢ƒå®¹å™¨"></a>3. è¿›å…¥ Apollo ç¯å¢ƒå®¹å™¨</h4><p>åœ¨ apollo ç›®å½•ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›å…¥å®¹å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash docker/scripts/dev_into.sh<br></code></pre></td></tr></table></figure><h4 id="4-ç¼–è¯‘"><a href="#4-ç¼–è¯‘" class="headerlink" title="4. ç¼–è¯‘"></a>4. ç¼–è¯‘</h4><p>åœ¨å®¹å™¨å†…çš„ &#x2F;apollo ç›®å½•ä¸‹è¾“å‡ºä»¥ä¸‹å‘½ä»¤ç¼–è¯‘æ•´ä¸ªå·¥ç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./apollo.sh build<br></code></pre></td></tr></table></figure><p>è‹¥éœ€è¦å¼€å¯ç¼–è¯‘ä¼˜åŒ–ï¼Œåˆ™é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./apollo.sh build_opt<br></code></pre></td></tr></table></figure><h4 id="5-å¯åŠ¨-Apollo-è¿›è¡Œæ’­åŒ…éªŒè¯"><a href="#5-å¯åŠ¨-Apollo-è¿›è¡Œæ’­åŒ…éªŒè¯" class="headerlink" title="5. å¯åŠ¨ Apollo è¿›è¡Œæ’­åŒ…éªŒè¯"></a>5. å¯åŠ¨ Apollo è¿›è¡Œæ’­åŒ…éªŒè¯</h4><h5 id="å¯åŠ¨-Dreamview-1"><a href="#å¯åŠ¨-Dreamview-1" class="headerlink" title="å¯åŠ¨ Dreamview+"></a>å¯åŠ¨ Dreamview+</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bash scripts/bootstrap.sh start_plus<br></code></pre></td></tr></table></figure><p>å…¶ä½™æ­¥éª¤è¯·å‚è€ƒä¸‹æ–¹ <a href="#%E6%92%AD%E6%94%BE%E6%95%B0%E6%8D%AE%E5%8C%85">æ’­æ”¾æ•°æ®åŒ…</a> éƒ¨åˆ†ã€‚</p><h2 id="æ’­æ”¾æ•°æ®åŒ…"><a href="#æ’­æ”¾æ•°æ®åŒ…" class="headerlink" title="æ’­æ”¾æ•°æ®åŒ…"></a>æ’­æ”¾æ•°æ®åŒ…</h2><h3 id="è·å–æ•°æ®åŒ…"><a href="#è·å–æ•°æ®åŒ…" class="headerlink" title="è·å–æ•°æ®åŒ…"></a>è·å–æ•°æ®åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget https://apollo-system.cdn.bcebos.com/dataset/6.0_edu/demo_3.5.record -P $HOME/.apollo/resources/records/<br></code></pre></td></tr></table></figure><h3 id="åœ¨-Dreamview-ä¸­æ’­æ”¾æ•°æ®åŒ…"><a href="#åœ¨-Dreamview-ä¸­æ’­æ”¾æ•°æ®åŒ…" class="headerlink" title="åœ¨ Dreamview+ ä¸­æ’­æ”¾æ•°æ®åŒ…"></a>åœ¨ Dreamview+ ä¸­æ’­æ”¾æ•°æ®åŒ…</h3><p>å¯åŠ¨ Dreamview+ ä¹‹åï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ <code>localhost:8888</code> è¿›å…¥ Dreamview+ ç•Œé¢ï¼Œæ‚¨å¯ä»¥é€‰æ‹©é»˜è®¤æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æ¨¡å¼æ’­æ”¾æ•°æ®åŒ…ã€‚æœ¬å°èŠ‚ä»¥é»˜è®¤æ¨¡å¼ä¸ºä¾‹ã€‚</p><p><img src="https://picture.zhanganzhi.com/2025/07/07/ybx2zd9.png" alt="Dreamview+ æ¬¢è¿ç•Œé¢"></p><ol><li>é€‰æ‹© <strong>Default Mode</strong> ã€‚</li><li>å‹¾é€‰ <strong>Accept the User Agreement and Privacy Policy&#x2F;æ¥å—ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–</strong> ï¼Œå¹¶å•å‡» <strong>Enter this Mode</strong> è¿›å…¥ <strong>Mode Settings&#x2F;æ¨¡å¼è®¾ç½®</strong> é¡µé¢ã€‚</li><li>åœ¨ <strong>Mode Settings&#x2F;æ¨¡å¼è®¾ç½®</strong> é¡µé¢ï¼Œè®¾ç½®æ’­åŒ…å‚æ•°ã€‚<ul><li>åœ¨ <strong>Operations&#x2F;æ“ä½œ</strong> ä¸­é€‰æ‹© <strong>Record</strong> ã€‚</li><li>åœ¨ <strong>Environment Resources&#x2F;ç¯å¢ƒèµ„æº</strong> ä¸­ï¼Œå•å‡» <strong>Records&#x2F;æ•°æ®åŒ…</strong> ï¼Œå¹¶é€‰æ‹©å…·ä½“æƒ³è¦æ’­æ”¾çš„æ•°æ®åŒ…ã€‚</li><li>åœ¨ <strong>Environment Resources&#x2F;ç¯å¢ƒèµ„æº</strong> ä¸­ï¼Œå•å‡» <strong>HDMap&#x2F;é«˜ç²¾åœ°å›¾</strong> ï¼Œå¹¶é€‰æ‹© <strong>Sunnyvale Big Loop</strong> ã€‚</li></ul></li><li>å•å‡»åº•éƒ¨åŒºåŸŸæ’­æ”¾æŒ‰é’®ã€‚<br><img src="https://picture.zhanganzhi.com/2025/07/07/azpt4rp.png" alt="æ’­æ”¾æ•°æ®åŒ…"><br>å¯ä»¥åœ¨ <strong>Vehicle Visualization&#x2F;è½¦è¾†å¯è§†åŒ–</strong> ä¸­çœ‹åˆ°æ•°æ®åŒ…æ’­æ”¾çš„ç”»é¢ã€‚</li></ol><h3 id="é€šè¿‡å‘½ä»¤è¡Œæ’­æ”¾æ•°æ®åŒ…"><a href="#é€šè¿‡å‘½ä»¤è¡Œæ’­æ”¾æ•°æ®åŒ…" class="headerlink" title="é€šè¿‡å‘½ä»¤è¡Œæ’­æ”¾æ•°æ®åŒ…"></a>é€šè¿‡å‘½ä»¤è¡Œæ’­æ”¾æ•°æ®åŒ…</h3><ol><li>è¿›å…¥ docker ç¯å¢ƒï¼Œ</li><li>åœ¨ Dreamview+ ä¸­ <strong>Resource Manager&#x2F;èµ„æºç®¡ç†</strong> &gt; <strong>Records&#x2F;æ•°æ®åŒ…</strong> ä¸­å…ˆä¸‹è½½éœ€è¦çš„æ•°æ®åŒ…ã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ’­æ”¾æ•°æ®åŒ…ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cyber_recorder play -f ~/.apollo/resources/records/demo_3.5.record<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ‚¨æƒ³è¦å¾ªç¯æ’­æ”¾æ•°æ®åŒ…ï¼Œæ·»åŠ  <code>-l</code>ï¼Œå¦‚æœä¸å¾ªç¯æ’­æ”¾æ•°æ®åŒ…ï¼Œåˆ™ä¸éœ€è¦æ·»åŠ  <code>-l</code>ã€‚</p></blockquote><h2 id="ä½¿ç”¨-Dreamview"><a href="#ä½¿ç”¨-Dreamview" class="headerlink" title="ä½¿ç”¨ Dreamview"></a>ä½¿ç”¨ Dreamview</h2><p>é«˜ç‰ˆæœ¬ï¼ˆå¤§çº¦9.0åŠä»¥ä¸Šï¼‰å»ºè®®ä½¿ç”¨ Dreamview+ï¼ŒDreamview çš„è·¯å¾„è§„åˆ’ç­‰åŠŸèƒ½ä¼šç”±äºç¼ºä¹ç»´æŠ¤è€Œä¸ä¾¿ç”šè‡³æ— æ³•ä½¿ç”¨ã€‚</p><h3 id="Dreamview"><a href="#Dreamview" class="headerlink" title="Dreamview+"></a>Dreamview+</h3><p>æ‰“å¼€ <a href="http://localhost:8888/">http://localhost:8888/</a></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/pfr2u72.png" alt="ç­‰å¾…åŠ è½½"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/t9dusv6.png" alt="è¿›å…¥é»˜è®¤æ¨¡å¼"></p><p>æ’­æ”¾æ•°æ®åŒ…</p><p><img src="https://picture.zhanganzhi.com/2025/07/17/dmqkekn.png" alt="é€‰æ‹©å›æ”¾"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/b65qi1e.png" alt="é€‰æ‹©åœ°å›¾"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/fvm1thn.png" alt="æ•°æ®åŒ…æ’­æ”¾"></p><p>ç¼–è¾‘è·¯å¾„</p><p><img src="https://picture.zhanganzhi.com/2025/07/17/9uoenml.png" alt="åˆ‡æ¢ä¸º Sim Control æ¨¡å¼ï¼Œæ‰“å¼€ Planning æ¨¡å—ï¼Œè¿›å…¥ Route Editing"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/kpqxvpk.png" alt="ä½¿ç”¨ Initial Point å’Œ Way Point è®¾ç½®èµ·ç‚¹é€”ç»ç‚¹å’Œç»ˆç‚¹ï¼Œæ‹–åŠ¨é¼ æ ‡è®¾ç½®æ–¹å‘ï¼Œç‚¹å‡» Save Editing ä¿å­˜å¹¶é€€å‡º"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/32csxb6.png" alt="ç‚¹å‡» Start å¼€å§‹è¿è¡Œ"></p><h3 id="Dreamview-1"><a href="#Dreamview-1" class="headerlink" title="Dreamview"></a>Dreamview</h3><p>æ‰“å¼€ <a href="http://localhost:8899/">http://localhost:8899/</a></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/z5mg80p.png" alt="åŸºæœ¬ç•Œé¢"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/g90gdhi.png" alt="å¼€å¯ Sim Control"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/ti9o1xk.png" alt="æ‰“å¼€ Planning æ¨¡å—ï¼Œè¿›å…¥ Route Editing"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/e8uon79.png" alt="ç›´æ¥ç‚¹å‡»è®¾ç½®è·¯ç»ç‚¹ï¼Œæ‹–åŠ¨é¼ æ ‡è®¾ç½®æ–¹å‘ï¼Œç‚¹å‡» Send Routing Request"></p><p><img src="https://picture.zhanganzhi.com/2025/07/17/kapw2kh.png" alt="è½¦è¾†è¡Œé©¶"></p><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><ol><li>å¦‚æœæ‚¨åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ° Dreamview+ <code>localhost:8888</code> æ˜¯ç©ºç™½çš„ï¼Œå¯èƒ½éœ€è¦æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œæœ‰å…¶ä»–æ˜¾ç¤ºé—®é¢˜ä¹Ÿå¯ä»¥å°è¯•ã€‚</li><li><code>git clone</code> ä¸‹è½½åï¼Œè¯·è®°å¾— <code>git checkout</code> åˆ°æ­£ç¡®çš„ç‰ˆæœ¬ã€‚</li><li>ä½¿ç”¨æºç æ–¹å¼æ„å»º Apollo 7.0 æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">(21:25:48) ERROR: An error occurred during the fetch of repository <span class="hljs-string">&#x27;zlib&#x27;</span>:<br>   Traceback (most recent call last):<br>        File <span class="hljs-string">&quot;/apollo/.cache/bazel/540135163923dd7d5820f3ee4b306b32/external/bazel_tools/tools/build_defs/repo/http.bzl&quot;</span>, line 111, column 45, <span class="hljs-keyword">in</span> _http_archive_impl<br>                download_info = ctx.download_and_extract(<br>Error <span class="hljs-keyword">in</span> download_and_extract: java.io.IOException: Error downloading [https://zlib.net/zlib-1.2.11.tar.gz] to /apollo/.cache/bazel/540135163923dd7d5820f3ee4b306b32/external/zlib/temp2343066494928926687/zlib-1.2.11.tar.gz: GET returned 404 Not Found<br>(21:25:49) ERROR: /apollo/.cache/bazel/540135163923dd7d5820f3ee4b306b32/external/com_google_protobuf/BUILD:210:11: @com_google_protobuf//:protobuf depends on @zlib//:zlib <span class="hljs-keyword">in</span> repository @zlib <span class="hljs-built_in">which</span> failed to fetch. no such package <span class="hljs-string">&#x27;@zlib//&#x27;</span>: java.io.IOException: Error downloading [https://zlib.net/zlib-1.2.11.tar.gz] to /apollo/.cache/bazel/540135163923dd7d5820f3ee4b306b32/external/zlib/temp2343066494928926687/zlib-1.2.11.tar.gz: GET returned 404 Not Found<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶éœ€è¦åœ¨ apollo ç›®å½•ä¸‹çš„ <code>WORKSPACE</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹æ¥ä¿®å¤ zlib çš„ä¸‹è½½åœ°å€ã€‚éœ€æ·»åŠ åˆ°æ–‡ä»¶ç¬¬ä¸€è¡Œçš„ <code>workspace(name = &quot;apollo&quot;)</code> ä¹‹åã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bzl">load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)<br>http_archive(<br>    name = &quot;zlib&quot;,<br>    urls = [&quot;https://github.com/madler/zlib/archive/refs/tags/v1.2.11.tar.gz&quot;],<br>    sha256 = &quot;629380c90a77b964d896ed37163f5c3a34f6e6d897311f1df2a7016355c45eff&quot;,<br>    strip_prefix = &quot;zlib-1.2.11&quot;,<br>    build_file_content = &quot;&quot;&quot;<br>cc_library(<br>    name = &quot;zlib&quot;,<br>    srcs = glob([&quot;*.c&quot;]),<br>    hdrs = glob([&quot;*.h&quot;]),<br>    includes = [&quot;.&quot;],<br>    visibility = [&quot;//visibility:public&quot;],<br>)<br>    &quot;&quot;&quot;,<br>)<br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Baidu. <a href="https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html">å®‰è£…æŒ‡å—</a>. 2024. <a href="https://web.archive.org/web/20250707190258/https://apollo.baidu.com/docs/apollo/10.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97.html">Archived</a> on 2025-07-07. Retrieved 2025-07-07.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>Baidu. <a href="https://apollo.baidu.com/docs/apollo/9.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE6_xBA_x90_xE7_xA0_x81_xE5_xAE_x89_c6622abe953930b2197ae66df0a51dcd.html#autotoc_md57">æºç å®‰è£…æ–¹å¼</a>. 2023. <a href="https://web.archive.org/web/20250716213629/https://apollo.baidu.com/docs/apollo/9.x/md_docs_2_xE5_xAE_x89_xE8_xA3_x85_xE6_x8C_x87_xE5_x8D_x97_2_xE6_xBA_x90_xE7_xA0_x81_xE5_xAE_x89_c6622abe953930b2197ae66df0a51dcd.html">Archived</a> on 2025-07-16. Retrieved 2025-07-16.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è‡ªåŠ¨é©¾é©¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Apollo</tag>
      
      <tag>è‡ªåŠ¨é©¾é©¶</tag>
      
      <tag>æ•™ç¨‹</tag>
      
      <tag>Ubuntu</tag>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Setup xv6-riscv Development Environment</title>
    <link href="/en/2024/10/4ffcfc636790/"/>
    <url>/en/2024/10/4ffcfc636790/</url>
    
    <content type="html"><![CDATA[<blockquote><p>This article introduces how to set up the development environment of xv6-riscv.</p></blockquote><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>xv6 is a re-implementation of Dennis Ritchieâ€™s and Ken Thompsonâ€™s Unix Version 6 (v6). The main purpose of xv6 is as a teaching operating system for MITâ€™s 6.1810<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="mit-pdos. [xv6-riscv](https://github.com/mit-pdos/xv6-riscv). [Archived](https://web.archive.org/web/20240723225448/https://github.com/mit-pdos/xv6-riscv) on 2024-07-23. Retrieved 2024-10-15.">[1]</span></a></sup>.</p><span id="more"></span><h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><p>The system environment I use:</p><ul><li>Ubuntu 24.04.1 LTS</li></ul><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>We need to install related cross-compilation tools, as well as QEMU to simulate the RISC-V chip. The following commands are modified from <a href="https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def">mmikaitis&#x2F;xv6-tools-container&#x2F;xv6-tools-container.def</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[xv6-tools-container.def](https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def). 2024-09-07. [Archived](https://web.archive.org/web/20241106175013/https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def) on 2024-10-06. Retrieved 2024-10-15.">[2]</span></a></sup>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update<br>sudo apt install -y build-essential gcc-riscv64-linux-gnu qemu-system-riscv64 gdb-multiarch<br></code></pre></td></tr></table></figure><h2 id="Download-xv6-riscv"><a href="#Download-xv6-riscv" class="headerlink" title="Download xv6-riscv"></a>Download xv6-riscv</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> git@github.com:mit-pdos/xv6-riscv.git<br><span class="hljs-built_in">cd</span> xv6-riscv<br></code></pre></td></tr></table></figure><h2 id="Compile-and-Run"><a href="#Compile-and-Run" class="headerlink" title="Compile and Run"></a>Compile and Run</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">make<br>make qemu<br></code></pre></td></tr></table></figure><p>Now you can see the following output, which means the compilation and running are successful:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">xv6 kernel is booting<br><br>hart 2 starting<br>hart 1 starting<br>init: starting sh<br>$<br></code></pre></td></tr></table></figure><p>To exit QEMU, you can press <code>Ctrl + A</code>, then press <code>X</code>.</p><h3 id="QEMU-No-Response-After-Startup"><a href="#QEMU-No-Response-After-Startup" class="headerlink" title="QEMU No Response After Startup"></a>QEMU No Response After Startup</h3><p>I encountered the problem of no response after starting <code>make qemu</code> when setting up the environment. Finally, I found this <a href="https://github.com/mit-pdos/xv6-riscv/issues/76">issue</a>. The solution provided by the related <a href="https://github.com/mit-pdos/xv6-riscv/pull/62">PR</a> works.</p><p>After my attempt, update the system and QEMU to the latest version can also solve the problem. I finally used <code>Ubuntu 24.04.1 LTS</code> and <code>QEMU emulator version 8.2.2 (Debian 1:8.2.2+ds-0ubuntu1.2)</code>.</p><p>You may also download and compile the latest version of QEMU<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="rovast. [qemu-system-riscv64 is not found in package qemu-system-misc](https://stackoverflow.com/questions/66718225/qemu-system-riscv64-is-not-found-in-package-qemu-system-misc/71367297#71367297). 2022-03-06. [Archived](https://web.archive.org/web/20241106175028/https://stackoverflow.com/questions/66718225/qemu-system-riscv64-is-not-found-in-package-qemu-system-misc/71367297#71367297) on 2024-10-06. Retrieved 2024-10-24.">[3]</span></a></sup>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://download.qemu.org/qemu-8.2.2.tar.xz<br>tar -xf qemu-8.2.2.tar.xz<br><span class="hljs-built_in">cd</span> qemu-8.2.2<br>./configure --disable-kvm --disable-werror --prefix=/usr/local --target-list=<span class="hljs-string">&quot;riscv64-softmmu&quot;</span><br>make<br>sudo make install<br><span class="hljs-built_in">cd</span> ..<br></code></pre></td></tr></table></figure><p>When compiling QEMU, you may need to <a href="https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages">install Ninja</a><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="Oleksii Chernykh. [Pre built Ninja packages](https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages). 2024-04-09. [Archived](https://web.archive.org/web/20241106175035/https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages) on 2024-10-06. Retrieved 2024-10-24.">[4]</span></a></sup>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install ninja-build<br></code></pre></td></tr></table></figure><h2 id="IDE-Remote-Development"><a href="#IDE-Remote-Development" class="headerlink" title="IDE Remote Development"></a>IDE Remote Development</h2><p>The project is located on a remote Linux server. If we want to develop using a powerful IDE locally instead of using vim and other text editors on the server, we can use Clion to connect to the server via SSH for development.</p><p><img src="https://picture.zhanganzhi.com/2024/10/15/ovjbnz2.png" alt="Create SSH Connectio in Clion"></p><p><img src="https://picture.zhanganzhi.com/2024/10/15/n5slrkz.png" alt="Select Project Path and IDE Version"></p><p>After the connection is established, you can develop as if you were working on a local project. Run <code>make qemu</code> in the terminal to run xv6-riscv.</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/2cbx4z9.png" alt="IDE Interface"></p><h3 id="Code-Analysis"><a href="#Code-Analysis" class="headerlink" title="Code Analysis"></a>Code Analysis</h3><p>For some strange historical reason, Clion does not recognize the file structure of Makefile projects well. At first it says â€œThis file does not belong to any project targetâ€, and after marking the directory as â€œProject Sources and Headersâ€, it still fails to find the correct header file.</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/al5w8un.png" alt="This file does not belong to any project target"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/9b9edvl.png" alt="Mark Directory as Project Sources and Headers"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/1omhlhq.png" alt="Cannot find directory in search paths"></p><p>To solve this problem, we just need to create a <code>CMakeLists.txt</code> file to trick the IDE into recognizing the file structure of the project.</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.24</span>)<br><span class="hljs-keyword">project</span>(xv6 C)<br><br><span class="hljs-keyword">set</span>(CMAKE_C_STANDARD <span class="hljs-number">99</span>)<br><br><span class="hljs-keyword">include_directories</span>(.)<br><br><span class="hljs-keyword">add_executable</span>(xv6<br>        kernel<br>        mkfs<br>        user<br>        kernel/main.c<br>)<br></code></pre></td></tr></table></figure><p>Please note <code>include_directories(.)</code>, which is used to <a href="https://cmake.org/cmake/help/latest/command/include_directories.html">add the given directories to those the compiler uses to search for include files</a>.</p><p>Close Clion and delete the <code>.idea</code> directory, then reopen the project and select â€œOpen as CMake Projectâ€:</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/s09ybkx.png" alt="Select Open as CMake Project"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/g5vz04p.png" alt="Now you can use the code analysis feature of the IDE normally"></p><h3 id="Remote-Debug"><a href="#Remote-Debug" class="headerlink" title="Remote Debug"></a>Remote Debug</h3><p>First, map GDB port to the local machine, and add a remote debug configuration:</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/a6stfa5.png" alt="Check Port Number"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/2qb9vyl.png" alt="Remote Debug Configuration"></p><p>Then run</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make qemu-gdb<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2024/10/17/doxgv1p.png" alt="make qemu-gdb"></p><p>After starting, it will wait, run the remote debug just added, and the program will stop at the breakpoint:</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/2dmivm9.png" alt="Program stops at the breakpoint"></p><p>If you need to debug user programs instead of the kernel, add another remote debug:</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/2f62iu2.png" alt="User Program Debugging"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/ejteonx.png" alt="User Program Breakpoint"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>mit-pdos. <a href="https://github.com/mit-pdos/xv6-riscv">xv6-riscv</a>. <a href="https://web.archive.org/web/20240723225448/https://github.com/mit-pdos/xv6-riscv">Archived</a> on 2024-07-23. Retrieved 2024-10-15.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def">xv6-tools-container.def</a>. 2024-09-07. <a href="https://web.archive.org/web/20241106175013/https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def">Archived</a> on 2024-10-06. Retrieved 2024-10-15.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>rovast. <a href="https://stackoverflow.com/questions/66718225/qemu-system-riscv64-is-not-found-in-package-qemu-system-misc/71367297#71367297">qemu-system-riscv64 is not found in package qemu-system-misc</a>. 2022-03-06. <a href="https://web.archive.org/web/20241106175028/https://stackoverflow.com/questions/66718225/qemu-system-riscv64-is-not-found-in-package-qemu-system-misc/71367297#71367297">Archived</a> on 2024-10-06. Retrieved 2024-10-24.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>Oleksii Chernykh. <a href="https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages">Pre built Ninja packages</a>. 2024-04-09. <a href="https://web.archive.org/web/20241106175035/https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages">Archived</a> on 2024-10-06. Retrieved 2024-10-24.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>Zhang Yuxuan. <a href="https://kingofdark.top/2022/03/19/2022-03/2022-03-19%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97-xv6%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/">ã€99%ç¯å¢ƒæ­å»ºç³»åˆ—ã€‘xv6-riscvå†…æ ¸è°ƒè¯•æ•™ç¨‹</a>. 2022-03-19. <a href="https://web.archive.org/web/20241106175422/https://kingofdark.top/2022/03/19/2022-03/2022-03-19%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97-xv6%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/">Archived</a> on 2024-10-06. Retrieved 2024-10-15.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>é’Ÿä¸‡ç¥¥. <a href="https://shawnzhong.com/2019/02/16/xv6-remote-debug-using-clion/">xv6 Remote Debug using CLion</a>. 2019-02-16. <a href="https://web.archive.org/web/20241106175352/https://shawnzhong.com/2019/02/16/xv6-remote-debug-using-clion/">Archived</a> on 2024-10-06. Retrieved 2024-10-17.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GitHub</tag>
      
      <tag>C++</tag>
      
      <tag>æ±‡ç¼–</tag>
      
      <tag>C</tag>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
      <tag>xv6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>xv6-riscv å¼€å‘ç¯å¢ƒæ­å»º</title>
    <link href="/zh-CN/2024/10/4036f0443a57/"/>
    <url>/zh-CN/2024/10/4036f0443a57/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä»‹ç»å¦‚ä½•æ­å»º xv6-riscv çš„å¼€å‘ç¯å¢ƒã€‚</p></blockquote><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>xv6 æ˜¯ Dennis Ritchie å’Œ Ken Thompson çš„ Unix Version 6 (v6) çš„é‡æ–°å®ç°ã€‚xv6 çš„ä¸»è¦ç›®çš„æ˜¯ä½œä¸º MIT 6.1810 çš„æ•™å­¦æ“ä½œç³»ç»Ÿ<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="mit-pdos. [xv6-riscv](https://github.com/mit-pdos/xv6-riscv). [Archived](https://web.archive.org/web/20240723225448/https://github.com/mit-pdos/xv6-riscv) on 2024-07-23. Retrieved 2024-10-15.">[1]</span></a></sup>ã€‚</p><span id="more"></span><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æˆ‘ä½¿ç”¨çš„ç³»ç»Ÿç¯å¢ƒï¼š</p><ul><li>Ubuntu 24.04.1 LTS</li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æˆ‘ä»¬éœ€è¦å®‰è£…ç›¸å…³äº¤å‰ç¼–è¯‘å·¥å…·ï¼Œä»¥åŠ QEMU ä»¥æ¨¡æ‹Ÿ RISC-V èŠ¯ç‰‡ã€‚ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹è‡ª <a href="https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def">mmikaitis&#x2F;xv6-tools-container&#x2F;xv6-tools-container.def</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[xv6-tools-container.def](https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def). 2024-09-07. [Archived](https://web.archive.org/web/20241106175013/https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def) on 2024-10-06. Retrieved 2024-10-15.">[2]</span></a></sup>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update<br>sudo apt install -y build-essential gcc-riscv64-linux-gnu qemu-system-riscv64 gdb-multiarch<br></code></pre></td></tr></table></figure><h2 id="ä¸‹è½½-xv6-riscv"><a href="#ä¸‹è½½-xv6-riscv" class="headerlink" title="ä¸‹è½½ xv6-riscv"></a>ä¸‹è½½ xv6-riscv</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> git@github.com:mit-pdos/xv6-riscv.git<br><span class="hljs-built_in">cd</span> xv6-riscv<br></code></pre></td></tr></table></figure><h2 id="ç¼–è¯‘å’Œè¿è¡Œ"><a href="#ç¼–è¯‘å’Œè¿è¡Œ" class="headerlink" title="ç¼–è¯‘å’Œè¿è¡Œ"></a>ç¼–è¯‘å’Œè¿è¡Œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">make<br>make qemu<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼Œè¯´æ˜ç¼–è¯‘å’Œè¿è¡ŒæˆåŠŸï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">xv6 kernel is booting<br><br>hart 2 starting<br>hart 1 starting<br>init: starting sh<br>$<br></code></pre></td></tr></table></figure><p>è¦é€€å‡º QEMUï¼Œå¯ä»¥æŒ‰ä¸‹ <code>Ctrl + A</code>ï¼Œç„¶åæŒ‰ä¸‹ <code>X</code>ã€‚</p><h3 id="QEMU-å¯åŠ¨åæ— å“åº”"><a href="#QEMU-å¯åŠ¨åæ— å“åº”" class="headerlink" title="QEMU å¯åŠ¨åæ— å“åº”"></a>QEMU å¯åŠ¨åæ— å“åº”</h3><p>æˆ‘åœ¨æ­å»ºç¯å¢ƒçš„æ—¶å€™é‡åˆ°äº† <code>make qemu</code> å¯åŠ¨åæ— å“åº”çš„é—®é¢˜ï¼Œæœ€ç»ˆæŸ¥æ‰¾åˆ°äº†è¿™ä¸ª <a href="https://github.com/mit-pdos/xv6-riscv/issues/76">issue</a>ï¼Œç›¸å…³çš„ <a href="https://github.com/mit-pdos/xv6-riscv/pull/62">PR</a> æä¾›çš„è§£å†³æ–¹æ¡ˆæ˜¯å¯ç”¨çš„ã€‚</p><p>ç»è¿‡æˆ‘çš„å°è¯•ï¼Œå°†ç³»ç»Ÿå’Œ QEMU æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ä¹Ÿå¯ä»¥è§£å†³é—®é¢˜ã€‚æˆ‘æœ€ç»ˆä½¿ç”¨çš„æ˜¯ <code>Ubuntu 24.04.1 LTS</code> å’Œ <code>QEMU emulator version 8.2.2 (Debian 1:8.2.2+ds-0ubuntu1.2)</code>ã€‚</p><p>ä¹Ÿå¯ä»¥ä¸‹è½½ç¼–è¯‘å®‰è£…æ–°ç‰ˆ QEMU<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="rovast. [qemu-system-riscv64 is not found in package qemu-system-misc](https://stackoverflow.com/questions/66718225/qemu-system-riscv64-is-not-found-in-package-qemu-system-misc/71367297#71367297). 2022-03-06. [Archived](https://web.archive.org/web/20241106175028/https://stackoverflow.com/questions/66718225/qemu-system-riscv64-is-not-found-in-package-qemu-system-misc/71367297#71367297) on 2024-10-06. Retrieved 2024-10-24.">[3]</span></a></sup>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://download.qemu.org/qemu-8.2.2.tar.xz<br>tar -xf qemu-8.2.2.tar.xz<br><span class="hljs-built_in">cd</span> qemu-8.2.2<br>./configure --disable-kvm --disable-werror --prefix=/usr/local --target-list=<span class="hljs-string">&quot;riscv64-softmmu&quot;</span><br>make<br>sudo make install<br><span class="hljs-built_in">cd</span> ..<br></code></pre></td></tr></table></figure><p>åœ¨ç¼–è¯‘ QEMU æ—¶ï¼Œå¯èƒ½éœ€è¦<a href="https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages">å®‰è£… Ninja</a><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="Oleksii Chernykh. [Pre built Ninja packages](https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages). 2024-04-09. [Archived](https://web.archive.org/web/20241106175035/https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages) on 2024-10-06. Retrieved 2024-10-24.">[4]</span></a></sup>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install ninja-build<br></code></pre></td></tr></table></figure><h2 id="IDE-è¿œç¨‹å¼€å‘"><a href="#IDE-è¿œç¨‹å¼€å‘" class="headerlink" title="IDE è¿œç¨‹å¼€å‘"></a>IDE è¿œç¨‹å¼€å‘</h2><p>é¡¹ç›®ä½äºè¿œç¨‹ Linux æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨æœ¬åœ°ä½¿ç”¨ä¸€ä¸ªå¼ºå¤§çš„ IDE è¿›è¡Œå¼€å‘ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨ä½¿ç”¨ vim ç­‰æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¯ä»¥ä½¿ç”¨ Clion é€šè¿‡ SSH è¿æ¥åˆ°æœåŠ¡å™¨è¿›è¡Œå¼€å‘ã€‚</p><p><img src="https://picture.zhanganzhi.com/2024/10/15/ovjbnz2.png" alt="åœ¨ Clion ä¸­åˆ›å»º SSH è¿æ¥"></p><p><img src="https://picture.zhanganzhi.com/2024/10/15/n5slrkz.png" alt="é€‰æ‹©é¡¹ç›®è·¯å¾„å’Œ IDE ç‰ˆæœ¬"></p><p>è¿æ¥åå³å¯å’Œæœ¬åœ°é¡¹ç›®ä¸€æ ·è¿›è¡Œå¼€å‘ï¼Œåœ¨ terminal ä¸­æ‰§è¡Œ <code>make qemu</code> å³å¯è¿è¡Œ xv6-riscvã€‚</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/2cbx4z9.png" alt="IDE ç•Œé¢"></p><h3 id="ä»£ç åˆ†æ"><a href="#ä»£ç åˆ†æ" class="headerlink" title="ä»£ç åˆ†æ"></a>ä»£ç åˆ†æ</h3><p>ç”±äº Clion ä¸€äº›å¥‡æ€ªçš„å†å²åŸå› ï¼Œæ— æ³•è‰¯å¥½åœ°è¯†åˆ« Makefile é¡¹ç›®çš„æ–‡ä»¶ç»“æ„ã€‚ä¸€å¼€å§‹ä¼šæ˜¾ç¤º â€œThis file does not belong to any project targetâ€ï¼Œåœ¨æ ‡è®°ç›®å½•ä¸º â€œProject Sources and Headersâ€ ä¹‹åï¼Œä¾ç„¶æ— æ³•æ‰¾åˆ°æ­£ç¡®çš„å¤´æ–‡ä»¶ã€‚</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/al5w8un.png" alt="This file does not belong to any project target"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/9b9edvl.png" alt="Mark Directory as Project Sources and Headers"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/1omhlhq.png" alt="Cannot find directory in search paths"></p><p>è¦è§£å†³è¯¥é—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ª <code>CMakeLists.txt</code> æ–‡ä»¶ï¼Œéª—è¿‡ IDEï¼Œä½¿å…¶è¯†åˆ«é¡¹ç›®çš„æ–‡ä»¶ç»“æ„ã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.24</span>)<br><span class="hljs-keyword">project</span>(xv6 C)<br><br><span class="hljs-keyword">set</span>(CMAKE_C_STANDARD <span class="hljs-number">99</span>)<br><br><span class="hljs-keyword">include_directories</span>(.)<br><br><span class="hljs-keyword">add_executable</span>(xv6<br>        kernel<br>        mkfs<br>        user<br>        kernel/main.c<br>)<br></code></pre></td></tr></table></figure><p>è¯·æ³¨æ„ <code>include_directories(.)</code> ï¼Œç”¨äº<a href="https://cmake.org/cmake/help/latest/command/include_directories.html">å°†æŒ‡å®šç›®å½•æ·»åŠ åˆ°ç¼–è¯‘å™¨ç”¨äºæœç´¢åŒ…å«æ–‡ä»¶çš„ç›®å½•ä¸­</a>ã€‚</p><p>å…³é—­ Clion å¹¶åˆ é™¤ <code>.idea</code> ç›®å½•ï¼Œç„¶åé‡æ–°æ‰“å¼€é¡¹ç›®ï¼Œé€‰æ‹© â€œOpen as CMake Projectâ€ï¼š</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/s09ybkx.png" alt="é€‰æ‹© Open as CMake Project"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/g5vz04p.png" alt="ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨ IDE çš„ä»£ç åˆ†æåŠŸèƒ½äº†"></p><h3 id="è¿œç¨‹è°ƒè¯•"><a href="#è¿œç¨‹è°ƒè¯•" class="headerlink" title="è¿œç¨‹è°ƒè¯•"></a>è¿œç¨‹è°ƒè¯•</h3><p>é¦–å…ˆå°† GDB ç«¯å£æ˜ å°„åˆ°æœ¬åœ°ï¼Œæ·»åŠ è¿œç¨‹è°ƒè¯•é…ç½®ï¼š</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/a6stfa5.png" alt="æŸ¥çœ‹ç«¯å£å·"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/2qb9vyl.png" alt="è¿œç¨‹è°ƒè¯•é…ç½®"></p><p>ç„¶åè¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make qemu-gdb<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2024/10/17/doxgv1p.png" alt="make qemu-gdb"></p><p>å¯åŠ¨åä¼šç­‰å¾…ï¼Œè¿è¡Œåˆšåˆšæ·»åŠ çš„è¿œç¨‹è°ƒè¯•ï¼Œç¨‹åºåœ¨æ–­ç‚¹å¤„åœæ­¢ï¼š</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/2dmivm9.png" alt="ç¨‹åºåœ¨æ–­ç‚¹åœæ­¢"></p><p>å¦‚æœéœ€è¦è°ƒè¯•ç”¨æˆ·ç¨‹åºè€Œä¸æ˜¯å†…æ ¸ï¼Œæ·»åŠ å¦ä¸€ä¸ªè¿œç¨‹è°ƒè¯•ï¼š</p><p><img src="https://picture.zhanganzhi.com/2024/10/17/2f62iu2.png" alt="ç”¨æˆ·ç¨‹åºè°ƒè¯•"></p><p><img src="https://picture.zhanganzhi.com/2024/10/17/ejteonx.png" alt="ç”¨æˆ·ç¨‹åºçš„æ–­ç‚¹"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>mit-pdos. <a href="https://github.com/mit-pdos/xv6-riscv">xv6-riscv</a>. <a href="https://web.archive.org/web/20240723225448/https://github.com/mit-pdos/xv6-riscv">Archived</a> on 2024-07-23. Retrieved 2024-10-15.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def">xv6-tools-container.def</a>. 2024-09-07. <a href="https://web.archive.org/web/20241106175013/https://github.com/mmikaitis/xv6-tools-container/blob/main/xv6-tools-container.def">Archived</a> on 2024-10-06. Retrieved 2024-10-15.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>rovast. <a href="https://stackoverflow.com/questions/66718225/qemu-system-riscv64-is-not-found-in-package-qemu-system-misc/71367297#71367297">qemu-system-riscv64 is not found in package qemu-system-misc</a>. 2022-03-06. <a href="https://web.archive.org/web/20241106175028/https://stackoverflow.com/questions/66718225/qemu-system-riscv64-is-not-found-in-package-qemu-system-misc/71367297#71367297">Archived</a> on 2024-10-06. Retrieved 2024-10-24.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>Oleksii Chernykh. <a href="https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages">Pre built Ninja packages</a>. 2024-04-09. <a href="https://web.archive.org/web/20241106175035/https://github.com/ninja-build/ninja/wiki/Pre-built-Ninja-packages">Archived</a> on 2024-10-06. Retrieved 2024-10-24.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>Zhang Yuxuan. <a href="https://kingofdark.top/2022/03/19/2022-03/2022-03-19%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97-xv6%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/">ã€99%ç¯å¢ƒæ­å»ºç³»åˆ—ã€‘xv6-riscvå†…æ ¸è°ƒè¯•æ•™ç¨‹</a>. 2022-03-19. <a href="https://web.archive.org/web/20241106175422/https://kingofdark.top/2022/03/19/2022-03/2022-03-19%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97-xv6%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/">Archived</a> on 2024-10-06. Retrieved 2024-10-15.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>é’Ÿä¸‡ç¥¥. <a href="https://shawnzhong.com/2019/02/16/xv6-remote-debug-using-clion/">xv6 Remote Debug using CLion</a>. 2019-02-16. <a href="https://web.archive.org/web/20241106175352/https://shawnzhong.com/2019/02/16/xv6-remote-debug-using-clion/">Archived</a> on 2024-10-06. Retrieved 2024-10-17.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GitHub</tag>
      
      <tag>C++</tag>
      
      <tag>æ±‡ç¼–</tag>
      
      <tag>C</tag>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
      <tag>xv6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Using Python to Set GitHub Action Outputs</title>
    <link href="/en/2024/09/a2d3aacb3fc0/"/>
    <url>/en/2024/09/a2d3aacb3fc0/</url>
    
    <content type="html"><![CDATA[<p>The output format of GitHub Action is to write <code>&#123;name&#125;=&#123;value&#125;</code> to the environment variable <code>GITHUB_OUTPUT</code><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Workflow commands for GitHub Actions](https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/workflow-commands-for-github-actions#setting-an-output-parameter). [Archived](https://web.archive.org/web/20240906091637/https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/workflow-commands-for-github-actions#setting-an-output-parameter) on 2024-09-06. Retrieved 2024-09-06.">[1]</span></a></sup><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[GitHub Actions: Deprecating save-state and set-output commands](https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/). [Archived](https://web.archive.org/web/20240906091742/https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/) on 2024-09-06. Retrieved 2024-09-06.">[2]</span></a></sup> This article shares how to set up the GitHub Action output using Python. The main content comes from this <a href="https://github.com/orgs/community/discussions/28146">discussion</a><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[How to set-output from a python script in Github workflow step. #28146](https://github.com/orgs/community/discussions/28146). [Archived](https://web.archive.org/web/20240906085619/https://github.com/orgs/community/discussions/28146) on 2024-09-06. Retrieved 2024-09-06.">[3]</span></a></sup>.</p><h2 id="Singleline"><a href="#Singleline" class="headerlink" title="Singleline"></a>Singleline</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br>name = <span class="hljs-string">&#x27;my_name&#x27;</span><br>value = <span class="hljs-string">&#x27;my_value&#x27;</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.environ[<span class="hljs-string">&#x27;GITHUB_OUTPUT&#x27;</span>], <span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-keyword">as</span> fh:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;name&#125;</span>=<span class="hljs-subst">&#123;value&#125;</span>&#x27;</span>, file=fh)<br></code></pre></td></tr></table></figure><h2 id="Multiline"><a href="#Multiline" class="headerlink" title="Multiline"></a>Multiline</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> uuid<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_multiline_output</span>(<span class="hljs-params">name, value</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.environ[<span class="hljs-string">&#x27;GITHUB_OUTPUT&#x27;</span>], <span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-keyword">as</span> fh:<br>        delimiter = uuid.uuid1()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;name&#125;</span>&lt;&lt;<span class="hljs-subst">&#123;delimiter&#125;</span>&#x27;</span>, file=fh)<br>        <span class="hljs-built_in">print</span>(value, file=fh)<br>        <span class="hljs-built_in">print</span>(delimiter, file=fh)<br></code></pre></td></tr></table></figure><p>Just call it with</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">set_multiline_output(<span class="hljs-string">&quot;value&quot;</span>, my_multiline_string)<br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/workflow-commands-for-github-actions#setting-an-output-parameter">Workflow commands for GitHub Actions</a>. <a href="https://web.archive.org/web/20240906091637/https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/workflow-commands-for-github-actions#setting-an-output-parameter">Archived</a> on 2024-09-06. Retrieved 2024-09-06.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/">GitHub Actions: Deprecating save-state and set-output commands</a>. <a href="https://web.archive.org/web/20240906091742/https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/">Archived</a> on 2024-09-06. Retrieved 2024-09-06.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://github.com/orgs/community/discussions/28146">How to set-output from a python script in Github workflow step. #28146</a>. <a href="https://web.archive.org/web/20240906085619/https://github.com/orgs/community/discussions/28146">Archived</a> on 2024-09-06. Retrieved 2024-09-06.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç»éªŒåˆ†äº«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GitHub</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨ Python è®¾ç½® GitHub Action è¾“å‡º</title>
    <link href="/zh-CN/2024/09/523202aa5e89/"/>
    <url>/zh-CN/2024/09/523202aa5e89/</url>
    
    <content type="html"><![CDATA[<p>GitHub Action çš„è¾“å‡ºæ ¼å¼ä¸ºå°† <code>&#123;name&#125;=&#123;value&#125;</code> å†™åˆ°ç¯å¢ƒå˜é‡ <code>GITHUB_OUTPUT</code><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Workflow commands for GitHub Actions](https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/workflow-commands-for-github-actions#setting-an-output-parameter). [Archived](https://web.archive.org/web/20240906091637/https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/workflow-commands-for-github-actions#setting-an-output-parameter) on 2024-09-06. Retrieved 2024-09-06.">[1]</span></a></sup><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[GitHub Actions: Deprecating save-state and set-output commands](https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/). [Archived](https://web.archive.org/web/20240906091742/https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/) on 2024-09-06. Retrieved 2024-09-06.">[2]</span></a></sup>ï¼Œæœ¬æ–‡åˆ†äº«å¦‚ä½•ä½¿ç”¨ Python è®¾ç½® GitHub Action è¾“å‡ºã€‚ä¸»è¦å†…å®¹æ¥è‡ªäºè¿™ç¯‡<a href="https://github.com/orgs/community/discussions/28146">è®¨è®º</a><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[How to set-output from a python script in Github workflow step. #28146](https://github.com/orgs/community/discussions/28146). [Archived](https://web.archive.org/web/20240906085619/https://github.com/orgs/community/discussions/28146) on 2024-09-06. Retrieved 2024-09-06.">[3]</span></a></sup>ã€‚</p><h2 id="å•è¡Œ"><a href="#å•è¡Œ" class="headerlink" title="å•è¡Œ"></a>å•è¡Œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br>name = <span class="hljs-string">&#x27;my_name&#x27;</span><br>value = <span class="hljs-string">&#x27;my_value&#x27;</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.environ[<span class="hljs-string">&#x27;GITHUB_OUTPUT&#x27;</span>], <span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-keyword">as</span> fh:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;name&#125;</span>=<span class="hljs-subst">&#123;value&#125;</span>&#x27;</span>, file=fh)<br></code></pre></td></tr></table></figure><h2 id="å¤šè¡Œ"><a href="#å¤šè¡Œ" class="headerlink" title="å¤šè¡Œ"></a>å¤šè¡Œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> uuid<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_multiline_output</span>(<span class="hljs-params">name, value</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.environ[<span class="hljs-string">&#x27;GITHUB_OUTPUT&#x27;</span>], <span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-keyword">as</span> fh:<br>        delimiter = uuid.uuid1()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;name&#125;</span>&lt;&lt;<span class="hljs-subst">&#123;delimiter&#125;</span>&#x27;</span>, file=fh)<br>        <span class="hljs-built_in">print</span>(value, file=fh)<br>        <span class="hljs-built_in">print</span>(delimiter, file=fh)<br></code></pre></td></tr></table></figure><p>åªéœ€è¦è°ƒç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">set_multiline_output(<span class="hljs-string">&quot;value&quot;</span>, my_multiline_string)<br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/workflow-commands-for-github-actions#setting-an-output-parameter">Workflow commands for GitHub Actions</a>. <a href="https://web.archive.org/web/20240906091637/https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/workflow-commands-for-github-actions#setting-an-output-parameter">Archived</a> on 2024-09-06. Retrieved 2024-09-06.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/">GitHub Actions: Deprecating save-state and set-output commands</a>. <a href="https://web.archive.org/web/20240906091742/https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/">Archived</a> on 2024-09-06. Retrieved 2024-09-06.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://github.com/orgs/community/discussions/28146">How to set-output from a python script in Github workflow step. #28146</a>. <a href="https://web.archive.org/web/20240906085619/https://github.com/orgs/community/discussions/28146">Archived</a> on 2024-09-06. Retrieved 2024-09-06.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç»éªŒåˆ†äº«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GitHub</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Julia: @inbounds and @propagate_inbounds</title>
    <link href="/en/2024/08/7df2e472657e/"/>
    <url>/en/2024/08/7df2e472657e/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Explore <code>@inbounds</code> and <code>@propagate_inbounds</code> in Julia.</p></blockquote><span id="more"></span><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>I am developing a package recently, which needs to create some custom matrices. When designing the <code>getindex</code> function, I need to add code to do bounds checking and provide a way to skip bounds checking.</p><p>The <a href="https://docs.julialang.org/en/v1/devdocs/boundscheck/">official documentation</a> discusses this topic in detail, including how to use <code>@inbounds</code> and <code>@propagate_inbounds</code>, but it is quite brief and does not provide example code. This article will demonstrate how to use these two macros and their performance differences.</p><h2 id="inbounds"><a href="#inbounds" class="headerlink" title="@inbounds"></a>@inbounds</h2><p>When we try to access a out-of-bound index, Julia will throw a <code>BoundsError</code> exception, we can use <code>@inbounds</code> to skip the bounds check.</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> g(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;accessing (<span class="hljs-variable">$A</span>)[<span class="hljs-variable">$i</span>]&quot;</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test()<br>    g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># ERROR: BoundsError: attempt to access 2-element UnitRange&#123;Int64&#125; at index [-1]</span><br></code></pre></td></tr></table></figure><p>Add <code>@inbounds</code> when calling <code>g</code> to skip the bounds check.</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-keyword">function</span> test()<br>    <span class="hljs-meta">@inbounds</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># &quot;accessing (1:2)[-1]&quot;</span><br></code></pre></td></tr></table></figure><h2 id="Multple-layers-check-propagate-inbounds"><a href="#Multple-layers-check-propagate-inbounds" class="headerlink" title="Multple layers check: @propagate_inbounds"></a>Multple layers check: @propagate_inbounds</h2><h3 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h3><p>If a function has multiple layers of bounds checking, the outermost <code>@inbounds</code> can only skip the outermost bounds checking, and the inner bounds checking will still be executed.</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> f(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test()<br>    <span class="hljs-meta">@inbounds</span> f(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># ERROR: BoundsError: attempt to access 2-element UnitRange&#123;Int64&#125; at index [-1]</span><br></code></pre></td></tr></table></figure><h3 id="Classic-Solution"><a href="#Classic-Solution" class="headerlink" title="Classic Solution"></a>Classic Solution</h3><p>Update the <code>f</code> function, add <code>@inbounds</code> in each function call to skip the bounds check.</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> f(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-meta">@inbounds</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># &quot;accessing (1:2)[-1]&quot;</span><br></code></pre></td></tr></table></figure><p>In Julia official library LinearAlgebra.jl, <code>@inbounds</code> is widely used, for example, the <a href="https://github.com/JuliaLang/julia/blob/647753071a1e2ddbddf7ab07f55d7146238b6b72/stdlib/LinearAlgebra/src/tridiag.jl#L696-L707">Tridiagonal</a> matrix:</p><p><img src="https://picture.zhanganzhi.com/2024/08/26/aoyvxfi.png" alt="The solution used in the official library"></p><h3 id="propagate-inbounds"><a href="#propagate-inbounds" class="headerlink" title="@propagate_inbounds"></a>@propagate_inbounds</h3><p><code>@propagate_inbounds</code> can help us solve the problem of needing to add <code>@inbounds</code> to each function call in multiple layers of calls. It can be used to propagate the context of bounds checking, allowing us to skip bounds checking in multiple layers of function calls.</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> g(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;accessing (<span class="hljs-variable">$A</span>)[<span class="hljs-variable">$i</span>]&quot;</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-meta">@inline</span> Base.<span class="hljs-meta">@propagate_inbounds</span> <span class="hljs-keyword">function</span> f(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test()<br>    <span class="hljs-meta">@inbounds</span> f(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># &quot;accessing (1:2)[-1]&quot;</span><br></code></pre></td></tr></table></figure><p>Therefor, <code>f</code> can pass the information of skipping bounds checking to <code>g</code>, as long as <code>@inbounds</code> is added when calling <code>f</code>, the inner bounds checking can be skipped.</p><p>It should be noted that <code>@propagate_inbounds</code> will not be propagated indefinitely. If the <code>g</code> function calls other functions with bounds checking, <code>@propagate_inbounds</code> or <code>@inbounds</code> should be used.</p><h2 id="Performance-Differences"><a href="#Performance-Differences" class="headerlink" title="Performance Differences"></a>Performance Differences</h2><p>Next, we will test the performance differences between <code>@inbounds</code> and <code>@propagate_inbounds</code>. The test code is as follows, <code>f1</code> uses <code>@inbounds</code>, <code>f2</code> uses <code>@propagate_inbounds</code>.</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-keyword">using</span> BenchmarkTools<br><br><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> f1(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-meta">@inbounds</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-meta">@inline</span> Base.<span class="hljs-meta">@propagate_inbounds</span> <span class="hljs-keyword">function</span> f2(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> g(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;g: accessing (<span class="hljs-variable">$A</span>)[<span class="hljs-variable">$i</span>]&quot;</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test_f1()<br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>:<span class="hljs-number">100000</span><br>        <span class="hljs-meta">@inbounds</span> f1(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test_f2()<br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>:<span class="hljs-number">100000</span><br>        <span class="hljs-meta">@inbounds</span> f2(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> main()<br>    <span class="hljs-meta">@inbounds</span> f1(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br>    <span class="hljs-meta">@inbounds</span> f2(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><br>    t1 = <span class="hljs-meta">@benchmark</span> test_f1()<br>    t2 = <span class="hljs-meta">@benchmark</span> test_f2()<br>    display(t1)<br>    display(t2)<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>We can say that there is no performance difference between the two.</p><p><img src="https://picture.zhanganzhi.com/2024/08/26/z3j0lje.png" alt="Test results"></p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p><code>@inbounds</code> can skip the bounds check of a single layer of function calls, which can be used when calling the outermost function, helping to improve performance, but also have pay attention to the security of access.</p><p><code>@propagate_inbounds</code> can skip the bounds check of multiple layers of function calls, which is suitable for the development of packages. This macro can provide better code cleanliness, avoiding the trouble of adding <code>@inbounds</code> to each layer of function calls.</p><p>Comprehensively, there is no performance difference between the two, and using <code>@propagate_inbounds</code> is a better choice when developing packages.</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Julia</tag>
      
      <tag>æ€§èƒ½</tag>
      
      <tag>Performance</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Julia: @inbounds å’Œ @propagate_inbounds</title>
    <link href="/zh-CN/2024/08/7df2e472657e/"/>
    <url>/zh-CN/2024/08/7df2e472657e/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ¢ç©¶ Julia çš„ <code>@inbounds</code> å’Œ <code>@propagate_inbounds</code>ã€‚</p></blockquote><span id="more"></span><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>è¿‘æœŸåœ¨å¼€å‘ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œéœ€è¦åˆ›å»ºä¸€äº›è‡ªå®šä¹‰çŸ©é˜µï¼Œåœ¨è®¾è®¡ <code>getindex</code> æ–¹æ³•æ—¶ï¼Œéœ€è¦åŠ å…¥æ£€æŸ¥ç´¢å¼•è¾¹ç•Œçš„ä»£ç ï¼Œå¹¶ä¸”æä¾›è·³è¿‡è¾¹ç•Œæ£€æŸ¥çš„æ–¹å¼ã€‚</p><p><a href="https://docs.julialang.org/en/v1/devdocs/boundscheck/">å®˜æ–¹æ–‡æ¡£</a> è¯¦ç»†è®¨è®ºäº†è¿™ä¸ªä¸»é¢˜ï¼ŒåŒ…æ‹¬ <code>@inbounds</code> å’Œ <code>@propagate_inbounds</code> çš„ä½¿ç”¨æ–¹å¼ï¼Œä½†æ˜¯è¾ƒä¸ºç®€ç•¥ï¼Œä¸”æ²¡æœ‰æä¾›ç¤ºä¾‹ä»£ç ï¼Œä¸‹æ–‡å°†æ¼”ç¤ºè¿™ä¸¤ä¸ªå®çš„ä½¿ç”¨æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬çš„æ€§èƒ½å·®å¼‚ã€‚</p><h2 id="inbounds"><a href="#inbounds" class="headerlink" title="@inbounds"></a>@inbounds</h2><p>å½“æˆ‘ä»¬å°è¯•è®¿é—®ä¸å­˜åœ¨çš„ç´¢å¼•æ—¶ï¼ŒJulia ä¼šæŠ›å‡º <code>BoundsError</code> å¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>@inbounds</code> æ¥è·³è¿‡è¾¹ç•Œæ£€æŸ¥ã€‚</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> g(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;accessing (<span class="hljs-variable">$A</span>)[<span class="hljs-variable">$i</span>]&quot;</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test()<br>    g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># ERROR: BoundsError: attempt to access 2-element UnitRange&#123;Int64&#125; at index [-1]</span><br></code></pre></td></tr></table></figure><p>åªéœ€è¦åœ¨è°ƒç”¨ <code>g</code> æ—¶åŠ å…¥ <code>@inbounds</code> å³å¯è·³è¿‡è¾¹ç•Œæ£€æŸ¥ã€‚</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-keyword">function</span> test()<br>    <span class="hljs-meta">@inbounds</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># &quot;accessing (1:2)[-1]&quot;</span><br></code></pre></td></tr></table></figure><h2 id="å¤šå±‚æ£€æŸ¥ï¼š-propagate-inbounds"><a href="#å¤šå±‚æ£€æŸ¥ï¼š-propagate-inbounds" class="headerlink" title="å¤šå±‚æ£€æŸ¥ï¼š@propagate_inbounds"></a>å¤šå±‚æ£€æŸ¥ï¼š@propagate_inbounds</h2><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>å¦‚æœå‡½æ•°æœ‰å¤šå±‚çš„è¾¹ç•Œæ£€æŸ¥ï¼Œæœ€å¤–å±‚çš„ <code>@inbounds</code> åªèƒ½è·³è¿‡æœ€å¤–å±‚çš„è¾¹ç•Œæ£€æŸ¥ï¼Œå†…å±‚çš„è¾¹ç•Œæ£€æŸ¥ä»ç„¶ä¼šè¢«æ‰§è¡Œã€‚</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> f(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test()<br>    <span class="hljs-meta">@inbounds</span> f(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># ERROR: BoundsError: attempt to access 2-element UnitRange&#123;Int64&#125; at index [-1]</span><br></code></pre></td></tr></table></figure><h3 id="ç»å…¸è§£å†³æ–¹æ¡ˆ"><a href="#ç»å…¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ç»å…¸è§£å†³æ–¹æ¡ˆ"></a>ç»å…¸è§£å†³æ–¹æ¡ˆ</h3><p>ä¿®æ”¹ <code>f</code> å‡½æ•°ï¼Œåœ¨æ¯ä¸€å±‚å‡½æ•°è°ƒç”¨ï¼ŒåŠ å…¥ <code>@inbounds</code>ï¼Œå¯ä»¥è·³è¿‡è¾¹ç•Œæ£€æŸ¥ã€‚</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> f(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-meta">@inbounds</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># &quot;accessing (1:2)[-1]&quot;</span><br></code></pre></td></tr></table></figure><p>åœ¨ Julia å®˜æ–¹åº“ LinearAlgebra.jl ä¸­ï¼Œå¹¿æ³›ä½¿ç”¨äº† <code>@inbounds</code>ï¼Œä¾‹å¦‚ <a href="https://github.com/JuliaLang/julia/blob/647753071a1e2ddbddf7ab07f55d7146238b6b72/stdlib/LinearAlgebra/src/tridiag.jl#L696-L707">Tridiagonal</a> çŸ©é˜µï¼š</p><p><img src="https://picture.zhanganzhi.com/2024/08/26/aoyvxfi.png" alt="å®˜æ–¹åº“ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆ"></p><h3 id="propagate-inbounds"><a href="#propagate-inbounds" class="headerlink" title="@propagate_inbounds"></a>@propagate_inbounds</h3><p><code>@propagate_inbounds</code> å¯ä»¥å¸®æˆ‘ä»¬è§£å†³åœ¨å¤šå±‚è°ƒç”¨æ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸€å±‚å‡½æ•°è°ƒç”¨åŠ å…¥ <code>@inbounds</code> çš„é—®é¢˜ã€‚å®ƒå¯ä»¥ç”¨æ¥ä¼ æ’­è¾¹ç•Œæ£€æŸ¥çš„ä¸Šä¸‹æ–‡ï¼Œå…è®¸æˆ‘ä»¬åœ¨å¤šå±‚å‡½æ•°è°ƒç”¨æ—¶è·³è¿‡è¾¹ç•Œæ£€æŸ¥ã€‚</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> g(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;accessing (<span class="hljs-variable">$A</span>)[<span class="hljs-variable">$i</span>]&quot;</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-meta">@inline</span> Base.<span class="hljs-meta">@propagate_inbounds</span> <span class="hljs-keyword">function</span> f(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test()<br>    <span class="hljs-meta">@inbounds</span> f(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br>test() <span class="hljs-comment"># &quot;accessing (1:2)[-1]&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œ <code>f</code> å°±å¯ä»¥æŠŠè¾¹ç•Œæ£€æŸ¥çš„å¿½ç•¥ä¿¡æ¯ä¼ é€’ç»™ <code>g</code>ï¼Œåªè¦è°ƒç”¨ <code>f</code> æ—¶åŠ ä¸Š <code>@inbounds</code>ï¼Œå°±å¯ä»¥è·³è¿‡å†…éƒ¨çš„è¾¹ç•Œæ£€æŸ¥ã€‚</p><p>éœ€è¦æ³¨æ„ <code>@propagate_inbounds</code> å¹¶ä¸ä¼šæ— é™ä¼ é€’ä¸‹å»ï¼Œå¦‚æœ <code>g</code> å‡½æ•°å†…éƒ¨è°ƒç”¨äº†å…¶ä»–æœ‰è¾¹ç•Œæ£€æŸ¥çš„å‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨ <code>@propagate_inbounds</code> æˆ– <code>@inbounds</code>ã€‚</p><h2 id="æ€§èƒ½å·®å¼‚"><a href="#æ€§èƒ½å·®å¼‚" class="headerlink" title="æ€§èƒ½å·®å¼‚"></a>æ€§èƒ½å·®å¼‚</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯• <code>@inbounds</code> å’Œ <code>@propagate_inbounds</code> çš„æ€§èƒ½å·®å¼‚ï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼Œ<code>f1</code> ä½¿ç”¨ <code>@inbounds</code>ï¼Œ<code>f2</code> ä½¿ç”¨ <code>@propagate_inbounds</code>ã€‚</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-keyword">using</span> BenchmarkTools<br><br><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> f1(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-meta">@inbounds</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-meta">@inline</span> Base.<span class="hljs-meta">@propagate_inbounds</span> <span class="hljs-keyword">function</span> f2(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> g(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-meta">@inline</span> <span class="hljs-keyword">function</span> g(A, i)<br>    <span class="hljs-meta">@boundscheck</span> checkbounds(A, i)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;g: accessing (<span class="hljs-variable">$A</span>)[<span class="hljs-variable">$i</span>]&quot;</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test_f1()<br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>:<span class="hljs-number">100000</span><br>        <span class="hljs-meta">@inbounds</span> f1(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> test_f2()<br>    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>:<span class="hljs-number">100000</span><br>        <span class="hljs-meta">@inbounds</span> f2(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">function</span> main()<br>    <span class="hljs-meta">@inbounds</span> f1(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br>    <span class="hljs-meta">@inbounds</span> f2(<span class="hljs-number">1</span>:<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)<br><br>    t1 = <span class="hljs-meta">@benchmark</span> test_f1()<br>    t2 = <span class="hljs-meta">@benchmark</span> test_f2()<br>    display(t1)<br>    display(t2)<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥è®¤ä¸ºä¸¤è€…æ²¡æœ‰æ€§èƒ½å·®å¼‚ã€‚</p><p><img src="https://picture.zhanganzhi.com/2024/08/26/z3j0lje.png" alt="æµ‹è¯•ç»“æœ"></p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p><code>@inbounds</code> å¯ä»¥è·³è¿‡å•å±‚å‡½æ•°è°ƒç”¨çš„è¾¹ç•Œæ£€æŸ¥ï¼Œåœ¨æœ€å¤–è°ƒç”¨å‡½æ•°çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ï¼Œæœ‰åŠ©äºæé«˜æ€§èƒ½ï¼Œä½†ä¹Ÿè¦æ³¨æ„è®¿é—®çš„å®‰å…¨æ€§ã€‚</p><p><code>@propagate_inbounds</code> å¯ä»¥è·³è¿‡å¤šå±‚å‡½æ•°è°ƒç”¨çš„è¾¹ç•Œæ£€æŸ¥ï¼Œé€‚ç”¨äºå¤šå±‚å‡½æ•°è°ƒç”¨çš„åœºæ™¯ï¼Œä¾‹å¦‚å¼€å‘è½¯ä»¶åŒ…ã€‚è¿™ä¸ªå®èƒ½å¤Ÿæä¾›æ›´å¥½çš„ä»£ç æ•´æ´æ€§ï¼Œé¿å…äº†åœ¨æ¯ä¸€å±‚å‡½æ•°è°ƒç”¨éƒ½åŠ å…¥ <code>@inbounds</code> çš„éº»çƒ¦ã€‚</p><p>ç»¼åˆæ¥çœ‹ï¼Œä¸¤è€…å¹¶æ²¡æœ‰æ€§èƒ½å·®å¼‚ï¼Œåœ¨å¼€å‘è½¯ä»¶åŒ…æ—¶ä½¿ç”¨ <code>@propagate_inbounds</code> æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Julia</tag>
      
      <tag>æ€§èƒ½</tag>
      
      <tag>Performance</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ—¢è¦åŠªåŠ›å¼€æ‹“ï¼Œåˆè¦ååˆ†ç¨³å¦¥</title>
    <link href="/zh-CN/2024/08/47c63fa40df1/"/>
    <url>/zh-CN/2024/08/47c63fa40df1/</url>
    
    <content type="html"><![CDATA[<p>å¾ˆå–œæ¬¢çš„ä¸€å¥è¯ï¼Œåˆ†äº«ä¸€ä¸‹ã€‚</p><div class="note note-info">            <p>æ—¢è¦åŠªåŠ›å¼€æ‹“ï¼Œåˆè¦ååˆ†ç¨³å¦¥ã€‚</p>          </div><p><img src="https://picture.zhanganzhi.com/2024/08/14/b58u9sn.png" alt="æ¥è‡ªç¯çƒæ—¶æŠ¥åŠå…¬æ¥¼3å±‚"></p>]]></content>
    
    
    <categories>
      
      <category>æ‚è°ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Boot Redis ç¼“å­˜åŠ ObjectMapper é…ç½®</title>
    <link href="/zh-CN/2024/06/c71deb60bb2e/"/>
    <url>/zh-CN/2024/06/c71deb60bb2e/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•ä¸€äº› Redis ç¼“å­˜åŠ ObjectMapper çš„é…ç½®ã€‚</p></blockquote><span id="more"></span><h2 id="Object-Mapper"><a href="#Object-Mapper" class="headerlink" title="Object Mapper"></a>Object Mapper</h2><p>é¦–å…ˆæä¾›ä¸€ä¸ªå…¨å±€çš„ JsonMapper ä½œä¸º jackson çš„ ObjectMapperï¼Œç”¨äºåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><p>é¡ºä¾¿è§£å†³ jsr310 ç›¸å…³çš„æ—¥æœŸåºåˆ—åŒ–é—®é¢˜<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="PhilippS. [Is there a jackson datatype module for JDK8 java.time?](https://stackoverflow.com/questions/21384820/is-there-a-jackson-datatype-module-for-jdk8-java-time/32202201#32202201). 2015-08-25. [Archived](https://web.archive.org/web/20240603104141/https://stackoverflow.com/questions/21384820/is-there-a-jackson-datatype-module-for-jdk8-java-time/32202201#32202201) on 2024-06-03. Retrieved 2024-06-02.">[1]</span></a></sup><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="Sergio Luigi Alves. [Could not write JSON: Java 8 date/time type `java.time.LocalDate`](https://stackoverflow.com/questions/74187493/could-not-write-json-java-8-date-time-type-java-time-localdate/74510912#74510912). 2015-08-25. [Archived](https://web.archive.org/web/20240603104200/https://stackoverflow.com/questions/74187493/could-not-write-json-java-8-date-time-type-java-time-localdate/74510912#74510912) on 2024-06-03. Retrieved 2024-06-02.">[2]</span></a></sup>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.json.JsonMapper;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JacksonConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title function_">jsonMapper</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> JsonMapper<br>                .builder()<br>                .findAndAddModules()<br>                .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class="hljs-literal">false</span>)<br>                .build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Redis-Cache-Manager"><a href="#Redis-Cache-Manager" class="headerlink" title="Redis Cache Manager"></a>Redis Cache Manager</h2><p>RedisCacheManager é…ç½®ï¼Œä½¿ç”¨ jsonMapper ä½œä¸ºåºåˆ—åŒ–å™¨ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½® <code>DefaultTyping</code> ä»¥æ”¯æŒååºåˆ—åŒ–ã€‚</p><p>æ ¹æ®<a href="https://www.javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.17.1/com/fasterxml/jackson/databind/ObjectMapper.DefaultTyping.html">æ–‡æ¡£</a>ï¼Œæ­¤å¤„æˆ‘ä»¬é€‰æ‹© <code>NON_FINAL_AND_ENUMS</code>ï¼Œ<code>EVERYTHING</code> å·²ç»å¼ƒç”¨ä¸”ä¸å»ºè®®ä½¿ç”¨ã€‚</p><p>æ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒï¼š</p><ul><li><a href="https://github.com/FasterXML/jackson-databind/issues/3512#issuecomment-1150913172">https://github.com/FasterXML/jackson-databind/issues/3512#issuecomment-1150913172</a></li><li><a href="https://github.com/spring-projects/spring-data-redis/issues/1566">https://github.com/spring-projects/spring-data-redis/issues/1566</a></li><li><a href="https://github.com/spring-projects/spring-data-redis/commit/93c25b0608173fafaddb485c539b84ab4db5801d">https://github.com/spring-projects/spring-data-redis/commit/93c25b0608173fafaddb485c539b84ab4db5801d</a></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonTypeInfo;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;<br><span class="hljs-keyword">import</span> jakarta.annotation.Resource;<br><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> org.springframework.cache.annotation.EnableCaching;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.cache.RedisCacheConfiguration;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializationContext.SerializationPair;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;<br><br><span class="hljs-meta">@EnableCaching</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheConfig</span> &#123;<br>    <span class="hljs-meta">@Resource(name = &quot;jsonMapper&quot;)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ObjectMapper jsonMapper;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RedisCacheManager <span class="hljs-title function_">cacheManger</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span> &#123;<br>        <span class="hljs-comment">// serializer</span><br>        RedisSerializer&lt;Object&gt; serializer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>(<br>                jsonMapper<br>                        .copy()<br>                        .activateDefaultTyping(<br>                                jsonMapper.getPolymorphicTypeValidator(),<br>                                ObjectMapper.DefaultTyping.NON_FINAL_AND_ENUMS,<br>                                JsonTypeInfo.As.PROPERTY<br>                        )<br>        );<br><br>        <span class="hljs-comment">// cache manager</span><br>        <span class="hljs-keyword">return</span> RedisCacheManager<br>                .builder(redisConnectionFactory)<br>                .cacheDefaults(<br>                        RedisCacheConfiguration<br>                                .defaultCacheConfig()<br>                                .computePrefixWith(name -&gt; name + <span class="hljs-string">&quot;:&quot;</span>)<br>                                .disableCachingNullValues()<br>                                .serializeValuesWith(SerializationPair.fromSerializer(serializer))<br>                )<br>                .build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>PhilippS. <a href="https://stackoverflow.com/questions/21384820/is-there-a-jackson-datatype-module-for-jdk8-java-time/32202201#32202201">Is there a jackson datatype module for JDK8 java.time?</a>. 2015-08-25. <a href="https://web.archive.org/web/20240603104141/https://stackoverflow.com/questions/21384820/is-there-a-jackson-datatype-module-for-jdk8-java-time/32202201#32202201">Archived</a> on 2024-06-03. Retrieved 2024-06-02.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>Sergio Luigi Alves. <a href="https://stackoverflow.com/questions/74187493/could-not-write-json-java-8-date-time-type-java-time-localdate/74510912#74510912">Could not write JSON: Java 8 date&#x2F;time type <code>java.time.LocalDate</code></a>. 2015-08-25. <a href="https://web.archive.org/web/20240603104200/https://stackoverflow.com/questions/74187493/could-not-write-json-java-8-date-time-type-java-time-localdate/74510912#74510912">Archived</a> on 2024-06-03. Retrieved 2024-06-02.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>JÃ©rÃ´me Waibel. <a href="https://medium.com/@jerome.waibel/caching-with-spring-boot-and-redis-can-be-tricky-5f99548601b9">Caching with Spring Boot and Redis can be tricky!</a>. 2023-05-31. <a href="https://web.archive.org/web/20240603131015/https://medium.com/@jerome.waibel/caching-with-spring-boot-and-redis-can-be-tricky-5f99548601b9">Archived</a> on 2024-06-03. Retrieved 2024-06-03.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>åç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Spring Boot</tag>
      
      <tag>Java</tag>
      
      <tag>Redis</tag>
      
      <tag>Json</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024å¹´5æœˆ10æ—¥ï¼Œä¸€æ®µå…³äºæ•™è‚²çš„æ·±å¤œå¯¹è¯</title>
    <link href="/zh-CN/2024/05/ab8437d8f1f6/"/>
    <url>/zh-CN/2024/05/ab8437d8f1f6/</url>
    
    <content type="html"><![CDATA[<p>äº‹æƒ…çš„èµ·å› ï¼š<a href="https://www.bilibili.com/video/BV1Uw4m1X7vS/">ä¸€åœºéª—å­ä¸“å®¶å’Œæ— èƒ½å®¶é•¿å¯¹ä¸­å›½é’å°‘å¹´çš„å›´å‰¿ï½œèµµèŠè‹±äº‹ä»¶Reaction</a></p><span id="more"></span><p><img src="https://picture.zhanganzhi.com/2024/05/09/y276e85.png" alt="å¯¹è¯å…¨æ–‡"></p>]]></content>
    
    
    <categories>
      
      <category>æ‚è°ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç”Ÿæ´»</tag>
      
      <tag>æ‚è°ˆ</tag>
      
      <tag>å¤§å­¦</tag>
      
      <tag>ä¸­å›½</tag>
      
      <tag>æ•™è‚²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java 17+ Output Unicode Characters on Windows Showing Question Marks Reason and Solution</title>
    <link href="/en/2024/04/da97145e767c/"/>
    <url>/en/2024/04/da97145e767c/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Java 17+ outputs Unicode characters on Windows platform showing question marks, this article will introduce the reason and solution for this issue.</p></blockquote><span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>When using Unicode characters output to Windows, it will show question marks, as shown in the following image (using Java 21 here):</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(<span class="hljs-string">&quot;\uD83D\uDE02&quot;</span>);<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2024/04/11/b9fo6os.png" alt="A question mark, indicating a possible encoding issue"></p><h2 id="Reason"><a href="#Reason" class="headerlink" title="Reason"></a>Reason</h2><p>Java 18 implemented a change, <a href="https://openjdk.org/jeps/400">JEP 400: UTF-8 by Default</a>:</p><blockquote><p>Specify UTF-8 as the default charset of the standard Java APIs. With this change, APIs that depend upon the default charset will behave consistently across all implementations, operating systems, locales, and configurations.</p></blockquote><p>It looks good, but one of the goals of this change is:</p><blockquote><p>Standardize on UTF-8 throughout the standard Java APIs, except for <strong>console I&#x2F;O</strong>.</p></blockquote><p>Although our console encoding is UTF-8, <code>PrintStream</code> still uses the default encoding to output content to the console, which may be GBK or Windows-1252 encoding on Windows.</p><p>Additionally, you can check <code>((OutputStreamWriter) System.out.textOut.out).se.cs</code> in debug to confirm the output encoding.</p><p>More detailed discussions can be found in this <a href="https://stackoverflow.com/questions/71685543/java-jdk-18-in-intellij-prints-question-mark-when-i-tried-to-print-unicode-l/71702397#71702397">answer</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="skomisa. [Java JDK 18 in IntelliJ prints question mark &quot;?&quot; when I tried to print unicode like &quot;\u1699&quot;](https://stackoverflow.com/a/71702397/19420247). 2022-04-01. [Archived](https://web.archive.org/web/20240411132043/https://stackoverflow.com/questions/71685543/java-jdk-18-in-intellij-prints-question-mark-when-i-tried-to-print-unicode-l/71702397#71702397) on 2024-04-11. Retrieved 2024-04-10.">[1]</span></a></sup>.</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ol><li>Downgrade Java version to 17 or below.</li><li>Set the console output character set to UTF-8 encoding.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">System.setOut(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(FileDescriptor.out), <span class="hljs-literal">true</span>, StandardCharsets.UTF_8));<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2024/04/11/auh1dvl.png" alt="Then it&#39;s resolved"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>skomisa. <a href="https://stackoverflow.com/a/71702397/19420247">Java JDK 18 in IntelliJ prints question mark &quot;?&quot; when I tried to print unicode like &quot;\u1699&quot;</a>. 2022-04-01. <a href="https://web.archive.org/web/20240411132043/https://stackoverflow.com/questions/71685543/java-jdk-18-in-intellij-prints-question-mark-when-i-tried-to-print-unicode-l/71702397#71702397">Archived</a> on 2024-04-11. Retrieved 2024-04-10.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>ç¼–ç </tag>
      
      <tag>Windows</tag>
      
      <tag>Unicode</tag>
      
      <tag>UTF-8</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java 17+ åœ¨ Windows å¹³å°è¾“å‡º Unicode å­—ç¬¦æ˜¾ç¤ºé—®å·çš„åŸå› ä¸è§£å†³æ–¹æ¡ˆ</title>
    <link href="/zh-CN/2024/04/bb7bc15fe041/"/>
    <url>/zh-CN/2024/04/bb7bc15fe041/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Java 17+ åœ¨ Windows å¹³å°è¾“å‡º Unicode å­—ç¬¦ï¼Œä¼šæ˜¾ç¤ºé—®å·ï¼Œæœ¬æ–‡å°†ä»‹ç»è¯¥ç°è±¡çš„åŸå› ä¸è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><span id="more"></span><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>å½“ä½¿ç”¨ Unicode å­—ç¬¦è¾“å‡ºåˆ° Windows å¹³å°æ—¶ï¼Œä¼šæ˜¾ç¤ºé—®å·ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ­¤å¤„ä½¿ç”¨ Java 21ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(<span class="hljs-string">&quot;\uD83D\uDE02&quot;</span>);<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2024/04/11/b9fo6os.png" alt="ä¸€ä¸ªé—®å·ï¼Œæ„å‘³ç€å¯èƒ½å‡ºç°äº†ç¼–ç é—®é¢˜"></p><h2 id="åŸå› åˆ†æ"><a href="#åŸå› åˆ†æ" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h2><p>Java 18 å®ç°äº†ä¸€ä¸ªæ”¹åŠ¨ï¼Œ<a href="https://openjdk.org/jeps/400">JEP 400: UTF-8 by Default</a>ï¼š</p><blockquote><p>Specify UTF-8 as the default charset of the standard Java APIs. With this change, APIs that depend upon the default charset will behave consistently across all implementations, operating systems, locales, and configurations.</p></blockquote><p>çœ‹èµ·æ¥ä¸é”™ï¼Œä½†æ˜¯è¯¥å˜åŠ¨çš„ç›®æ ‡ä¹‹ä¸€æ˜¯ï¼š</p><blockquote><p>Standardize on UTF-8 throughout the standard Java APIs, except for <strong>console I&#x2F;O</strong>.</p></blockquote><p>æˆ‘ä»¬çš„æ§åˆ¶å°ç¼–ç æ˜¯ UTF-8ï¼Œä½†æ˜¯ <code>PrintStream</code> ä»ç„¶ä½¿ç”¨é»˜è®¤ç¼–ç å‘æ§åˆ¶å°è¾“å‡ºå†…å®¹ï¼Œåœ¨ Windows å¹³å°è¿™å¯èƒ½æ˜¯ GBK æˆ– Windows-1252 ç¼–ç ã€‚</p><p>å¦å¤–ï¼Œå¯ä»¥åœ¨ debug ä¸­æŸ¥çœ‹ <code>((OutputStreamWriter) System.out.textOut.out).se.cs</code> ç¡®è®¤è¾“å‡ºç¼–ç ã€‚</p><p>åœ¨è¿™ç¯‡<a href="https://stackoverflow.com/questions/71685543/java-jdk-18-in-intellij-prints-question-mark-when-i-tried-to-print-unicode-l/71702397#71702397">å›ç­”</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="skomisa. [Java JDK 18 in IntelliJ prints question mark &quot;?&quot; when I tried to print unicode like &quot;\u1699&quot;](https://stackoverflow.com/a/71702397/19420247). 2022-04-01. [Archived](https://web.archive.org/web/20240411132043/https://stackoverflow.com/questions/71685543/java-jdk-18-in-intellij-prints-question-mark-when-i-tried-to-print-unicode-l/71702397#71702397) on 2024-04-11. Retrieved 2024-04-10.">[1]</span></a></sup>ä¸­å¯ä»¥æ›´çœ‹åˆ°è¯¦ç»†çš„è®¨è®ºã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><ol><li>é™çº§ Java ç‰ˆæœ¬è‡³ 17 åŠä»¥ä¸‹ã€‚</li><li>è®¾ç½®æ§åˆ¶å°è¾“å‡ºå­—ç¬¦é›†ä¸º UTF-8 ç¼–ç ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">System.setOut(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(FileDescriptor.out), <span class="hljs-literal">true</span>, StandardCharsets.UTF_8));<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2024/04/11/auh1dvl.png" alt="é—®é¢˜è§£å†³äº†"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>skomisa. <a href="https://stackoverflow.com/a/71702397/19420247">Java JDK 18 in IntelliJ prints question mark &quot;?&quot; when I tried to print unicode like &quot;\u1699&quot;</a>. 2022-04-01. <a href="https://web.archive.org/web/20240411132043/https://stackoverflow.com/questions/71685543/java-jdk-18-in-intellij-prints-question-mark-when-i-tried-to-print-unicode-l/71702397#71702397">Archived</a> on 2024-04-11. Retrieved 2024-04-10.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>ç¼–ç </tag>
      
      <tag>Windows</tag>
      
      <tag>Unicode</tag>
      
      <tag>UTF-8</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸ºä»€ä¹ˆæˆ‘è®¤ä¸º 2024 å¹´ä¸­ç¾åº”è¯¥ç»§ç»­æ‰©å¤§äº¤æµï¼Ÿ</title>
    <link href="/zh-CN/2024/04/4d163fab4447/"/>
    <url>/zh-CN/2024/04/4d163fab4447/</url>
    
    <content type="html"><![CDATA[<blockquote><p>2024 å¹´å·²ç»è¿‡å»äº†å››åˆ†ä¹‹ä¸€ï¼Œè¿™ä¸¤å¤©åœ¨ç¾å›½è®¿é—®å’Œä¸æœ‹å‹äº¤æµï¼Œå†™ä¸‹äº†ä¸€äº›è§‚å¯Ÿå’Œéšç¬”ï¼Œæ•´ç†æˆäº†è¿™ç¯‡æ–‡ç« ã€‚</p></blockquote><span id="more"></span><p><img src="https://picture.zhanganzhi.com/2024/04/02/3w0ufrh.png" alt="å…ˆæ”¾ä¸€å¼ å¯çˆ±çš„ç…§ç‰‡"></p><p>ç¬¬ä¸€ï¼Œç›¸å¯¹æ¬§æ´²å‰ä¸¤å¹´çš„é«˜é€šèƒ€å’Œç»æµè¡°é€€ï¼Œç¾å›½æˆåŠŸæŒ‰ä½äº†é€šèƒ€å’Œå°±ä¸šï¼Œå¹¶ä¸”å¼€å§‹ç¼©è¡¨è®¡åˆ’é™æ¯ï¼Œæœ‰æœ›å®ç°å¹³ç¨³è½åœ°ã€‚è¿™èƒŒåçš„åŸå› æ˜¯å¾ˆå€¼å¾—ç¢ç£¨çš„ï¼Œæ— è®ºæ˜¯ç›¸å¯¹ä¸­å›½è¿˜æ˜¯æ¬§æ´²ï¼Œç¾å›½çš„ç»æµå±•ç°å‡ºäº†å¼ºåŠ²çš„åŠ¨åŠ›ã€‚</p><p>ç¬¬äºŒï¼Œç¾å›½çš„æ°‘é—´ç”Ÿæ´»å·²ç„¶ä»ç–«æƒ…ä¸­æ¢å¤æ­£å¸¸ï¼Œæ™®é€šäººçš„æ¶ˆè´¹åœ¨æˆ‘çœ‹æ¥å‡ ä¹å®Œå…¨æ¢å¤ï¼Œè™½ç„¶å¯èƒ½æœ‰å‰ä¸¤å¹´æ’’é’±çš„æ•ˆæœï¼Œä½†ä½œä¸ºç»æµçš„ä¸‰é©¾é©¬è½¦ä¹‹ä¸€ï¼Œæ°‘é—´çš„æ¶ˆè´¹å’Œä¿¡å¿ƒæ˜¾ç„¶æ˜¯ååˆ†é‡è¦çš„ã€‚ç–«æƒ…æœŸé—´çš„è§æ¡å·²ç»ä¸å¤å­˜åœ¨ï¼Œæˆ‘çœ‹åˆ°çš„æ˜¯å’Œå¾€å¸¸ä¸€æ ·çš„æ­£å¸¸ç”Ÿæ´»ã€‚åœ¨åˆ«çš„å›½å®¶ï¼Œæ— è®ºæ˜¯ä¸œäºšã€ä¸œå—äºšã€è¿˜æ˜¯æ¬§æ´²ï¼Œé‚£äº›æ»¡ä¸–ç•Œè·‘æ»¡ä¸–ç•Œç©çš„ç¾å›½äººä¹Ÿå›æ¥äº†ã€‚</p><p>ç¬¬ä¸‰ï¼Œç›®å‰ä¸­ç¾å®˜æ–¹æœ‰ç€äº’ç›¸æŠ¹é»‘å’Œå¦–é­”åŒ–çš„æƒ…ç»ªï¼Œè¿™æ˜¾ç„¶é˜»ç¢äº†æ°‘é—´çš„æ­£å¸¸äº¤æµåˆä½œã€‚ä¸­å›½ä¸æ˜¯ä¸€ä¸ªç‹¬è£çš„å°é—­å›½å®¶ï¼Œç¾å›½ä¹Ÿä¸æ˜¯ä¸€ä¸ªæ»¡ä¸–ç•Œæ”¶å‰²çš„æ¶é­”ã€‚ä¸­å›½çš„å¤–äº¤ç­–ç•¥åœ¨å‰ä¸¤å¹´å‡ºç°äº†ä¸€äº›é”™è¯¯çš„åç§»ï¼Œä½†æˆ‘ä»¬å¾ˆé«˜å…´åœ°çœ‹åˆ°åœ¨è¿™ä¸¤å¹´æ­£åœ¨æ­£å¸¸åŒ–ã€‚é•¿æ±Ÿé»„æ²³ä¸ä¼šå€’æµï¼Œä¸­å›½å¯¹å¤–å¼€æ”¾çš„å¤§é—¨åªä¼šè¶Šæ¥è¶Šå¤§ï¼Œæ‹¥æŠ±å…¨çƒåŒ–æ˜¯å†å²å¤§åŠ¿ã€‚å…¨çƒäººæ°‘çš„å‘å±•ä¸èƒ½ä¸ºäº†æ”¿æ²»å’Œæ„è¯†å½¢æ€è®©è·¯ï¼Œè‹è”çš„æ‚²å‰§åšå†³ä¸èƒ½é‡æ¼”ã€‚è¿™åŒæ ·ä¹Ÿéœ€è¦æ°‘é—´çš„åŠªåŠ›ï¼Œå¢è¿›äº¤æµï¼Œæ‰©å¤§åŒ…å®¹ä¸ç†è§£ã€‚</p><p>ç¬¬å››ï¼ŒåŠ å¼ºæ–‡åŒ–äº¤æµï¼Œä¿ƒè¿›ä¸­ç¾æ°‘é—´äº¤æµè®¿é—®ã€‚åªæœ‰é¢å¯¹é¢çš„äº¤æµã€äº²èº«çš„ä½“éªŒï¼Œæ‰èƒ½æœ€å¥½åœ°ç†è§£ä¸€ä¸ªç¤¾ä¼šçš„ç”Ÿæ´»å’Œæ–‡åŒ–ã€‚è¿™ä¹Ÿå°†æœ‰åŠ©äºæ¶ˆé™¤æ°‘ä¼—é—´çš„å¯¹ç«‹æƒ…ç»ªä¸è¯¯è§£ã€‚æ–°é—»æŠ¥é“ä¸ºäº†æµé‡å’Œè¯é¢˜åªä¼šè¶Šæ¥è¶Šæç«¯ï¼Œä¸­è‹±ä¸¤ä¸ªè¯­è¨€ä¹‹é—´æ²¡æœ‰ä»»ä½•äº’é€šä¹‹å¤„ï¼Œè¿™å¯¼è‡´å¤§é‡çš„äººåªèƒ½ä»ä¸€ä¸ªå°é—­çš„ç‰‡é¢äº†è§£ä¿¡æ¯ï¼Œå®¢è§‚å…¨é¢çš„ä½“éªŒå’Œç†è§£æ˜¯ååˆ†å¿…è¦çš„ã€‚</p><p>ç¬¬äº”ï¼Œä¸­ç¾æ˜¯ä¸–ç•Œä¸Šæœ€ç›¸ä¼¼çš„ä¸¤ä¸ªå¤§å›½ï¼ŒåŒ…æ‹¬æ”¿æ²»ä½“åˆ¶ã€ç§‘æŠ€å‘å±•ã€ä¸»æµä»·å€¼è§‚ã€è‡ªç„¶èµ„æºã€å†›äº‹å®åŠ›ã€æ•™è‚²æ°´å¹³ã€æ–‡åŒ–åŒ…å®¹ç­‰ç­‰ã€‚ç»§ç»­æ‰©å¤§å¤šæ–¹é¢åˆä½œï¼Œå°¤å…¶æ˜¯ä¸­ç¾ç§‘æŠ€åˆä½œï¼Œå°†ä¸ºä¸–ç•Œçš„ä¸‹ä¸€ä¸ªåå¹´æ³¨å…¥æ–°çš„å‘å±•åŠ¨åŠ›ã€‚</p><p>ç¬¬å…­ï¼Œä¸­ç¾ä¸èƒ½å…è®¸ç»æµè¡°è½ï¼Œæ— è®ºæ˜¯å®ç°è½¯ç€é™†è¿˜æ˜¯ä¿æŒå¼ºåŠ²å¢é•¿ï¼Œéƒ½ç¦»ä¸å¼€åŒæ–¹çš„ç»æµæµåŠ¨ï¼Œç»æµè„±é’©ä¸å¯èƒ½ã€ä¸ç°å®ã€ä¹Ÿç»ä¸èƒ½æ¥å—ã€‚</p><p>ç¬¬ä¸ƒï¼Œå…¨çƒæ²»ç†ä¸å‘å±•ã€‚ä½œä¸ºæœ€å¤§çš„ä¸¤ä¸ªåŒºåŸŸæ€§å¤§å›½ï¼Œä¸­ç¾è¶³ä»¥ä¸»å¯¼å…¨çƒæœªæ¥å‘å±•ã€‚ä¸–ç•Œå¤šæåŒ–å’Œæ¬§æ´²è¡°è½çš„ä»Šå¤©ï¼Œæ›´åº”è¯¥åˆ›é€ è´¢å¯Œå¢é‡ã€ç¨³å®šå…¨çƒæ²»ç†ã€å¢è¿›å…¨çƒäººæ°‘ç¦ç¥‰ã€‚ä¸–ç•Œä¸Šè¿˜æœ‰å¤§é‡ç¬¬ä¸‰ä¸–ç•Œå›½å®¶å’Œåœ°åŒºï¼Œä¸­ä¸œã€éæ´²ã€ä¸­ç¾æ´²åŠå—ç¾æ´²çš†æœ‰ä¸åŒç¨‹åº¦çš„åŠ¨è¡å’Œäººé“ä¸»ä¹‰å±æœºï¼Œè¿™äº›åœ°åŒºå‘å±•å‰æ™¯å¹¿é˜”ï¼Œå……æ»¡äº†æœºé‡å’ŒæŒ‘æˆ˜ã€‚</p><p>åˆ—ä¸¾ä¸€äº›çŸ­æœŸå†…å¯è¡Œçš„å…·ä½“æªæ–½ï¼š</p><ol><li>ä¸­å›½è¦è¿›ä¸€æ­¥æ‰©å¤§å…ç­¾èŒƒå›´ï¼Œå¢åŠ è‹±å›½ç¾å›½ç­‰å›½å®¶ï¼Œæ”¯æŒå’Œé¼“åŠ±æ—…æ¸¸å¢é•¿ï¼Œè¿›ä¸€æ­¥æé«˜äº¤é€šã€ä½å®¿ã€å‡ºè¡Œç­‰ä¾¿åˆ©ã€‚</li><li>ä¸­å›½äººè¦æ›´å¤šåœ°èµ°å‡ºå»ï¼Œçœ‹ä¸€çœ‹ç¾å›½çš„å®é™…ç”Ÿæ´»æ˜¯æ€æ ·çš„ï¼Œå¦‚æœæœ‰æ¡ä»¶ï¼Œåº”è¯¥ä½“éªŒå‡ ä¸ªæœˆæ—¥å¸¸çš„ç”Ÿæ´»ï¼Œå¤šä¸å½“åœ°äººäº¤æµã€‚ä»Šå¤©çš„ä¸­å›½äººæ›´æ„¿æ„å»ä¸œäºšæˆ–ä¸œå—äºšæ—…æ¸¸ï¼Œå› ä¸ºé‚£é‡Œè¯­è¨€æ›´æ–¹ä¾¿ä¹Ÿæ›´ä¾¿å®œã€‚ä½†å…¶å®åœ°çƒçš„å¦ä¸€é¢ä¹Ÿéœ€è¦äº†è§£ï¼Œæ–°é—»ä¸­çš„æè¿°æ°¸è¿œæ˜¯ä¸å®Œæ•´çš„ï¼Œäº²çœ¼æ‰€è§çš„ä¸€äº›ç»†èŠ‚æ‰èƒ½æ„å»ºèµ·æˆ‘ä»¬çœ‹ä¸–ç•Œæ›´ä¸°å¯Œçš„è§’åº¦ã€‚</li><li>å¾ˆå¤šç¾å›½äººå¹¶æ²¡æœ‰å¾ˆå¤šæ¬§æ´²äººé‚£ä¹ˆå…³å¿ƒæ”¿æ²»ï¼Œè¿™æ˜¯å€¼å¾—ä¿æŒçš„å¥½äº‹ã€‚æ¬§æ´²çš„å‘å±•å·²ç»ä¸ºæ”¿æ²»è®©è·¯å¤ªå¤šäº†ï¼Œç¾å›½ä¹Ÿåº”è¯¥è®©æ”¿æ²»æ–—äº‰é™æ¸©ä¸‹æ¥ã€‚å…¨ä¸–ç•Œäººæ°‘éœ€è¦ç»§ç»­ä¿ƒè¿›å…¨çƒåŒ–ï¼Œå…¨ä¸–ç•Œåˆä½œåšå¤§è›‹ç³•ï¼Œè®©æ›´å¤šäººæœ‰å®ç°æˆåŠŸå’Œç¾å¥½ç”Ÿæ´»çš„å¯èƒ½ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>æ‚è°ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å…¨çƒåŒ–</tag>
      
      <tag>ä¸­å›½</tag>
      
      <tag>ç¾å›½</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Can a Function be a Structure Member in C?</title>
    <link href="/en/2024/02/2db431afb19a/"/>
    <url>/en/2024/02/2db431afb19a/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Can a Function be a Structure Member in C?</p></blockquote><span id="more"></span><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><h3 id="Raw-Question"><a href="#Raw-Question" class="headerlink" title="Raw Question"></a>Raw Question</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">Which of the following cannot be a structure member?<br><br>A. Array<br>B. Another structure<br>C. Function<br>D. None of the mentioned<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2024/02/16/kihrafd.png" alt="Raw Question"></p><h3 id="My-First-Idea"><a href="#My-First-Idea" class="headerlink" title="My First Idea"></a>My First Idea</h3><p>I thought the answer was D, because if the array is stored in the structure as a pointer, then reciprocally, the function pointer could reasonably be a member of the structure (in natural language and common sense). For those who donâ€™t know about function pointers, here is an example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span> &#123;</span><br>    <span class="hljs-type">char</span> name[<span class="hljs-number">5</span>];<br><br>    <span class="hljs-type">void</span> (*fun)(<span class="hljs-type">int</span>);<br>&#125;;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">fun</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Value of a is %d\n&quot;</span>, a);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span> <span class="hljs-title">p1</span>;</span><br><br>    <span class="hljs-comment">// array</span><br>    <span class="hljs-built_in">strcpy</span>(p1.name, <span class="hljs-string">&quot;John&quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Name is %s\n&quot;</span>, p1.name);<br><br>    <span class="hljs-comment">// function</span><br>    p1.fun = &amp;fun;<br>    p1.fun(<span class="hljs-number">10</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Argument-for-Function"><a href="#Argument-for-Function" class="headerlink" title="Argument for Function"></a>Argument for Function</h3><p>Someone argue that we canâ€™t define a function in a structure. i.e.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span> &#123;</span><br>  <span class="hljs-type">char</span> name[<span class="hljs-number">20</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><p>is legal, and</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span> &#123;</span><br>  <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>is not legal.</p><p>I donâ€™t think this idea is valid because reciprocally, the definition of an array should look like this: <code>char name[20] = &#123;&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;&#125;;</code>, because on the function we also define the contents, or codes of the function.</p><h3 id="Another-Justification"><a href="#Another-Justification" class="headerlink" title="Another Justification"></a>Another Justification</h3><p>To justify my point, there is another argument.</p><p>When using a function pointer, there are two ways, <code>(*p1.fun)(10);</code> and <code>p1.fun(10);</code>, because the function name is a pointer, so they can be used interchangeably. Due to historical reasons, Bell Labs uses the first form 1, while Berkeley uses the second form. For compatibility with existing codes, ANSI C considers these two forms equivalent. Subsequent standards standards also continue this contradictory harmony.</p><p>The name of an array is the address of the first element of the array, although they can be used interchangeably because there will be an implicitly conversion:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> name[<span class="hljs-number">20</span>];<br><span class="hljs-type">char</span> *p = name;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%c %c\n&quot;</span>, *p, name[<span class="hljs-number">0</span>]);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%c %c\n&quot;</span>, *(p+<span class="hljs-number">1</span>), name[<span class="hljs-number">1</span>]);<br></code></pre></td></tr></table></figure><h2 id="Back-to-the-Standard"><a href="#Back-to-the-Standard" class="headerlink" title="Back to the Standard"></a>Back to the Standard</h2><p>To answer this question, we need back to the C standar: <a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf">https://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf</a></p><h3 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h3><h4 id="6-2-1-1-identifier"><a href="#6-2-1-1-identifier" class="headerlink" title="6.2.1.1 identifier"></a>6.2.1.1 identifier</h4><blockquote><p>An identifier can denote an object; a function; a tag or a member of a structure, union, or enumeration; a typedef name; a label name; a macro name; or a macro parameter.</p></blockquote><h4 id="6-2-5-1-object-types-and-function-types"><a href="#6-2-5-1-object-types-and-function-types" class="headerlink" title="6.2.5.1 object types and function types"></a>6.2.5.1 object types and function types</h4><blockquote><p>Types are partitioned into object types (types that describe objects) and function types (types that describe functions). At various points within a translation unit an object type may be incomplete (lacking sufficient information to determine the size of objects of that type) or complete (having sufficient information).</p></blockquote><h4 id="6-2-5-20-derived-types-array-structure-function-pointer"><a href="#6-2-5-20-derived-types-array-structure-function-pointer" class="headerlink" title="6.2.5.20 derived types, array, structure, function, pointer"></a>6.2.5.20 derived types, array, structure, function, pointer</h4><blockquote><p>Any number of derived types can be constructed from the object and function types, as follows:</p><ul><li>An <code>array</code> type describes a contiguously allocated nonempty set of objects with a particular member object type, called the element type. The element type shall be complete whenever the array type is specified. Array types are characterized by their element type and by the number of elements in the array. An array type is said to be derived from its element type, and if its element type is T, the array type is sometimes called â€˜â€˜array of Tâ€™â€™. The construction of an array type from an element type is called â€˜â€˜array type derivationâ€™â€™.</li><li>A <code>structure</code> type describes a sequentially allocated nonempty set of member objects (and, in certain circumstances, an incomplete array), each of which has an optionally specified name and possibly distinct type.</li><li>A <code>function</code> type describes a function with specified return type. A function type is characterized by its return type and the number and types of its parameters. A function type is said to be derived from its return type, and if its return type is T, the function type is sometimes called â€˜â€˜function returning Tâ€™â€™. The construction of a function type from a return type is called â€˜â€˜function type derivationâ€™â€™.</li><li>A <code>pointer</code> type may be derived from a function type or an object type, called the referenced type. A pointer type describes an object whose value provides a reference to an entity of the referenced type. A pointer type derived from the referenced type T is sometimes called â€˜â€˜pointer to Tâ€™â€™. The construction of a pointer type from a referenced type is called â€˜â€˜pointer type derivationâ€™â€™. A pointer type is a complete object type.</li></ul></blockquote><h4 id="6-7-2-1-structure-specifiers"><a href="#6-7-2-1-structure-specifiers" class="headerlink" title="6.7.2.1 structure specifiers"></a>6.7.2.1 structure specifiers</h4><blockquote><p>3 A structure or union shall not contain a member with incomplete or function type (hence, a structure shall not contain an instance of itself, but may contain a pointer to an instance of itself), except that the last member of a structure with more than one named member may have incomplete array type; such a structure (and any union containing, possibly recursively, a member that is such a structure) shall not be a member of a structure or an element of an array.</p><p>9 A member of a structure or union may have any complete object type other than a variably modified type. In addition, a member may be declared to consist of a specified number of bits (including a sign bit, if any). Such a member is called a bit-field; its width is preceded by a colon.</p></blockquote><h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><ul><li>In C, there are two general types, <code>object type</code> and <code>function type</code>.</li><li>An object type may be incomplete (lacking sufficient information to determine the size of objects of that type) or complete (having sufficient information).</li><li><code>array</code> is drived from its <strong>element type</strong>, <code>structure</code> is drived from <strong>member objects</strong>, <code>function</code> is drived from its <strong>return type</strong>, and <code>pointer</code> is drived from a <strong>function type</strong> or an <strong>object type</strong>.</li><li>A structure or union shall not contain a member with <strong>incomplete or function type</strong> (hence, a structure shall not contain an instance of itself, but may contain a pointer to an instance of itself).</li><li>A structure can contain a incomplete member, when that the last member of a structure with more than one named member may have incomplete array type;</li><li>A structure with last member is incomplete array type shall not be a member of a structure or an element of an array.</li></ul><h2 id="Discussion-and-Conclusion"><a href="#Discussion-and-Conclusion" class="headerlink" title="Discussion and Conclusion"></a>Discussion and Conclusion</h2><p>Therefore, function type cannot be a structure member strictly according to the standard. The correct answer should be C.</p><p>However, the explanation of â€œcannot define a function in structureâ€ leads to the correct answer, but the process is wrong. My idea is also wrong because the idea of pointers is not crucial to the question, the type should be the key point.</p><p>In addition, the first two options are flimsy:</p><ul><li>Array cannot always be a structure member. Array implies complete array (<code>char name[50];</code>) and incomplete array (<code>char name[];</code>), and the incomplete array is only allowed in the last member of a structure with more than one named member. Saying an array can be a structure member is not accurate.</li><li>Another structure cannot always be a structure member. When another structure contains the last incomplete array member, it cannot be a member of a structure. That option is also inaccurate.</li></ul>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç¼–ç¨‹è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C</tag>
      
      <tag>ç¼–ç¨‹è¯­è¨€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»ä¸€åœºè½¦é©¬ä¸‡é‡Œçš„ä¸œæ¬§æ—…è¡Œå’Œé©¬ç£å·¥è·¨å¹´æ¼”è®²ï¼Œè°ˆè°ˆå…¨çƒåŒ–å’Œ 21 ä¸–çºªçš„ 20 å¹´ä»£</title>
    <link href="/zh-CN/2024/02/76820c6c0eea/"/>
    <url>/zh-CN/2024/02/76820c6c0eea/</url>
    
    <content type="html"><![CDATA[<!-- markdownlint-disable-file MD033 --><p>å‰æ®µæ—¶é—´å»äº†è¶ŸåŒˆç‰™åˆ©æŸå°åŸå¸‚ï¼Œé£æœºã€å…¬äº¤ã€åœ°é“ã€ç«è½¦ï¼Œè¾—è½¬ä¸‡é‡Œç»ˆäºåˆ°è¾¾äº†ç›®çš„åœ°ï¼Œä»¤äººæ„Ÿå¹åœ¨ 21 ä¸–çºªçš„ 20 å¹´ä»£ï¼Œä¸œæ¬§çš„äº¤é€šå¦‚æ­¤ä¸ä¾¿ï¼Œä»¿ä½›å›åˆ°äº†ä¸­å›½çš„åå¹´ä¹‹å‰ã€‚ä»Šå¤©çœ‹é©¬ç£å·¥çš„ã€Šç­”æ¡ˆã€‹å¹´ç»ˆæ¼”è®²ï¼Œè®²æ—¢ç„¶ä¸–ç•Œæ˜¯å·¨å¤§çš„è‰å°ç­å­ï¼Œé‚£ä¹ˆä¸–ç•Œæ˜¯å¦‚ä½•å‘å±•çš„ï¼Œæˆ‘æƒ³å€Ÿè¿™æ¬¡æ—…è¡Œå’Œé©¬ç£å·¥çš„æ¼”è®²ï¼ŒèŠä¸€äº›ä¸ªäººçš„çœ‹æ³•ã€‚</p><p><img src="https://picture.zhanganzhi.com/2024/02/15/olpvssn.jpg" alt="å·¨å¤§çš„å¹³åŸç”°é‡ï¼Œå¤©ç„¶é€‚åˆå†œä¸š"></p><hr><p>é©¬ç£å·¥è·¨å¹´æ¼”è®²ï¼š</p><div style="width=100%; padding-top: 56.25%; position: relative;"><iframe style="top:0; bottom:0; left:0; right:0; position: absolute;" width="100%" height="100%" src="https://www.youtube.com/embed/YcahfLB0nrk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div><p>é©¬ç£å·¥è°ˆåˆ°æ¬§æ´²çš„ç°ä»£åŒ–è¿‡ç¨‹ï¼Œå¼•ç”¨äº†ä¸€æ®µã€Šå…±äº§å…šå®£è¨€ã€‹ï¼š</p><blockquote><p>èµ„äº§é˜¶çº§åœ¨å®ƒå·²ç»å–å¾—äº†ç»Ÿæ²»çš„åœ°æ–¹æŠŠä¸€åˆ‡å°å»ºçš„ã€å®—æ³•çš„å’Œç”°å›­èˆ¬çš„å…³ç³»éƒ½ç ´åäº†ã€‚å®ƒæ— æƒ…åœ°æ–©æ–­äº†æŠŠäººä»¬æŸç¼šäºå¤©ç„¶å°Šé•¿çš„å½¢å½¢è‰²è‰²çš„å°å»ºç¾ç»Šï¼Œå®ƒä½¿äººå’Œäººä¹‹é—´é™¤äº†èµ¤è£¸è£¸çš„åˆ©å®³å…³ç³»ï¼Œé™¤äº†å†·é…·æ— æƒ…çš„â€œç°é‡‘äº¤æ˜“â€ï¼Œå°±å†ä¹Ÿæ²¡æœ‰ä»»ä½•åˆ«çš„è”ç³»äº†ã€‚</p><p>å®ƒæŠŠå®—æ•™è™”è¯šã€éª‘å£«çƒ­å¿±ã€å°å¸‚æ°‘ä¼¤æ„Ÿè¿™äº›æƒ…æ„Ÿçš„ç¥åœ£å‘ä½œï¼Œæ·¹æ²¡åœ¨åˆ©å·±ä¸»ä¹‰æ‰“ç®—çš„å†°æ°´ä¹‹ä¸­ã€‚å®ƒæŠŠäººçš„å°Šä¸¥å˜æˆäº†äº¤æ¢ä»·å€¼ï¼Œç”¨ä¸€ç§æ²¡æœ‰è‰¯å¿ƒçš„è´¸æ˜“è‡ªç”±ä»£æ›¿äº†æ— æ•°ç‰¹è®¸çš„å’Œè‡ªåŠ›æŒ£å¾—çš„è‡ªç”±ã€‚</p><p>ä¸€åˆ‡ç­‰çº§çš„å’Œå›ºå®šçš„ä¸œè¥¿éƒ½çƒŸæ¶ˆäº‘æ•£äº†ï¼Œä¸€åˆ‡ç¥åœ£çš„ä¸œè¥¿éƒ½è¢«äºµæ¸äº†ã€‚äººä»¬ç»ˆäºä¸å¾—ä¸ç”¨å†·é™çš„çœ¼å…‰æ¥çœ‹ä»–ä»¬çš„ç”Ÿæ´»åœ°ä½ã€ä»–ä»¬çš„ç›¸äº’å…³ç³»ã€‚</p><p>â€”â€”ã€Šå…±äº§å…šå®£è¨€ã€‹</p></blockquote><p>æˆ‘è¿˜æƒ³è¡¥å……ä¸­é—´è¢«ä»–çœç•¥çš„ï¼Œéå¸¸é‡è¦çš„ä¸€æ®µè¯ï¼š</p><blockquote><p>èµ„äº§é˜¶çº§é™¤éå¯¹ç”Ÿäº§å·¥å…·ï¼Œä»è€Œå¯¹ç”Ÿäº§å…³ç³»ï¼Œä»è€Œå¯¹å…¨éƒ¨ç¤¾ä¼šå…³ç³»ä¸æ–­åœ°è¿›è¡Œé©å‘½ï¼Œå¦åˆ™å°±ä¸èƒ½ç”Ÿå­˜ä¸‹å»ã€‚åä¹‹ï¼ŒåŸå°ä¸åŠ¨åœ°ä¿æŒæ—§çš„ç”Ÿäº§æ–¹å¼ï¼Œå´æ˜¯è¿‡å»çš„ä¸€åˆ‡å·¥ä¸šé˜¶çº§ç”Ÿå­˜çš„é¦–è¦æ¡ä»¶ã€‚</p><p>ç”Ÿäº§çš„ä¸æ–­å˜é©ï¼Œä¸€åˆ‡ç¤¾ä¼šçŠ¶å†µä¸åœçš„åŠ¨è¡ï¼Œæ°¸è¿œçš„ä¸å®‰å®šå’Œå˜åŠ¨ï¼Œè¿™å°±æ˜¯èµ„äº§é˜¶çº§æ—¶ä»£ä¸åŒäºè¿‡å»ä¸€åˆ‡æ—¶ä»£çš„åœ°æ–¹ã€‚ä¸€åˆ‡å›ºå®šçš„åƒµåŒ–çš„å…³ç³»ä»¥åŠä¸ä¹‹ç›¸é€‚åº”çš„ç´ è¢«å°Šå´‡çš„è§‚å¿µå’Œè§è§£éƒ½è¢«æ¶ˆé™¤äº†ï¼Œä¸€åˆ‡æ–°å½¢æˆçš„å…³ç³»ç­‰ä¸åˆ°å›ºå®šä¸‹æ¥å°±é™ˆæ—§äº†ã€‚</p></blockquote><p>é©¬ç£å·¥å°†è¿™æ®µè¯ç¿»è¯‘ä¸ºï¼Œèµ„äº§é˜¶çº§ç ´åäº†æ—§æ—¶ä»£çš„ç¥è¯ï¼Œå‘ä¸–ç•Œå®£å¸ƒæˆ‘ä»¬å°±æ˜¯è‰å°ç­å­ï¼Œå‡»ç¢äº†æ™®é€šäººçš„ä¸€åˆ‡æ¢¦æƒ³ã€‚ä½†æ˜¯ä¸ºäº†é˜²æ­¢æ™®é€šäººå¤±å»æ¢¦æƒ³ä¹‹åé€‰æ‹©èººå¹³ï¼Œæ¬§æ´²ç¤¾ä¼šè½¬å‘äº† 19 ä¸–çºªæµªæ¼«ä¸»ä¹‰æ—¶ä»£ï¼Œé¼“åŠ±äººä»¬ç†æƒ³çš„ç¤¾ä¼šå’Œç”Ÿæ´»ã€‚</p><p>æˆ‘å¬åˆ°è¿™é‡Œï¼Œç¬é—´è”æƒ³åˆ°äº†å‡ ç™¾å¹´æ¥å¼•é¢†ç€ç¾å›½ç¤¾ä¼šå’Œæ™®é€šäººå‘å±•çš„â€œç¾å›½æ¢¦â€ï¼Œå…¶å†…æ ¸æ­£æ˜¯ï¼š</p><blockquote><p>äººä»¬ç›¸ä¿¡é€šè¿‡è‡ªå·±çš„å·¥ä½œå‹¤å¥‹ã€å‹‡æ°”ã€åˆ›æ„ã€å’Œå†³å¿ƒè¿ˆå‘å¯Œè£•ï¼Œè€Œéä¾èµ–äºç‰¹å®šçš„ç¤¾ä¼šé˜¶çº§å’Œä»–äººçš„æ´åŠ©ã€‚é€šå¸¸è¿™ä»£è¡¨äº†äººä»¬åœ¨ç»æµä¸Šçš„æˆåŠŸæˆ–æ˜¯ä¼ä¸šå®¶çš„ç²¾ç¥ï¼Œä»»ä½•äººéƒ½æœ‰å¯èƒ½é€è¿‡è‡ªå·±çš„åŠªåŠ›è¿ˆå‘å·…å³°ã€‚</p><p>æ— è®ºæ¯ä¸ªäººçš„ç¤¾ä¼šé˜¶å±‚æˆ–å‡ºç”Ÿç¯å¢ƒå¦‚ä½•ï¼Œç”Ÿæ´»éƒ½åº”è¯¥å˜å¾—æ›´å¥½ï¼Œæ›´ä¸°å¯Œï¼Œæ›´ä¸°è£•ï¼Œæ¯ä¸ªäººéƒ½æœ‰æœºä¼šæ ¹æ®èƒ½åŠ›æˆ–æˆå°±è€Œå®šï¼Œæ‰€æœ‰äººéƒ½æœ‰æœºä¼šå€Ÿç”±è‡ªå·±çš„å¥‹æ–—è€Œè·å–è´¢å¯Œã€‚</p></blockquote><p>è€Œä»Šå¤©çš„ä¸­å›½ï¼Œæ— æ•°æ™®é€šäººæ»¡è„‘å­èººå¹³çš„æƒ³æ³•ï¼Œæ˜¯å¦æ˜¯åœ¨é‡æ–°ä¸Šæ¼”ç€ä¸¤ç™¾å¹´å‰çš„æ¬§æ´²å‘¢ï¼Ÿæ¬§ç¾äººä»¬æ¯”æˆ‘ä»¬æå‰äº†ä¸Šç™¾å¹´å°±å‘ç°äº†ä¸–ç•Œæ˜¯ä¸€ä¸ªå·¨å¤§çš„è‰å°ç­å­ï¼Œä»Šå¤©è¿™ä¸ªç¤¾ä¼šä¸»ä¹‰çš„ä¸­å›½ï¼Œå´åˆšåˆšèµ°åˆ°ä¸¤ç™¾å¹´å‰èµ„æœ¬ä¸»ä¹‰çš„æ¬§æ´²ï¼Œç©¶ç«Ÿè°ç¦»æœªæ¥çš„ç†æƒ³ç¤¾ä¼šæ›´è¿‘å‘¢ï¼Œè¿˜æ˜¯æ ¹æœ¬å°±æ²¡æœ‰ç†æƒ³çš„ç¤¾ä¼šï¼Œåº”è¯¥ä¸æ–­é©å‘½ï¼Œä¸æ–­å˜åŒ–ä¸‹å»ï¼Ÿ</p><p>æ²™åˆ©æ–‡è¯´ï¼Œåå†·æˆ˜æ—¶ä»£å·²ç»è¿‡å»äº†ï¼Œç¡®å®ï¼Œå†·æˆ˜ç»“æŸä¸‰åå¹´ï¼Œå½“å¹´å¦‚ç«å¦‚è¼çš„å…±äº§ä¸»ä¹‰èµ„æœ¬ä¸»ä¹‰æ„è¯†å½¢æ€ä¹‹äº‰ï¼Œå…¶å®å·²ç»è¶Šæ¥è¶Šæ·¡ï¼Œæ›´å¤šçš„è®¨è®ºå›´ç»•ç€æ›´åŠ å®é™…çš„è®®é¢˜ï¼Œä¾‹å¦‚ç»æµå‘å±•ã€å…¨çƒåŒ–ã€æ˜Ÿè¾°å¤§æµ·ã€ç¯å¢ƒé—®é¢˜ç­‰ç­‰ã€‚éšç€ 21 ä¸–çºª 20 å¹´ä»£å…¨çƒå„å¤„å±€éƒ¨æˆ˜äº‰çš„å¼€å§‹ï¼Œé›…å°”å¡”ä½“ç³»ä¸æ–­å—åˆ°æŒ‘æˆ˜ï¼Œä¸–ç•Œç§©åºè¶Šæ¥è¶Šæ··ä¹±ï¼Œä¼¼ä¹åœ¨æé†’ç€æˆ‘ä»¬å¯èƒ½çœŸçš„æ¥åˆ°äº†â€œç™¾å¹´ä¹‹æœªæœ‰å¤§å˜å±€â€ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰çš„é‚£ä¸ªæ—¶ä»£ï¼Œå¯èƒ½å°†è¦è¿‡å»äº†ã€‚</p><hr><p>ç†Ÿæ‚‰çš„æ—¶ä»£è¿‡å»ï¼Œé‡å»ºæ–°çš„ç§©åºï¼Œè¿™ä¸ä¸€å®šæ˜¯åäº‹ï¼Œæˆ‘ä»¬è¯´å›åœ¨åŒˆç‰™åˆ©çš„æ—…è¡Œã€‚</p><p><img src="https://picture.zhanganzhi.com/2024/02/15/jo7znsp.jpg" alt="è¿˜æœ‰ä¸€äº›å±…æ°‘ä»ç„¶è¿‡ç€å†œæ‘çš„ç”Ÿæ´»"></p><p><img src="https://picture.zhanganzhi.com/2024/02/15/zlq3ryf.jpg" alt="å……æ»¡äº†å¹´ä»£æ„Ÿçš„é“è·¯ç«™å°å’Œæ¥¼æˆ¿"></p><p>è¿™é‡Œçš„é“è·¯éå¸¸æ¬ å‘è¾¾ï¼Œ80 å…¬é‡Œçš„æ—¶é€Ÿï¼Œä½“éªŒä¸‰ä¸ªå°æ—¶çš„ç«è½¦ï¼Œçœ‹ç€å¤§ç‰‡çš„ç”°é‡å’Œå¤§å‹æœºæ¢°ï¼ŒçŒœæµ‹è¿™é‡Œåº”è¯¥ä¹Ÿæ˜¯ä¸€ä¸ªä¸å°çš„ç²®ä»“ã€‚</p><p>è¿æ°”ä¸é”™ï¼Œåœ¨ç«è½¦ä¸Šå’Œé‚»åº§çš„å½“åœ°äººèŠå¤©ï¼Œä»¤äººæƒŠè®¶çš„æ˜¯å¥¹çš„è‹±è¯­æ°´å¹³éå¸¸å¥½ï¼Œåæ¥å¾—çŸ¥å¸¦ç€ä¸¤ä¸ªå­©å­çš„å¥¹æ›¾åœ¨è‹æ ¼å…°ã€åœŸè€³å…¶ç­‰å¤šä¸ªå›½å®¶å·¥ä½œï¼Œä½†æˆ‘ä»¬åªç®€å•èŠäº†ä¸€äº›è¿™ä¸ªå›½å®¶çš„æ¦‚å†µï¼Œå¦‚æœæ—¶é—´å……è£•ï¼Œæˆ–è®¸åˆèƒ½å¬åˆ°ä¸€ä¸ªå……æ»¡ä¼ å¥‡çš„äººç”Ÿæ•…äº‹å§ã€‚</p><p>æˆ‘ä»¬èŠåˆ°ç”±äºç²®ä»·å¤ªä½ã€æˆæœ¬ä¸Šæ¶¨ï¼Œå†œæ°‘è¶Šæ¥è¶Šä¸æ„¿æ„ç§ç²®ï¼Œæœºæ¢°åŒ–çš„è®¾å¤‡ç”±äºè¿‘äº›å¹´çš„ç§ç§åŸå› ï¼Œåˆ«è¯´è´­ä¹°ï¼Œè¿ç§Ÿç”¨éƒ½æ‰¿æ‹…ä¸èµ·ã€‚è€Œåœ¨åŸæ¥çš„å¾ˆå¤šä¸å†ç§æ¤çš„å†œç”°ä¸Šï¼Œå·²ç»ç›–èµ·æ¥äº†å·¥å‚â€”â€”â€œChinese Factoryâ€ã€‚</p><p><img src="https://picture.zhanganzhi.com/2024/02/15/v3me0nt.jpg" alt="ç”°é‡çš„è¿œæ–¹ä¼¼ä¹å°±ç›–ç€ä¸€ç‰‡å·¥å‚"></p><p>è™½ç„¶åœ¨å½“åœ°å‡ ä¹æ²¡æœ‰çœ‹åˆ°ä»»ä½•ä¸­å›½äººï¼Œä½†æ˜¯åœ¨è¿™ä¸ªå…¨çƒåŒ–çš„æ—¶ä»£ï¼Œå½“åœ°äººå¯¹æ¥è‡ªä¸œäºšçš„é¢å­”ä¼¼ä¹å·²ç»è§æ€ªä¸æ€ªï¼Œç”¨ç€è‹±è¯­å’Œæˆ‘ä»¬äº¤æµï¼Œä¹Ÿæ˜¯å†æ­£å¸¸ä¸è¿‡çš„äº‹æƒ…äº†ï¼Œè¿™é‡Œçš„è‹±è¯­æ™®åŠç‡ä¹Ÿè®©æˆ‘æ„Ÿåˆ°éœ‡æƒŠï¼Œå¯ä»¥è¯´æ¬§æ´²ä¸æ„¿æ„è¯´è‹±è¯­çš„å›½å®¶ï¼Œå‡ ä¹åªå‰©ä¸‹æ³•å›½äº†ï¼ˆè¿™é‡Œæ˜¯ç¬‘è¯ï¼‰ã€‚</p><p>è€Œå¥¹åå¤æåˆ°çš„ä¸­å›½äººã€ä¸­å›½å·¥å‚ï¼Œä¼¼ä¹ä¹Ÿé¢„ç¤ºç€ä¸­å›½çš„å…¨çƒå½±å“åŠ›æ­£åœ¨ä¸æ–­æ‰©å¤§ã€‚ä¸­å›½äººä» 21 ä¸–çºªåˆèµ°å‘å‘è¾¾å›½å®¶ï¼Œåˆ°ç°åœ¨èµ°åˆ°äº†ä¸­ç­‰å‘è¾¾å›½å®¶ç”šè‡³ç¬¬ä¸‰ä¸–ç•Œå›½å®¶ï¼Œå‘å±•ç€è‡ªå·±çš„äº‹ä¸šå’Œå½“åœ°çš„äº§ä¸šã€‚è¿‡å»å‡ åå¹´çš„å¤§å…´åŸºå»ºï¼Œå¦‚æœå†åœ¨è¿™äº›å›½å®¶é‡æ¼”ä¸€éï¼Œä¼¼ä¹åˆèƒ½ç»™å¾ˆå¤šäººå¸¦æ¥å‡ åå¹´çš„å’Œå¹³ä¸è´¢å¯Œï¼Œä½†åœ°çƒèƒ½å¦æ‰¿å—å¾—ä½è¿™æ ·çš„èµ„æºæ¶ˆè€—ï¼Œä¼¼ä¹ä¹Ÿæ˜¯ä¸€ä¸ªé—®å·ã€‚</p><p>åœ¨ä¸Šä¸€ä¸ªå’†å“®çš„ 20 å¹´ä»£ï¼Œå·¥ä¸šã€ç»æµã€æ–‡åŒ–ã€æ”¿æ²»çš„å‘å±•ï¼Œæ·±æ·±åœ°å½±å“äº†ä¸–ç•Œã€‚è€Œåœ¨è¿™ä¸ªæ–°çš„ 20 å¹´ä»£ï¼Œä¸–ç•Œä¸Šçš„å„ä¸ªè§’è½ï¼Œå¤šå‡ºäº†ä¸­å›½çš„èº«å½±ã€‚ä¸­å›½ä¸€ç›´æ˜¯é›…å°”å¡”ä½“ç³»çš„åšå®šç»´æŠ¤è€…ï¼Œä¹Ÿæ˜¯å…¨çƒåŒ–çš„æœ€å¤§å—ç›Šè€…ä¹‹ä¸€ï¼Œè™½ç„¶å’Œä¸€ä¼—å‘å±•ä¸­å›½å®¶åœ¨å°½åŠ›ç»´æŠ¤ç€å’Œå¹³å‘å±•çš„ä¸–ç•Œç§©åºï¼Œä½†æ˜¯åœ¨å½“ä»Šçš„ä¸–ç•Œï¼Œä¼¼ä¹ä¸­å›½åœ¨åšçš„ï¼Œåªæ˜¯æ›´å¤šçš„å¸ƒå±€ï¼Œå¸Œæœ›åœ¨ä¸‹ä¸€ä¸ªæ—¶ä»£æ¥ä¸´çš„æ—¶å€™ï¼Œä¸è¢«ä¸–ç•Œæ‰€æŠ›å¼ƒã€‚</p><p>æˆ‘ä»¬ç»å¸¸è¯´ï¼Œç ´åä¸€ä¸ªæ—§ç§©åºä¸éš¾ï¼Œéš¾çš„æ˜¯å»ºç«‹ä¸€ä¸ªæ–°ç§©åºã€‚è”æƒ³åˆ°å‰é¢çš„æ¼”è®²ï¼Œå½“äººä»¬å‘ç°è‰å°ç­å­çš„æœ¬è´¨çš„æ—¶å€™ï¼Œæ„è¯†å½¢æ€ä¼¼ä¹å·²ç»ä¸é‡è¦äº†ã€‚é‚£ä¹ˆè¿™ä¸ªå·¨å¤§çš„è‰å°ç­å­ï¼Œå’Œéšç€å…¨çƒåŒ–æµªæ½®è”ç³»è¶Šæ¥è¶Šå¯†åˆ‡çš„æ™®é€šäººï¼Œè¯¥å¦‚ä½•ä¸ºè‡ªå·±ç”»ä¸‹ä¸‹ä¸€ä¸ªæ—¶ä»£çš„è“å›¾å‘¢ï¼Ÿæœªæ¥ä¼šæ˜¯ä¸€ä¸ªæ–°çš„æµªæ¼«ä¸»ä¹‰æ—¶ä»£ã€åˆä¸€ä¸ªå’†å“®çš„ 20 å¹´ä»£ã€è¿˜æ˜¯å……æ»¡ç€æˆ˜äº‰ä¸é¥¥è’çš„ä¸–ç•Œå‘¢ï¼Ÿ</p><hr><p>æˆ‘ä¸€ç›´æ˜¯åšå®šçš„å…¨çƒåŒ–æ”¯æŒè€…å’Œå—ç›Šè€…ï¼Œæˆ‘ä¸€ç›´ç›¸ä¿¡æœªæ¥çš„ä¸–ç•Œäº¤é€šä¼šæ›´åŠ å‘è¾¾å’Œæ–¹ä¾¿ã€‚è¿‡å»ï¼Œæˆ‘ä»¬ä¸Šä¸€ä»£äººä»ä¹¡ä¸‹ç§»åˆ°äº†åŸå¸‚ï¼Œè€Œç°åœ¨å›åˆ°ä¹¡ä¸‹åªéœ€è¦å‡ ä¸ªå°æ—¶çš„æ—¶é—´ï¼›ä»Šå¤©ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªå›½å®¶èµ°åˆ°å¦ä¸€ä¸ªå›½å®¶ï¼ŒåŒæ ·åªéœ€è¦å‡ ä¸ªå°æ—¶çš„æ—¶é—´ã€‚åœ¨è¿™ä¸ªå…¨çƒåŒ–çš„æ—¶ä»£ä¸­ï¼Œä¸–ç•Œäººæ°‘å¿…ç„¶æ›´åŠ ç´§å¯†åœ°è”ç³»åœ¨ä¸€èµ·ã€‚æ— è®ºæ˜¯è¯­è¨€è¿˜æ˜¯æ–‡åŒ–ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥çœ‹åˆ°ï¼Œå…¨çƒçš„æ–‡åŒ–æ­£åœ¨èåˆï¼Œè¯­è¨€åœ¨ç»Ÿä¸€ã€èŠ‚æ—¥åœ¨äº’é€šâ€¦â€¦åœ°çƒæ‘æ­£ä¸æ–­æˆä¸ºç°å®ã€‚</p><p>å’Œå¹³ä»æ¥ä¸æ˜¯ä¸–ç•Œçš„ä¸»æ—‹å¾‹ï¼Œä½†æˆ‘ä»¬éƒ½æœŸæœ›å’Œå¹³ã€‚å¯¹æ¯ä¸€ä¸ªäººè€Œè¨€ï¼Œå’Œå¹³å¸¦ç»™æˆ‘ä»¬çš„æ˜¯æœºé‡ï¼Œæ˜¯å‘å±•çš„ç©ºé—´ï¼Œæ˜¯å¯ä»¥ç”Ÿäº§æ–‡åŒ–ä½œå“çš„æ—¶ä»£ï¼Œæ˜¯å¹¸ç¦çš„æ¯ä¸€å¤©ã€‚è¿‡å»çš„å’Œå¹³ï¼Œè®©æ€€æ£ç€æ¢¦æƒ³çš„é‚£äº›äººå®ç°äº†äººç”Ÿçš„è·¨åŸŸã€‚ä»Šå¤©ï¼Œå’Œå¹³ä¸å‘å±•ï¼Œæ˜¯æ¯ä¸€ä¸ªä¸–ç•Œäººæ°‘çœŸçœŸåˆ‡åˆ‡çš„ç”Ÿæ´»ä¸å¸Œæœ›ã€‚</p><p>åŒ†å¿™å†™æˆï¼Œå†…å®¹æœ‰äº›æ‚ä¹±ï¼Œè¿˜è¯·è§è°…ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ‚è°ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‰å°ç­å­</tag>
      
      <tag>å…¨çƒåŒ–</tag>
      
      <tag>ä¸œæ¬§</tag>
      
      <tag>åŒˆç‰™åˆ©</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å€Ÿè€èƒ¡æ¢è®¿åŒ—äº¬å¤–å›½è¯­å¤§å­¦èŠèŠæ ¡å›­å¼€æ”¾</title>
    <link href="/zh-CN/2023/12/eaa2d3058362/"/>
    <url>/zh-CN/2023/12/eaa2d3058362/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©çœ‹åˆ°è€èƒ¡æ¢è®¿åŒ—äº¬å¤–å›½è¯­å¤§å­¦ï¼Œå†æ¬¡å‘¼åæ ¡å›­å¼€æ”¾<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="èƒ¡é”¡è¿›. [è€èƒ¡ä»Šå¤©äº²èº«ç»å†äº†ï¼Œè¿™æ‰å«å¤§å­¦æ ¡å›­å¼€æ”¾](https://mp.weixin.qq.com/s/-WCo1FoM4gorVQyuquD4LA). 2023-12-30. [Archived](https://web.archive.org/web/20231231194901/https://mp.weixin.qq.com/s/-WCo1FoM4gorVQyuquD4LA) on 2023-12-31. Retrieved 2023-12-31.">[1]</span></a></sup>ã€‚è¿™ä¸ªè¯é¢˜ä»–èŠäº†ä¸å°‘æ¬¡äº†ï¼Œä½†è¿™æ¬¡è®©æˆ‘æ„Ÿè§‰ï¼Œæˆ–è®¸æ˜¯ä¸€æ¬¡æ ¡å›­å®‰å…¨ç®¡ç†å˜é©çš„æœºé‡ã€‚</p><p>åœ¨æ¸…åç”Ÿæ´»äº†è¿™ä¹ˆå¤šå¹´ï¼Œå°æ—¶å€™æ²¡æƒ³è¿‡å¼€ä¸å¼€æ”¾çš„äº‹æƒ…ã€‚çƒ­çƒ­é—¹é—¹çš„ï¼ŒæŒºå¥½ã€‚</p><p>åæ¥å»å›½å¤–çš„å¤§å­¦ï¼Œè¿˜è®°å¾—èµ°è¿‡çš„ç¬¬ä¸€æ‰€åº”è¯¥æ˜¯è€¶é²å¤§å­¦ã€‚èµ°åˆ°å…¶ä¸­æ‰çŸ¥é“ï¼Œå“¦ï¼ŒåŸæ¥æˆ‘å·²ç»åœ¨æ ¡å›­é‡Œé¢äº†ã€‚é‚£è„šå°–è¢«ç£¨æ‰äº†æ¼†çš„é“œåƒï¼Œè‡³ä»Šè¿˜èƒ½æƒ³èµ·ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/31/0fg8pph.png" alt="è€¶é²å¤§å­¦æ ¡é•¿ è¥¿å¥¥å¤šÂ·å¾·æ€€ç‰¹Â·ä¼å°”è¥¿ çš„é“œåƒï¼Œè„šå°–å·²è¢«ç£¨å¾—å‘å…‰ï¼Œå›¾ç‰‡æ¥è‡ªç½‘ç»œ"></p><p>ç–«æƒ…å…³äº†èµ·æ¥ï¼Œæˆ‘æœ€å¤§çš„æ„Ÿå—æ˜¯ï¼šç»ˆäºæ¸…å‡€äº†ã€‚äºŒæ ¡é—¨å†ä¹Ÿæ²¡æœ‰äº†å–§é—¹å’Œå°å•†å°è´©ï¼Œä¹Ÿæ²¡æœ‰åˆ°å¤„æ ‘ç«‹çš„æ—…æ¸¸å›¢æ——å¸œï¼Œè¿˜æœ‰æ‹¥å µçš„é“è·¯ã€‚è€Œå¾ˆå¤šå­¦ç”Ÿæ‰€è¿°çš„ï¼Œä¸¢ä¸œè¥¿çš„æƒ…å†µä¹Ÿå°‘äº†ï¼Œå¾ˆå¤šå­¦æ ¡ç”šè‡³å‡ºç°äº†â€œå¤§å­¦ç”Ÿçš„ä¿¡ä»»â€ï¼Œæ‘†æ‘Šå–ä¸œè¥¿å´æ²¡äººçœ‹ç®¡ï¼Œå…¨å‡­è‡ªè§‰ä¹Ÿä¸ä¼šä¸¢ã€‚å¤§å­¦æœ¬æ¥å°±ä¸æ˜¯å…¬å›­ï¼Œä¹Ÿä¸æ˜¯æ—…æ¸¸æ™¯ç‚¹ï¼Œæ›´ä¸æ˜¯å•†ä¸šè¡—ï¼Œè€Œæ˜¯å­¦ç”Ÿçš„å®¶å›­ã€‚è¿™ä¸ªå®¶å›­ï¼Œåº”è¯¥æ˜¯å®‰å…¨çš„ï¼Œå®‰é™çš„ï¼Œè€Œä¸æ˜¯å–§é—¹çš„ã€‚æŠŠå®ƒå‘ä½¿ç”¨å®ƒçš„äººå¼€æ”¾ï¼Œè€Œä¸æ˜¯å‘æ‰€æœ‰äººå¼€æ”¾ï¼Œæˆ–è®¸ä¹Ÿæ˜¯åˆç†çš„ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/31/ezm4jo9.png" alt="æ¸…åå¤§å­¦ä¾›æ¸¸å®¢å‡ºå…¥çš„è¥¿é—¨ï¼Œå›¾ç‰‡æ¥è‡ªç½‘ç»œ"></p><p>è¿‡å»å‡ åå¹´ï¼Œä¸­å›½çš„å¤§å­¦ä¹Ÿæ›¾ç»åƒå›½å¤–å¤§å­¦é‚£æ ·ï¼Œéšæ„è¿›å‡ºç”šè‡³æ²¡æœ‰å›´æ ã€‚<del>æ®è¯´æˆ‘çˆ¶äº²é‚£ä»£ä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œè‡ªè¡Œè½¦è¢«å·äº†ï¼Œé‚£å°±å·ä¸€è¾†æ¥ç€éª‘</del>ã€‚äººä»¬å¯ä»¥åˆ°æ•™å®¤é‡Œå¬è¯¾ï¼Œä¹Ÿå¯ä»¥æŠŠæ ¡å›­å½“å…¬å›­ä¸€æ ·ï¼Œæ˜¯é¥­åé›å¼¯çš„åœºæ‰€ã€‚</p><p>éšç€ç»æµå‘å±•ï¼Œæœ€é«˜çš„ä¸¤æ‰€å­¦åºœï¼Œæ¸…åå’ŒåŒ—å¤§ï¼Œå´æˆä¸ºäº†æ¸¸å®¢çš„é‡ç¾åŒºï¼Œæ‰€æœ‰ä»å…¨å›½å„åœ°æ¶Œåˆ°åŒ—äº¬çš„æ¸¸å®¢ï¼Œä¸€å®šè¦å¸¦ç€å­©å­æ¥åˆ°æ¸…åå’ŒåŒ—å¤§è¿™ä¸¤æ‰€æœ€é«˜å­¦åºœï¼Œå‘Šè¯‰å­©å­â€œè¿™æ˜¯ä½ æœªæ¥çš„æ¢¦æƒ³â€ã€‚ä½†åœ¨æˆ‘çœ‹æ¥ï¼Œæ¸…åŒ—çš„ç¡¬ä»¶æ—©å·²è½åæ–°åŠçš„æ°‘åŠå¤§å­¦ï¼Œè¿™äº›äººä¸­æœ€åçœŸçš„èƒ½è€ƒå…¥æ¸…åŒ—çš„äººä¹Ÿå¯¥å¯¥æ— å‡ ã€‚å¸¦ç€å…¨å®¶è€å°åˆ°è¿™é‡Œè½¬ä¸€åœˆåªæ˜¯ä¸ºäº†æ‰“å¡ï¼Œåˆ¶é€ äº†æ··ä¹±ä¸æ‹¥å µï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p><p>2023 å¹´ï¼Œä¼¼ä¹å¤§å­¦åœ¨é€æ­¥å¼€æ”¾ï¼Œä½†é™åˆ¶æå…¶ä¸¥æ ¼ï¼Œå‡ ä¹æ— æ³•æŠ¢åˆ°çš„é¢„çº¦ï¼Œæˆ–è€…æ ¡å†…æ•™å¸ˆéœ€è¦è¯·å¤–æ¥äººå‘˜è°ˆäº‹ï¼Œéƒ½éå¸¸éº»çƒ¦ã€‚æˆ‘æœ‰ä¸€æœ‹å‹æ˜¯åŒ—å¤§æ ¡å‹ï¼Œæ ¡åº†æ—¶ä¸€äººå¯ä»¥å¸¦ä¸‰ä¸ªäººè¿›å…¥ï¼Œç„¶ååœ¨æ ¡é—¨å£ä¸å¦»å­å’Œä¸‰ä¸ªå­©å­è¢«ä¿å®‰æ‹¦ä¸‹ï¼Œæ€’æ–¥ï¼šæˆ‘æŠŠè€å©†ç•™åœ¨å¤–é¢è¿˜æ˜¯ç•™ä¸€ä¸ªå­©å­åœ¨å¤–é¢ï¼Ÿè¿™æ ·çš„é™åˆ¶ä¼¼ä¹ä¹Ÿæœ‰å…¶ä¸åˆç†ä¹‹å¤„ã€‚</p><p>è€èƒ¡æ¢è®¿åŒ—äº¬å¤–å›½è¯­å¤§å­¦ï¼Œæåˆ°äº†ä¸€ä¸ªç»†èŠ‚ï¼š</p><blockquote><p>è¿›åˆ°ä¸»æ ¡åŒºä¹‹åï¼Œæˆ‘å…ˆåè¿›å…¥äº†æ•™å­¦ä¸»æ¥¼ã€ä½“è‚²é¦†ã€é£Ÿå ‚ï¼Œéƒ½æœªå—é˜»æ‹¦ï¼Œä¸éœ€åˆ·è¯ä»¶ï¼Œåªæœ‰åœ¨å›¾ä¹¦é¦†ï¼Œæˆ‘è¢«æ‹¦ä½ï¼Œéœ€è¦åˆ·æ ¡å†…è¯ä»¶æ‰èƒ½è¿›å…¥<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="èƒ¡é”¡è¿›. [è€èƒ¡ä»Šå¤©äº²èº«ç»å†äº†ï¼Œè¿™æ‰å«å¤§å­¦æ ¡å›­å¼€æ”¾](https://mp.weixin.qq.com/s/-WCo1FoM4gorVQyuquD4LA). 2023-12-30. [Archived](https://web.archive.org/web/20231231194901/https://mp.weixin.qq.com/s/-WCo1FoM4gorVQyuquD4LA) on 2023-12-31. Retrieved 2023-12-31.">[1]</span></a></sup>ã€‚</p></blockquote><p>æˆ‘è®¤ä¸ºï¼Œè¿™æ ·çš„æ–¹å¼æˆ–è®¸æ˜¯å¤§å­¦æ ¡å›­å¼€æ”¾çš„æœ€ç»ˆå½¢å¼ã€‚è®©å¤§å­¦çš„å…¬å…±åœºåˆèå…¥åŸå¸‚ç”Ÿæ´»ï¼Œè€Œæ•™å­¦åŒºåŸŸç•™ç»™å­¦ç”Ÿå’Œæ•™å¸ˆï¼Œè¿™æ ·çš„æ–¹å¼ï¼Œæˆ–è®¸æ˜¯æœ€å¥½çš„ã€‚åœ¨å›½å¤–ï¼Œå¾ˆå¤šå¤§å­¦ä¹Ÿåœ¨å®è¡Œç€è¿™æ ·çš„æ¨¡å¼ã€‚ä¾‹å¦‚å‰‘æ¡¥å¤§å­¦ï¼Œåè½åœ¨ä¸€ä¸ªç°æœ‰å¤§å­¦åæœ‰åŸçš„åŸå¸‚ï¼Œæ ¡å›­ä¸åŸå¸‚èä¸ºäº†ä¸€ä½“ï¼Œè€Œé‡è¦çš„æ•™å­¦åŒºåŸŸã€å®éªŒå®¤ã€å­¦ç”Ÿå®¿èˆã€å›¾ä¹¦é¦†åˆ™éœ€è¦é—¨ç¦åˆ·å¡è¿›å…¥ã€‚å³å¯ä»¥ä¿æŒå¼€æ”¾ï¼Œåˆèƒ½ä¿è¯å®‰å…¨ã€‚</p><p>æœ€åï¼Œæˆ‘æƒ³ç”¨è€èƒ¡çš„å‡ å¥è¯æ¥ç»“å°¾ï¼š</p><blockquote><p>è®©åœ¨æ ¡å¤§å­¦ç”Ÿä»¬åœ¨ä¸€ä¸ªå¼€æ”¾çš„ç¯å¢ƒä¸­åº¦è¿‡å¤§å­¦æ—¶ä»£ï¼Œä¹Ÿæ˜¯å¯¹ä»–ä»¬å¼€æ”¾ç²¾ç¥çš„æ— å½¢ç†é™¶å’Œå¼•å¯¼ã€‚å¦‚æœé‚£äº›å­¦ç”Ÿä»¬å°±è¯»çš„å¤§å­¦å¤–äººè¿›æ ¡é—¨è¦é¢„çº¦ç™»è®°ï¼Œæ˜¯ä¸€ä¸ªé«˜å¢™å›´èµ·æ¥å¤–äººè¿›å»å¾ˆä¸å®¹æ˜“çš„åœ°æ–¹ï¼ŒåŒæ ·ä¼šå½±å“ä»–ä»¬èµ°å‡ºæ ¡é—¨ä»¥åçš„ç¤¾ä¼šè§‚ã€å®‰å…¨è§‚ã€‚å¦‚æœå¤–äººè¿›æ¸…ååŒ—å¤§ä»æ­¤å˜å¾—å›°éš¾é‡é‡ï¼Œä¸€äº›å­©å­ä»¬ä»å¤–åœ°ä¸“é—¨èµ¶æ¥å´åªèƒ½åœ¨æ ¡é—¨å£æ‹ç…§æ‰“å¡ï¼Œè¿›éƒ½è¿›ä¸å»ï¼Œé‚£ä¹ˆæˆ‘å¾ˆæ‹…å¿ƒï¼Œè¿™ä¸€ä»£å­¦ç”Ÿèµ°å‘ç¤¾ä¼šä¹‹åï¼Œä¸­å›½å„åœ°çš„å›´å¢™å’Œä¿å®‰æœ‰å¯èƒ½ä¼šå˜å¾—è¶Šæ¥è¶Šå¤š<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="èƒ¡é”¡è¿›. [å¤§å­¦é¢„çº¦è¿›å…¥çœŸçš„å¿…è¦å—ï¼Ÿè¯šæœ›æ¸…ååŒ—å¤§ä¸ºå¼€æ”¾æ ¡å›­åšå‡ºè¡¨ç‡](https://mp.weixin.qq.com/s/Kt9awe83YFY-k1ySC0Z3YA). 2023-07-27. [Archived](https://web.archive.org/web/20231231195808/https://mp.weixin.qq.com/s/Kt9awe83YFY-k1ySC0Z3YA) on 2023-12-31. Retrieved 2023-12-31.">[2]</span></a></sup>ã€‚</p><p>åº”è¯¥è®©ç–«æƒ…ä»æˆ‘ä»¬è¿™å—åœŸåœ°ä¸ŠçœŸæ­£ç»“æŸï¼Œä¸è¦è®©å®ƒçš„åé—ç—‡æˆä¸ºä»Šåè¿™ä¸ªå›½å®¶ç»æµç¤¾ä¼šå‘å±•çš„ä¸€ä¸ªé˜´å½±<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="èƒ¡é”¡è¿›. [å¤§å­¦é¢„çº¦è¿›å…¥çœŸçš„å¿…è¦å—ï¼Ÿè¯šæœ›æ¸…ååŒ—å¤§ä¸ºå¼€æ”¾æ ¡å›­åšå‡ºè¡¨ç‡](https://mp.weixin.qq.com/s/Kt9awe83YFY-k1ySC0Z3YA). 2023-07-27. [Archived](https://web.archive.org/web/20231231195808/https://mp.weixin.qq.com/s/Kt9awe83YFY-k1ySC0Z3YA) on 2023-12-31. Retrieved 2023-12-31.">[2]</span></a></sup>ã€‚</p><p>æ­£å¸¸ç§©åºä¸‹çš„å¼€æ”¾ä¸å®½æ¾åº”å½“æ˜¯ç–«æƒ…åæˆ‘ä»¬å¤§å®¶å…±åŒåŠªåŠ›è¥é€ çš„ç¤¾ä¼šå¤§æ°›å›´<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="èƒ¡é”¡è¿›. [è€èƒ¡ä»Šå¤©äº²èº«ç»å†äº†ï¼Œè¿™æ‰å«å¤§å­¦æ ¡å›­å¼€æ”¾](https://mp.weixin.qq.com/s/-WCo1FoM4gorVQyuquD4LA). 2023-12-30. [Archived](https://web.archive.org/web/20231231194901/https://mp.weixin.qq.com/s/-WCo1FoM4gorVQyuquD4LA) on 2023-12-31. Retrieved 2023-12-31.">[1]</span></a></sup>ã€‚</p></blockquote><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>èƒ¡é”¡è¿›. <a href="https://mp.weixin.qq.com/s/-WCo1FoM4gorVQyuquD4LA">è€èƒ¡ä»Šå¤©äº²èº«ç»å†äº†ï¼Œè¿™æ‰å«å¤§å­¦æ ¡å›­å¼€æ”¾</a>. 2023-12-30. <a href="https://web.archive.org/web/20231231194901/https://mp.weixin.qq.com/s/-WCo1FoM4gorVQyuquD4LA">Archived</a> on 2023-12-31. Retrieved 2023-12-31.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>èƒ¡é”¡è¿›. <a href="https://mp.weixin.qq.com/s/Kt9awe83YFY-k1ySC0Z3YA">å¤§å­¦é¢„çº¦è¿›å…¥çœŸçš„å¿…è¦å—ï¼Ÿè¯šæœ›æ¸…ååŒ—å¤§ä¸ºå¼€æ”¾æ ¡å›­åšå‡ºè¡¨ç‡</a>. 2023-07-27. <a href="https://web.archive.org/web/20231231195808/https://mp.weixin.qq.com/s/Kt9awe83YFY-k1ySC0Z3YA">Archived</a> on 2023-12-31. Retrieved 2023-12-31.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æ‚è°ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤§å­¦</tag>
      
      <tag>æ ¡å›­</tag>
      
      <tag>èƒ¡é”¡è¿›</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TimescaleDB + Spring Data JPA Integration</title>
    <link href="/en/2023/12/a11bfb4ae60b/"/>
    <url>/en/2023/12/a11bfb4ae60b/</url>
    
    <content type="html"><![CDATA[<blockquote><p>This article introduces how to integrate TimescaleDB in Spring Data JPA.</p></blockquote><span id="more"></span><h2 id="Basic-Requirements"><a href="#Basic-Requirements" class="headerlink" title="Basic Requirements"></a>Basic Requirements</h2><p>You need to configure the TimescaleDB database, Spring Boot 3, and Spring Data JPA.</p><h2 id="Key-Issue"><a href="#Key-Issue" class="headerlink" title="Key Issue"></a>Key Issue</h2><p>Spring Data JPA will automatically create database tables, but it cannot automatically create the hypertable required by TimescaleDB, so it needs to be created manually. We want to programmatically allow the application to automatically create hypertables.</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>The original version of this solution is my answer on Stack Overflow: <a href="https://stackoverflow.com/a/77729927/19420247">timescaledb with spring data jpa</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Andy Zhang. [timescaledb with spring data jpa](https://stackoverflow.com/a/77729927/19420247). 2023-12-29. [Archived](https://web.archive.org/web/20231229220352/https://stackoverflow.com/questions/71329742/timescaledb-with-spring-data-jpa/77729927#77729927) on 2023-12-29. Retrieved 2023-12-29.">[1]</span></a></sup>.</p><h3 id="TimescaleTable-Annotation"><a href="#TimescaleTable-Annotation" class="headerlink" title="@TimescaleTable Annotation"></a>@TimescaleTable Annotation</h3><p>We can use the <code>@TimescaleTable</code> annotation to mark the Timescale table, and then find the entity class marked with the <code>@TimescaleTable</code> annotation when the application starts, and create the hypertable.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> TimescaleTable &#123;<br>    String <span class="hljs-title function_">tableName</span><span class="hljs-params">()</span>;<br><br>    String <span class="hljs-title function_">timeColumnName</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Scan-and-Create-Hypertables"><a href="#Scan-and-Create-Hypertables" class="headerlink" title="Scan and Create Hypertables"></a>Scan and Create Hypertables</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> jakarta.annotation.PostConstruct;<br><span class="hljs-keyword">import</span> jakarta.persistence.EntityManager;<br><span class="hljs-keyword">import</span> jakarta.persistence.metamodel.EntityType;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimescaleTableInitializer</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EntityManager entityManager;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createHypertable</span><span class="hljs-params">(String tableName, String timeColumnName)</span> &#123;<br>        entityManager<br>                .createNativeQuery(String.format(<br>                        <span class="hljs-string">&quot;SELECT create_hypertable(&#x27;%s&#x27;,&#x27;%s&#x27;, if_not_exists =&gt; TRUE);&quot;</span>,<br>                        tableName,<br>                        timeColumnName<br>                ))<br>                .getResultList();<br>    &#125;<br><br>    <span class="hljs-meta">@PostConstruct</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// get all entities</span><br>        Set&lt;EntityType&lt;?&gt;&gt; entities = entityManager.getMetamodel().getEntities();<br><br>        <span class="hljs-comment">// for each entity</span><br>        <span class="hljs-keyword">for</span> (EntityType&lt;?&gt; entity : entities) &#123;<br>            <span class="hljs-comment">// get entity class</span><br>            Class&lt;?&gt; javaType = entity.getJavaType();<br><br>            <span class="hljs-comment">// check of TimescaleTable annotation</span><br>            <span class="hljs-keyword">if</span> (javaType.isAnnotationPresent(TimescaleTable.class)) &#123;<br>                <span class="hljs-comment">// get metadata from annotation</span><br>                <span class="hljs-type">TimescaleTable</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> javaType.getAnnotation(TimescaleTable.class);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> annotation.tableName();<br>                <span class="hljs-type">String</span> <span class="hljs-variable">timeColumnName</span> <span class="hljs-operator">=</span> annotation.timeColumnName();<br><br>                <span class="hljs-comment">// create hypertable</span><br>                createHypertable(tableName, timeColumnName);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Use-TimescaleTable-Annotation"><a href="#Use-TimescaleTable-Annotation" class="headerlink" title="Use @TimescaleTable Annotation"></a>Use @TimescaleTable Annotation</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.Serializable;<br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><br><span class="hljs-keyword">import</span> lombok.*;<br><span class="hljs-keyword">import</span> jakarta.persistence.*;<br><br><span class="hljs-keyword">import</span> ***.app.config.timescaledb.TimescaleTable;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Builder</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@Entity</span><br><span class="hljs-meta">@Table(name = SensorData.TABLE_NAME)</span><br><span class="hljs-meta">@TimescaleTable(tableName = SensorData.TABLE_NAME, timeColumnName = SensorData.TIME_COLUMN_NAME)</span><br><span class="hljs-meta">@IdClass(SensorData.SensorDataID.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SensorData</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TABLE_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;sensor_data&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TIME_COLUMN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;time&quot;</span>;<br><br>    <span class="hljs-meta">@Data</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SensorDataID</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>        <span class="hljs-keyword">private</span> Integer id;<br>        <span class="hljs-keyword">private</span> LocalDateTime time;<br>    &#125;<br><br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><br>    <span class="hljs-keyword">private</span> Integer id;<br><br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-meta">@Column(name = TIME_COLUMN_NAME, nullable = false)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime time;<br><br>    <span class="hljs-meta">@Column(nullable = false)</span><br>    <span class="hljs-keyword">private</span> String sensor;<br><br>    <span class="hljs-meta">@Column(nullable = false)</span><br>    <span class="hljs-keyword">private</span> String data;<br>&#125;<br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Andy Zhang. <a href="https://stackoverflow.com/a/77729927/19420247">timescaledb with spring data jpa</a>. 2023-12-29. <a href="https://web.archive.org/web/20231229220352/https://stackoverflow.com/questions/71329742/timescaledb-with-spring-data-jpa/77729927#77729927">Archived</a> on 2023-12-29. Retrieved 2023-12-29.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>åç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Spring Boot</tag>
      
      <tag>Java</tag>
      
      <tag>Spring Data JPA</tag>
      
      <tag>PostgreSQL</tag>
      
      <tag>TimescaleDB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TimescaleDB + Spring Data JPA æ•´åˆ</title>
    <link href="/zh-CN/2023/12/a11bfb4ae60b/"/>
    <url>/zh-CN/2023/12/a11bfb4ae60b/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨ Spring Data JPA ä¸­æ•´åˆ TimescaleDBã€‚</p></blockquote><span id="more"></span><h2 id="åŸºç¡€è¦æ±‚"><a href="#åŸºç¡€è¦æ±‚" class="headerlink" title="åŸºç¡€è¦æ±‚"></a>åŸºç¡€è¦æ±‚</h2><p>æ‚¨éœ€è¦é…ç½®å¥½ TimescaleDB æ•°æ®åº“ï¼Œä»¥åŠ Spring Boot 3 + Spring Data JPAã€‚</p><h2 id="å…³é”®é—®é¢˜"><a href="#å…³é”®é—®é¢˜" class="headerlink" title="å…³é”®é—®é¢˜"></a>å…³é”®é—®é¢˜</h2><p>Spring Data JPA ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œä½†æ˜¯æ— æ³•è‡ªåŠ¨åˆ›å»º TimescaleDB éœ€è¦çš„è¶…çº§è¡¨ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨åˆ›å»ºã€‚æˆ‘ä»¬å¸Œæœ›ä»¥ç¼–ç¨‹æ–¹å¼è®©åº”ç”¨å¯ä»¥è‡ªåŠ¨åˆ›å»ºè¶…çº§è¡¨ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>è¯¥æ–¹æ¡ˆçš„åŸå§‹ç‰ˆæœ¬æ˜¯æˆ‘åœ¨ Stack Overflow çš„å›ç­”ï¼š<a href="https://stackoverflow.com/a/77729927/19420247">timescaledb with spring data jpa</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Andy Zhang. [timescaledb with spring data jpa](https://stackoverflow.com/a/77729927/19420247). 2023-12-29. [Archived](https://web.archive.org/web/20231229220352/https://stackoverflow.com/questions/71329742/timescaledb-with-spring-data-jpa/77729927#77729927) on 2023-12-29. Retrieved 2023-12-29.">[1]</span></a></sup>ã€‚</p><h3 id="TimescaleTable-æ³¨è§£"><a href="#TimescaleTable-æ³¨è§£" class="headerlink" title="@TimescaleTable æ³¨è§£"></a>@TimescaleTable æ³¨è§£</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>@TimescaleTable</code> æ³¨è§£æ¥æ ‡è®° Timescale è¡¨ï¼Œç„¶ååœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼Œæ‰¾åˆ°æ ‡è®°äº† <code>@TimescaleTable</code> æ³¨è§£çš„å®ä½“ç±»ï¼Œåˆ›å»ºè¶…çº§è¡¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> TimescaleTable &#123;<br>    String <span class="hljs-title function_">tableName</span><span class="hljs-params">()</span>;<br><br>    String <span class="hljs-title function_">timeColumnName</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ‰«æå¹¶åˆ›å»ºè¶…çº§è¡¨"><a href="#æ‰«æå¹¶åˆ›å»ºè¶…çº§è¡¨" class="headerlink" title="æ‰«æå¹¶åˆ›å»ºè¶…çº§è¡¨"></a>æ‰«æå¹¶åˆ›å»ºè¶…çº§è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> jakarta.annotation.PostConstruct;<br><span class="hljs-keyword">import</span> jakarta.persistence.EntityManager;<br><span class="hljs-keyword">import</span> jakarta.persistence.metamodel.EntityType;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimescaleTableInitializer</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EntityManager entityManager;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createHypertable</span><span class="hljs-params">(String tableName, String timeColumnName)</span> &#123;<br>        entityManager<br>                .createNativeQuery(String.format(<br>                        <span class="hljs-string">&quot;SELECT create_hypertable(&#x27;%s&#x27;,&#x27;%s&#x27;, if_not_exists =&gt; TRUE);&quot;</span>,<br>                        tableName,<br>                        timeColumnName<br>                ))<br>                .getResultList();<br>    &#125;<br><br>    <span class="hljs-meta">@PostConstruct</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// get all entities</span><br>        Set&lt;EntityType&lt;?&gt;&gt; entities = entityManager.getMetamodel().getEntities();<br><br>        <span class="hljs-comment">// for each entity</span><br>        <span class="hljs-keyword">for</span> (EntityType&lt;?&gt; entity : entities) &#123;<br>            <span class="hljs-comment">// get entity class</span><br>            Class&lt;?&gt; javaType = entity.getJavaType();<br><br>            <span class="hljs-comment">// check of TimescaleTable annotation</span><br>            <span class="hljs-keyword">if</span> (javaType.isAnnotationPresent(TimescaleTable.class)) &#123;<br>                <span class="hljs-comment">// get metadata from annotation</span><br>                <span class="hljs-type">TimescaleTable</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> javaType.getAnnotation(TimescaleTable.class);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> annotation.tableName();<br>                <span class="hljs-type">String</span> <span class="hljs-variable">timeColumnName</span> <span class="hljs-operator">=</span> annotation.timeColumnName();<br><br>                <span class="hljs-comment">// create hypertable</span><br>                createHypertable(tableName, timeColumnName);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-TimescaleTable-æ³¨è§£"><a href="#ä½¿ç”¨-TimescaleTable-æ³¨è§£" class="headerlink" title="ä½¿ç”¨ @TimescaleTable æ³¨è§£"></a>ä½¿ç”¨ @TimescaleTable æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.Serializable;<br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><br><span class="hljs-keyword">import</span> lombok.*;<br><span class="hljs-keyword">import</span> jakarta.persistence.*;<br><br><span class="hljs-keyword">import</span> ***.app.config.timescaledb.TimescaleTable;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Builder</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@Entity</span><br><span class="hljs-meta">@Table(name = SensorData.TABLE_NAME)</span><br><span class="hljs-meta">@TimescaleTable(tableName = SensorData.TABLE_NAME, timeColumnName = SensorData.TIME_COLUMN_NAME)</span><br><span class="hljs-meta">@IdClass(SensorData.SensorDataID.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SensorData</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TABLE_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;sensor_data&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TIME_COLUMN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;time&quot;</span>;<br><br>    <span class="hljs-meta">@Data</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SensorDataID</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>        <span class="hljs-keyword">private</span> Integer id;<br>        <span class="hljs-keyword">private</span> LocalDateTime time;<br>    &#125;<br><br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><br>    <span class="hljs-keyword">private</span> Integer id;<br><br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-meta">@Column(name = TIME_COLUMN_NAME, nullable = false)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime time;<br><br>    <span class="hljs-meta">@Column(nullable = false)</span><br>    <span class="hljs-keyword">private</span> String sensor;<br><br>    <span class="hljs-meta">@Column(nullable = false)</span><br>    <span class="hljs-keyword">private</span> String data;<br>&#125;<br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Andy Zhang. <a href="https://stackoverflow.com/a/77729927/19420247">timescaledb with spring data jpa</a>. 2023-12-29. <a href="https://web.archive.org/web/20231229220352/https://stackoverflow.com/questions/71329742/timescaledb-with-spring-data-jpa/77729927#77729927">Archived</a> on 2023-12-29. Retrieved 2023-12-29.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>åç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Spring Boot</tag>
      
      <tag>Java</tag>
      
      <tag>Spring Data JPA</tag>
      
      <tag>PostgreSQL</tag>
      
      <tag>TimescaleDB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Boot 3 Request Tracing</title>
    <link href="/en/2023/12/2e66e27724a7/"/>
    <url>/en/2023/12/2e66e27724a7/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Traditional Spring Cloud Sleuth<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Spring Cloud Sleuth](https://github.com/spring-cloud/spring-cloud-sleuth). spring-cloud. [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20231224134733/https://github.com/spring-cloud/spring-cloud-sleuth)äº2023-12-24ï¼‰">[1]</span></a></sup> tracing is no longer applicable to Spring Boot 3. This article will introduce how to configure Micrometer to trace requests in Spring Boot 3.</p></blockquote><span id="more"></span><p>After Spring Boot 3 is updated, <a href="https://github.com/spring-cloud/spring-cloud-sleuth">Spring Cloud Sleuth</a> indicates that it is no longer supported<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Spring Cloud Sleuth](https://github.com/spring-cloud/spring-cloud-sleuth). spring-cloud. [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20231224134733/https://github.com/spring-cloud/spring-cloud-sleuth)äº2023-12-24ï¼‰">[1]</span></a></sup>, it is need to be migrated to <a href="https://micrometer.io/">Micrometer</a>.</p><h2 id="Add-Dependency"><a href="#Add-Dependency" class="headerlink" title="Add Dependency"></a>Add Dependency</h2><p>In order to trace requests in Spring Boot 3, we need to add the following dependency in <code>build.gradle</code>:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-tracing-bridge-brave<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> <br></code></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">implementation <span class="hljs-string">&quot;io.micrometer:micrometer-tracing-bridge-brave&quot;</span><br></code></pre></td></tr></table></figure><h2 id="Configure-Log-Pattern"><a href="#Configure-Log-Pattern" class="headerlink" title="Configure Log Pattern"></a>Configure Log Pattern</h2><p>After Spring Boot 3.2, Spring Boot will automatically configure the log format. If the version is lower than 3.2, manual configuration is required.</p><p>Refer to the <a href="https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide#log-pattern">Spring Cloud Sleuth 3.1 Migration Guide</a>, add the following configuration in <code>application.properties</code>:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">logging.pattern.level</span>=<span class="hljs-string">%5p [$&#123;spring.application.name:&#125;,%X&#123;traceId:-&#125;,%X&#123;spanId:-&#125;]</span><br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://github.com/spring-cloud/spring-cloud-sleuth">Spring Cloud Sleuth</a>. spring-cloud. [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20231224134733/https://github.com/spring-cloud/spring-cloud-sleuth">å­˜æ¡£</a>äº2023-12-24ï¼‰<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide">Spring Cloud Sleuth 3.1 Migration Guide</a>. micrometer-metrics. 2023-09-07 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20231224135002/https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide">å­˜æ¡£</a>äº2023-12-24ï¼‰<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>åç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Spring Boot</tag>
      
      <tag>Java</tag>
      
      <tag>Spring Cloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Boot 3 è¯·æ±‚è¿½è¸ª</title>
    <link href="/zh-CN/2023/12/2e66e27724a7/"/>
    <url>/zh-CN/2023/12/2e66e27724a7/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä¼ ç»Ÿçš„ Spring Cloud Sleuth<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Spring Cloud Sleuth](https://github.com/spring-cloud/spring-cloud-sleuth). spring-cloud. [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20231224134733/https://github.com/spring-cloud/spring-cloud-sleuth)äº2023-12-24ï¼‰">[1]</span></a></sup> è¿½è¸ªå·²ç»ä¸é€‚ç”¨äº Spring Boot 3ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ Spring Boot 3 ä¸­é…ç½® Micrometer è¿½è¸ªè¯·æ±‚ã€‚</p></blockquote><span id="more"></span><p>Spring Boot 3 æ›´æ–°åï¼Œ<a href="https://github.com/spring-cloud/spring-cloud-sleuth">Spring Cloud Sleuth</a> è¡¨ç¤ºä¸å†æ”¯æŒ<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Spring Cloud Sleuth](https://github.com/spring-cloud/spring-cloud-sleuth). spring-cloud. [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20231224134733/https://github.com/spring-cloud/spring-cloud-sleuth)äº2023-12-24ï¼‰">[1]</span></a></sup>ï¼Œè€Œæ˜¯è¿ç§»åˆ° <a href="https://micrometer.io/">Micrometer</a>ã€‚</p><h2 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h2><p>ä¸ºäº†åœ¨ Spring Boot 3 ä¸­è¿½è¸ªè¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>build.gradle</code> ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-tracing-bridge-brave<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> <br></code></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">implementation <span class="hljs-string">&quot;io.micrometer:micrometer-tracing-bridge-brave&quot;</span><br></code></pre></td></tr></table></figure><h2 id="é…ç½®æ—¥å¿—æ ¼å¼"><a href="#é…ç½®æ—¥å¿—æ ¼å¼" class="headerlink" title="é…ç½®æ—¥å¿—æ ¼å¼"></a>é…ç½®æ—¥å¿—æ ¼å¼</h2><p>Spring Boot 3.2 ä¹‹åï¼ŒSpring Boot å°†ä¼šè‡ªåŠ¨é…ç½®æ—¥å¿—æ ¼å¼ï¼Œè‹¥ç‰ˆæœ¬ä½äº 3.2ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ã€‚</p><p>å‚è€ƒ <a href="https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide#log-pattern">Spring Cloud Sleuth 3.1 Migration Guide</a>ï¼Œåœ¨ <code>application.properties</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">logging.pattern.level</span>=<span class="hljs-string">%5p [$&#123;spring.application.name:&#125;,%X&#123;traceId:-&#125;,%X&#123;spanId:-&#125;]</span><br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://github.com/spring-cloud/spring-cloud-sleuth">Spring Cloud Sleuth</a>. spring-cloud. [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20231224134733/https://github.com/spring-cloud/spring-cloud-sleuth">å­˜æ¡£</a>äº2023-12-24ï¼‰<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide">Spring Cloud Sleuth 3.1 Migration Guide</a>. micrometer-metrics. 2023-09-07 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20231224135002/https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide">å­˜æ¡£</a>äº2023-12-24ï¼‰<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>åç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Spring Boot</tag>
      
      <tag>Java</tag>
      
      <tag>Spring Cloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æµ…è°ˆåŸºäºåœ¨çº¿ Git çš„çˆ±å¥½ç¤¾åŒºå›°å¢ƒ</title>
    <link href="/zh-CN/2023/12/9a7469cbe8a1/"/>
    <url>/zh-CN/2023/12/9a7469cbe8a1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>éšç€ç»æµå’Œç¤¾ä¼šå‘å±•ã€ç”Ÿæ´»æ°´å¹³æé«˜ã€ç²¾ç¥æ–‡åŒ–éœ€æ±‚æ›´åŠ ä¸°å¯Œå¤šå½©ï¼Œäººä»¬é€æ¸å½¢æˆå…·æœ‰ç›¸åŒçˆ±å¥½çš„æ•°å­—ç¤¾åŒºã€‚è€Œåœ¨çº¿ Git å¦‚ GitHub é€æ¸æˆä¸ºäº†è¿™äº›ç¤¾åŒºçš„å¹³å°é€‰æ‹©ï¼Œå®ƒèƒ½æä¾›æ–¹ä¾¿çš„ååŒäº¤äº’å’Œæ ‡è®°è¯­è¨€çš„æ–‡æ¡£æ’°å†™åŠŸèƒ½ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘ä¼ ç»Ÿè®ºå›çš„ç»´æŠ¤æˆæœ¬ã€‚ä½†æ˜¯ï¼Œè¿™äº›ç¤¾åŒºä¹Ÿé¢ä¸´ç€ä¸€äº›å›°å¢ƒï¼Œæœ¬æ–‡å°†åŸºäºä¸€ä¸ªè¿è½¬è¶… 6 å¹´çš„ç¤¾åŒºå’Œä¸€ä¸ªæ–°å»ºç¤¾åŒºçš„ç°å®æƒ…å†µï¼Œæµ…è°ˆåŸºäºåœ¨çº¿ Git çš„çˆ±å¥½ç¤¾åŒºå›°å¢ƒã€‚</p></blockquote><span id="more"></span><p>æ˜¨å¤©çœ‹åˆ°ä¸€ä¸ªè§†é¢‘ï¼Œã€Š<a href="https://www.bilibili.com/video/BV1MC4y1D7jQ/">åŸºäºGiteaçš„çº¢çŸ³æ•°ç”µç´¢å¼•</a>ã€‹<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[åŸºäºGiteaçš„çº¢çŸ³æ•°ç”µç´¢å¼•](https://www.bilibili.com/video/BV1MC4y1D7jQ/). shenjack_. 2023-12-23 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20231224110755/https://www.bilibili.com/video/BV1MC4y1D7jQ/)äº2023-12-24ï¼‰">[1]</span></a></sup>ã€‚è¿™ä¸ªè§†é¢‘è®²çš„æ˜¯ä¸€ä¸ªåŸºäº Gitea çš„çˆ±å¥½ç¤¾åŒºï¼Œä½¿ç”¨ Gitea ä½œä¸ºåœ¨çº¿ Gitï¼ŒååŒç¼–è¾‘å’Œç»´æŠ¤çº¢çŸ³æ•°ç”µçš„æŠ€æœ¯æ–‡æ¡£å’ŒåŸºç¡€ç»„ä»¶ï¼Œä»¥åŠç¤¾åŒºçš„ä¸€äº›è§„åˆ™å’ŒæŒ‡å—ã€‚è¿™ä¸ªç¤¾åŒºæ˜¯æ–°å»ºçš„ï¼Œä¸€å¼€å§‹é€‰æ‹©ä½¿ç”¨å¯ä»¥åœ¨çº¿ååŒç¼–è¾‘çš„è…¾è®¯æ–‡æ¡£ï¼Œä½†ä¼¼ä¹æ˜¯è¿™ä½é«˜çº§æˆå‘˜æå‡ºä½¿ç”¨ Gitea ä½œä¸ºç¤¾åŒºå¹³å°ï¼Œå› ä¸ºè…¾è®¯æ–‡æ¡£ä»…æä¾›äº†ååŒç¼–è¾‘åŠŸèƒ½ï¼Œä½†å½“å†…å®¹åºå¤§åå°†æ— æ³•å®ç°æ‰€éœ€åŠŸèƒ½ï¼Œä¸”æƒé™ç®¡ç†å¹¶ä¸æ–¹ä¾¿ï¼Œè€Œä¸” Gitea ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¯ä»¥ç§æœ‰åŒ–ç¤¾åŒºæ•°æ®ã€‚</p><p>è¿™å¾ˆå®¹æ˜“è®©äººè”æƒ³åˆ° CFPA ç¤¾åŒºï¼Œé…’çŸ³é…¸èŒäº 2017 å¹´åˆ›ç«‹çš„ä¸€ä¸ª MC æ¨¡ç»„å’Œæ•´åˆåŒ…ç¿»è¯‘ç¤¾åŒºï¼Œæœ€æ—©åœ¨ GitHub åŸºäº PR æ”¶é›†ç¤¾åŒºè´¡çŒ®ï¼Œåæ¥å¼•å…¥äº† Weblate å¹³å°å®ç°è‡ªåŠ¨ç®¡ç† Gitï¼Œé¿å…äº†å­¦ä¹ æˆæœ¬ï¼Œåœ¨ä¹‹åèˆå¼ƒäº† Weblate å¹³å°ï¼Œåªä¿ç•™äº† GitHub + PR çš„æ¨¡å¼ï¼ŒåŒæ—¶é€šè¿‡ GitHub Actions å®ç°äº†éƒ¨åˆ†æµç¨‹çš„è‡ªåŠ¨åŒ–ç®¡ç†ã€‚</p><p>è¿™ç±»åŸºäºåœ¨çº¿ Git çš„ç¤¾åŒºè¿è½¬æ ¸å¿ƒé€»è¾‘æ˜¯ï¼Œç¤¾åŒºæˆå‘˜æäº¤ PR è´¡çŒ®å·¥ä½œå’Œå‚ä¸ç¤¾åŒºå»ºè®¾ï¼Œç¤¾åŒºçš„ç®¡ç†å‘˜ä¼šè´Ÿè´£å®¡æ ¸ã€ç»´æŠ¤ã€æµç¨‹æ€§å·¥ä½œã€‚è€Œ Issue åŠŸèƒ½ä¹Ÿæä¾›äº†åŒè¯é¢˜è®¨è®ºçš„å¹³å°ï¼Œç›¸å½“äºä¼ ç»Ÿçš„é‚®ä»¶åŠŸèƒ½ï¼Œç›¸å…³äººå‘˜å¯ä»¥åœ¨åŒä¸€ä¸ªè¯é¢˜ä¸‹é›†ä¸­è®¨è®ºåŒä¸€ä¸ªé—®é¢˜ã€‚è¿™æ ·å¯ä»¥é¿å…å¼€å‘è‡ªç”±å¹³å°æˆ–è®ºå›çš„æˆæœ¬ï¼Œä¹Ÿå¯ä»¥èŠ‚çº¦ä¸€å®šçš„åˆ¶åº¦çº¦å®šæˆæœ¬ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ç±»ç¤¾åŒºä¹Ÿé¢ä¸´ç€å‡ ç‚¹å›°å¢ƒã€‚</p><ol><li>æ–‡æ¡£ç¹çã€‚ç¤¾åŒºéœ€è¦å¤§é‡ç¹æ‚çš„æ–‡æ¡£ç»´æŒç§©åºï¼Œå¾€å¾€éœ€è¦å¤§é‡çš„è®¨è®ºä¸æ–­æ›´æ–°åˆ¶åº¦æ–‡æ¡£ã€‚è€Œåˆ†ç±»æ•´ç†è¿™äº›æ–‡æ¡£ï¼Œä½¿ç”¨åŒæ ·çš„é£æ ¼å’Œæ ·å¼ï¼Œä¹Ÿéœ€è¦å¤§é‡çš„å·¥ä½œã€‚æœ‰äº›ç¤¾åŒºç”šè‡³ä¼šé™·å…¥åˆ¶åº¦è®¾è®¡çš„ç˜¾ã€‚</li><li>äººåŠ›æˆæœ¬é«˜ã€‚è¿™äº›æµç¨‹éœ€è¦äººå·¥ç¡®ä¿æ‰§è¡Œï¼Œè¿˜éœ€è¦é¿å…äº‰è®®ï¼Œé•¿æœŸä»¥æ¥éœ€è¦ç¤¾åŒºæ ¸å¿ƒç»´æŠ¤è€…é¢‘ç¹æŠ•å…¥å¤§é‡æ—¶é—´ï¼ŒæŒ¤å‹ä¸ªäººç”Ÿæ´»å’Œå·¥ä½œã€‚å°½ç®¡è¿‘å¹´æ¥éšç€ GitHub Actions ç­‰è‡ªåŠ¨åŒ–å·¥å…·çš„å‡ºç°å¯ä»¥èŠ‚çº¦ä¸€äº›äººåŠ›æˆæœ¬ï¼Œä½†è¿™äº›å·¥å…·çš„å¼€å‘å’Œéšç€åˆ¶åº¦å˜æ›´çš„ç»´æŠ¤æœ¬èº«å°±æ˜¯å·¨å¤§çš„æˆæœ¬ã€‚</li><li>å‚ä¸é—¨æ§›é«˜ã€‚å‚ä¸è¿™äº›ç¤¾åŒºçš„è´¡çŒ®å¾€å¾€éœ€è¦å­¦ä¹ ä½¿ç”¨ GitHub æˆ– Gitea è¿™æ ·çš„è®¡ç®—æœºé¢†åŸŸä¸“ä¸šå¹³å°ï¼Œç”šè‡³å¯¹æŸäº›åŒºåŸŸçš„ç”¨æˆ·è¿˜ä¼šå­˜åœ¨å¯è®¿é—®æ€§é—®é¢˜ã€‚è€Œä¸”å¾€å¾€éœ€è¦å­¦ä¹ æ ‡è®°æ€§è¯­è¨€çš„è¯­æ³•ä»¥æ’°å†™æ–‡æ¡£ï¼Œå¹¶èŠ±è´¹å¤§é‡çš„æ—¶é—´ç¡®ä¿è‡ªå·±æ’°å†™çš„æ–‡æ¡£ç¬¦åˆä¸æ–­å˜åŒ–çš„è§„èŒƒã€‚è€Œè§„èŒƒæ–‡æ¡£ç»å¸¸æ›´æ–°ä¸åŠæ—¶æˆ–ç¼ºå°‘ç»†èŠ‚ï¼Œè´¡çŒ®è€…éœ€è¦ä»ä»–äººçš„æ ·ä¾‹ä¸­å­¦ä¹ ï¼Œé€‚åº”å¤šæ¬¡åæ‰èƒ½æäº¤ç¬¦åˆè¦æ±‚çš„å·¥ä½œã€‚è¿™äº›é—¨æ§›é€ å°±äº†å‚ä¸è€…å¾ˆéš¾å°†å¤§éƒ¨åˆ†çš„ç²¾åŠ›æ”¾åœ¨è´¡çŒ®æœ¬èº«ï¼Œè€Œæ˜¯é™·å…¥äº†åˆ¶åº¦çš„æ²¼æ³½ã€‚</li><li>æƒè´£ä¸æ˜ï¼Œå‡ºç°äº‰è®®æ— æ³•æœ‰æ•ˆè§£å†³ã€‚è¿™äº›ç¤¾åŒºçš„æ ¸å¿ƒç»´æŠ¤è€…å¾€å¾€æ˜¯ç¤¾åŒºçš„åˆ›å§‹äººï¼Œä½†éšç€ç¤¾åŒºå‘å±•å£®å¤§ï¼Œæœ‰äº›åˆ†æ­§å¯èƒ½ä¼šéš¾ä»¥è§£å†³ï¼Œæœ€åé€ æˆç¤¾åŒºçš„åˆ†è£‚ã€‚è€Œä¸”éšç€æ ¸å¿ƒç»´æŠ¤è€…å› ä¸ºä¸ªäººåŸå› ç¦»å¼€ç¤¾åŒºæˆ–æ²¡æœ‰ç²¾åŠ›ç»´æŠ¤ï¼Œä»–ç•™ä¸‹æ¥çš„è´£ä»»å°†è¢«æç½®ï¼Œç”±äºç¼ºå°‘ç»´æŠ¤å½¢æˆé•¿æœŸçš„ç´¯èµ˜ã€‚è¿™ä¹Ÿä¼šåè¿‡æ¥ç»‘æ¶æ ¸å¿ƒå‚ä¸è€…ï¼Œè®©äººä»¬æœ›è€Œå´æ­¥ä¸æ•¢å‚ä¸å¤ªå¤šï¼Œå¯¼è‡´ç¤¾åŒºæ— æ³•çœŸæ­£æˆä¸ºç¤¾åŒºã€‚</li><li>å†…éƒ¨ä¸å¤–éƒ¨çŸ›ç›¾ã€‚éšç€æ—¶é—´å‘å±•ï¼Œéš¾å…ä¼šå‡ºç°å†²çªå’ŒçŸ›ç›¾ã€‚å†…éƒ¨çŸ›ç›¾å¯èƒ½è¿˜å¥½æ¶ˆåŒ–ï¼Œè€Œå¤–éƒ¨çŸ›ç›¾å¯èƒ½ä¼šæˆä¸ºç¤¾åŒºåˆ†è£‚æˆ–ç“¦è§£çš„å¯¼ç«ç´¢ï¼Œä¾‹å¦‚ CFPA çš„<a href="https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/pull/1536">çº³å¤¸è¾¾</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[[è®¨è®º] çº³å¤¸è¾¾](https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/pull/1536). WuzgXY-GitHub. 2022-02-15 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20231224130456/https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/pull/1536)äº2023-12-24ï¼‰">[2]</span></a></sup>äº‹ä»¶ï¼ŒçœŸæ­£æƒ³è¦è®¨è®ºé—®é¢˜æœ¬èº«çš„äººï¼Œæƒ³è¦ä½œå‡ºè´¡çŒ®çš„äººï¼Œè¢«èˆ†è®ºè£¹æŒŸã€ç£¨å¹³äº†çƒ­æƒ…ï¼Œæœ€ç»ˆé»¯ç„¶ç¦»åœºã€‚</li><li>å¤–å›´è´¡çŒ®ç§¯å‹ã€‚è¿™äº›ç¤¾åŒºå¾€å¾€æ˜¯å¼€æ”¾çš„ï¼Œä½†æ¥å—å¤–éƒ¨è´¡çŒ®åˆ™æ„å‘³ç€ä¸ç¡®å®šæ€§ã€‚CFPA å°±å› æ­¤é¢ä¸´äº†å¤§é‡ PR æäº¤è€…æ— å“åº”ï¼Œæœ€ç»ˆå¤§é‡ç§¯å‹çš„é—®é¢˜ã€‚ç›®å‰ä»–ä»¬é‡‡å–äº† <code>7+7</code> å’Œ <code>3+7</code> è¿™æ ·çš„åˆ¶åº¦æ¥å°è¯•<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[å…³äºåº”å¯¹æ— å“åº” PR çš„æªæ–½](https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/issues/2658). dovisutu. 2022-12-03 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20231224131003/https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/issues/2658)äº2023-12-24ï¼‰">[3]</span></a></sup>ï¼Œè¿è¡Œæ•ˆæœå¦‚ä½•è¿˜éœ€è¦æœªæ¥å†è§‚å¯Ÿã€‚</li></ol><p>å›ºç„¶è‡ªç ”å¹³å°æ˜¯éå¸¸å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†å…¶å¼€å‘å’Œç»´æŠ¤æˆæœ¬ä¹Ÿæ˜¯å·¨å¤§çš„ï¼Œè™½ç„¶å¯ä»¥æ–¹ä¾¿ç¤¾åŒºç”¨æˆ·ï¼Œä½†å¯¹æ ¸å¿ƒå¼€å‘è€…çš„è¦æ±‚åªå¢ä¸å‡ã€‚è€Œä¸”è¿™å¯èƒ½æœ€ç»ˆä¹Ÿä¼šæ»‘å‘å¦ä¸€ä¸ªåé¢ï¼šæŠ€æœ¯éœ¸æƒï¼Œä¸€åˆ‡åœ¨æ¡†æ¶å’Œç¨‹åºå†…è¿è½¬ï¼Œå¤§å®¶éƒ½æ˜¯æµæ°´çº¿çš„å‘˜å·¥ï¼Œè€Œä¸æ˜¯ç¤¾åŒºçš„æˆå‘˜å’Œå»ºè®¾è€…ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ç¤¾åŒºæˆå‘˜ä¸»åŠ¨æ€§çš„ä¸§å¤±ï¼Œé™·å…¥æŠ€æœ¯çš„ç‰¢ç¬¼ï¼Œæœ€ç»ˆäººä»¬æ”¾å¼ƒé€‰æ‹©ç¦»å¼€ã€‚ç¤¾åŒºçš„æ ¸å¿ƒæ˜¯äººï¼Œè€Œä¸æ˜¯æŠ€æœ¯ï¼ŒæŠ€æœ¯ç»ˆç©¶åªæ˜¯ç¤¾åŒºçš„å·¥å…·ã€‚</p><p>åˆ¶åº¦è®¾è®¡ä¸Šç˜¾å’ŒæŠ€æœ¯éœ¸æƒç­‰é—®é¢˜ï¼Œåœ¨å•å¾·æ–‡çš„æ–‡ç« ã€Š<a href="https://new.qq.com/rain/a/20230406A07TZH00">å½“å‰åŸºå±‚æ²»ç†çš„åå¤§æ€ªç°è±¡</a>ã€‹<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[å½“å‰åŸºå±‚æ²»ç†çš„åå¤§æ€ªç°è±¡](https://new.qq.com/rain/a/20230406A07TZH00). å•å¾·æ–‡. 2023-04-06 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20231224095641/https://new.qq.com/rain/a/20230406A07TZH00)äº2023-12-24ï¼‰">[4]</span></a></sup>ä¸­å¾—åˆ°äº†æ·±å…¥çš„æ¢è®¨ï¼Œè¿™ç¯‡æ–‡ç« å¾ˆæœ‰å‚è€ƒçš„ä»·å€¼å’Œæ„ä¹‰ï¼Œæˆ–è®¸å¯¹ä»Šå¤©çš„åœ¨çº¿ç¤¾åŒºæ²»ç†èƒ½æœ‰ä¸€å®šçš„å¯å‘ã€‚</p><p>è¿™ä¸ªæ—¶ä»£å„ç±»å°ä¼—ç¤¾åŒºè¶Šæ¥è¶Šå¤šï¼Œè€Œå¾ˆå¤šä¼ ç»Ÿç¤¾åŒºä¹Ÿåœ¨åšæ•°å­—åŒ–è½¬å‹ï¼ŒåŸºäºåœ¨çº¿å¹³å°çš„ç¤¾åŒºå’Œä¼ ç»Ÿç¤¾åŒºåŒæ ·é¢ä¸´ç€è¯¸å¤šå›°å¢ƒã€‚è€Œè¿™ç±»é—®é¢˜æœ€ç»ˆå¦‚ä½•å¦¥å–„è§£å†³ï¼Œå¯èƒ½æ˜¯è¿™äº›ç¤¾åŒºèƒ½å¦é•¿ä¹…è‰¯å¥½è¿è¡Œã€ç»´ç³»äººä¸äººä¹‹é—´çš„å…³ç³»ã€ä¿æŒå¼€æ”¾çš„å¿…ç»ä¹‹è·¯ã€‚</p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.bilibili.com/video/BV1MC4y1D7jQ/">åŸºäºGiteaçš„çº¢çŸ³æ•°ç”µç´¢å¼•</a>. shenjack_. 2023-12-23 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20231224110755/https://www.bilibili.com/video/BV1MC4y1D7jQ/">å­˜æ¡£</a>äº2023-12-24ï¼‰<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/pull/1536">[è®¨è®º] çº³å¤¸è¾¾</a>. WuzgXY-GitHub. 2022-02-15 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20231224130456/https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/pull/1536">å­˜æ¡£</a>äº2023-12-24ï¼‰<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/issues/2658">å…³äºåº”å¯¹æ— å“åº” PR çš„æªæ–½</a>. dovisutu. 2022-12-03 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20231224131003/https://github.com/CFPAOrg/Minecraft-Mod-Language-Package/issues/2658">å­˜æ¡£</a>äº2023-12-24ï¼‰<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://new.qq.com/rain/a/20230406A07TZH00">å½“å‰åŸºå±‚æ²»ç†çš„åå¤§æ€ªç°è±¡</a>. å•å¾·æ–‡. 2023-04-06 [2023-12-24]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20231224095641/https://new.qq.com/rain/a/20230406A07TZH00">å­˜æ¡£</a>äº2023-12-24ï¼‰<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æ‚è°ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>GitHub</tag>
      
      <tag>Gitea</tag>
      
      <tag>ç¤¾åŒº</tag>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>How Does Compiler Explorer (Godbolt) Work?</title>
    <link href="/en/2023/12/bc4129caff08/"/>
    <url>/en/2023/12/bc4129caff08/</url>
    
    <content type="html"><![CDATA[<!-- markdownlint-disable MD010 MD033 --><blockquote><p>Compiler Explorer (Godbolt) is an interactive online compiler, which shows corresponding assembly code compiled by high-level language compilers. This article explores its principles and implements a local command-line version.</p></blockquote><span id="more"></span><h2 id="What-is-Assembly-Language"><a href="#What-is-Assembly-Language" class="headerlink" title="What is Assembly Language"></a>What is Assembly Language</h2><p>It is suggested to read <a href="https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html">æ±‡ç¼–è¯­è¨€å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="é˜®ä¸€å³°. [æ±‡ç¼–è¯­è¨€å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—](https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html). 2018-01-21. [Archived](https://web.archive.org/web/20231211131556/https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html) on 2023-12-11. Retrieved 2023-12-11.">[1]</span></a></sup> to learn the basics of assembly language.</p><h2 id="Example-Code"><a href="#Example-Code" class="headerlink" title="Example Code"></a>Example Code</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a, b, c;<br>    c = a + b;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Result-from-Compiler-Explorer"><a href="#Result-from-Compiler-Explorer" class="headerlink" title="Result from Compiler Explorer"></a>Result from Compiler Explorer</h2><p>First of all, we use Compiler Explorer to compile the code above, and get the result as follows, which is our target:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/rfd7a37.png" alt="Output form Compiler Explorer"></p><h2 id="Compile-to-Assembly-by-GCC"><a href="#Compile-to-Assembly-by-GCC" class="headerlink" title="Compile to Assembly by GCC"></a>Compile to Assembly by GCC</h2><p>Use that command to compile C++ code to assembly<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="Antoine Pelisse. [Does C++ compile to assembly?](https://stackoverflow.com/questions/4779336/does-c-compile-to-assembly/4779372#4779372). 2011-01-24. [Archived](https://web.archive.org/web/20231211153914/https://stackoverflow.com/questions/4779336/does-c-compile-to-assembly/4779372#4779372) on 2023-12-11. Retrieved 2023-12-11.">[2]</span></a></sup><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Andrew Edgecombe. [How do you get assembler output from C/C++ source in GCC?](https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc/137074#137074). 2008-09-26. [Archived](https://web.archive.org/web/20231211153931/https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc/137074#137074) on 2023-12-11. Retrieved 2023-12-11.">[3]</span></a></sup>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S example.cpp<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs assembly">.file&quot;example.cpp&quot;<br>.text<br>.def__main;.scl2;.type32;.endef<br>.globlmain<br>.defmain;.scl2;.type32;.endef<br>.seh_procmain<br>main:<br>.LFB0:<br>pushq%rbp<br>.seh_pushreg%rbp<br>movq%rsp, %rbp<br>.seh_setframe%rbp, 0<br>subq$48, %rsp<br>.seh_stackalloc48<br>.seh_endprologue<br>call__main<br>movl-4(%rbp), %edx<br>movl-8(%rbp), %eax<br>addl%edx, %eax<br>movl%eax, -12(%rbp)<br>movl$0, %eax<br>addq$48, %rsp<br>popq%rbp<br>ret<br>.seh_endproc<br>.ident&quot;GCC: (GNU) 13.2.0&quot;<br></code></pre></td></tr></table></figure><h2 id="File-Cleaning-and-Arguments-Optimization"><a href="#File-Cleaning-and-Arguments-Optimization" class="headerlink" title="File Cleaning and Arguments Optimization"></a>File Cleaning and Arguments Optimization</h2><blockquote><p>This article mainly shares the exploration process, this part will not actually be used in the end, you can consider skipping it.</p></blockquote><h3 id="seh-Commands"><a href="#seh-Commands" class="headerlink" title=".seh_* Commands"></a><code>.seh_*</code> Commands</h3><p>First we need to remove <code>.seh_*</code>, which are the MASM frame handling pseudo code <code>gas</code> implementation<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="David Wohlferd. [What are .seh_* assembly commands that gcc outputs?](https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874). 2016-07-04. [Archived](https://web.archive.org/web/20231211160356/https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874) on 2023-12-11. Retrieved 2023-12-11.">[4]</span></a></sup>. Add the argument <code>-fno-asynchronous-unwind-tables</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -fno-asynchronous-unwind-tables example.cpp<br></code></pre></td></tr></table></figure><h3 id="Specify-Output-File"><a href="#Specify-Output-File" class="headerlink" title="Specify Output File"></a>Specify Output File</h3><p>Add the argument <code>-o</code> to specify the output file.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -fno-asynchronous-unwind-tables -o example.asm example.cpp<br></code></pre></td></tr></table></figure><h3 id="Intel-Style"><a href="#Intel-Style" class="headerlink" title="Intel Style"></a>Intel Style</h3><p>The assembly code on Compiler Explorer does not have <code>%</code>, while the result of direct compilation has a lot of <code>%</code>. Searching, I found that this is the difference between AT&amp;T style and Intel style.</p><p>Update the command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -masm=intel -fno-asynchronous-unwind-tables -o example.asm example.cpp<br></code></pre></td></tr></table></figure><h3 id="Remove-ident"><a href="#Remove-ident" class="headerlink" title="Remove .ident"></a>Remove <code>.ident</code></h3><p>Search by <code>-fno-asynchronous-unwind-tables</code>, found the GCC document, and found that the <code>-fno-ident</code> parameter can remove <code>.ident</code><sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Code Gen Options (Using the GNU Compiler Collection (GCC))](https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874). [Archived](https://web.archive.org/web/20231211161014/https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html) on 2023-12-11. Retrieved 2023-12-11.">[5]</span></a></sup>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -masm=intel -fno-asynchronous-unwind-tables -fno-ident -o example.asm example.cpp<br></code></pre></td></tr></table></figure><h3 id="Current-Result"><a href="#Current-Result" class="headerlink" title="Current Result"></a>Current Result</h3><p>Now the result is basically the same as the output on Compiler Explorer:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs assembly">.file&quot;example.cpp&quot;<br>.intel_syntax noprefix<br>.text<br>.def__main;.scl2;.type32;.endef<br>.globlmain<br>.defmain;.scl2;.type32;.endef<br>main:<br>pushrbp<br>movrbp, rsp<br>subrsp, 48<br>call__main<br>movedx, DWORD PTR -4[rbp]<br>moveax, DWORD PTR -8[rbp]<br>addeax, edx<br>movDWORD PTR -12[rbp], eax<br>moveax, 0<br>leave<br>ret<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2023/12/11/iznyq18.png" alt="Output from Compiler Explorer"></p><h2 id="Deep-into-Compiler-Explorer"><a href="#Deep-into-Compiler-Explorer" class="headerlink" title="Deep into Compiler Explorer"></a>Deep into Compiler Explorer</h2><h3 id="Is-GCC-Really-Filtering"><a href="#Is-GCC-Really-Filtering" class="headerlink" title="Is GCC Really Filtering?"></a>Is GCC Really Filtering?</h3><p>I noticed that there is a filter option on Compiler Explorer, and there is a huge difference in the results when the filter is not selected.</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/rargnnn.png" alt="Not Filtering"></p><p><img src="https://picture.zhanganzhi.com/2023/12/11/65edkm7.png" alt="Filter All"></p><p>I suspect that this filter is not a function of the GCC compiler, because the binary file generated after the complete compilation process needs to be executable, and it must contain library function files, etc., and whether the Compiler Explorer actually filters after the compilation, and implements this effect.</p><p>For example, the simple code in the previous section, use the following command to view the preprocessed file:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -E -o example.txt example.cpp<br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"># <span class="hljs-number">0</span> <span class="hljs-string">&quot;example.cpp&quot;</span><br># <span class="hljs-number">0</span> <span class="hljs-string">&quot;&lt;built-in&gt;&quot;</span><br># <span class="hljs-number">0</span> <span class="hljs-string">&quot;&lt;command-line&gt;&quot;</span><br># <span class="hljs-number">1</span> <span class="hljs-string">&quot;example.cpp&quot;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a, b, c;<br>    c = a + b;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>After adding <code>#include &lt;stdio.h&gt;</code>, the preprocessed file becomes more than a thousand lines, and the contents of <code>stdio</code> are also included, so the compiler will compile this part into assembly code so that the executable file contains all the libraries.</p><h3 id="Search-for-Compiler-Explorer-Principles"><a href="#Search-for-Compiler-Explorer-Principles" class="headerlink" title="Search for Compiler Explorer Principles"></a>Search for Compiler Explorer Principles</h3><p>Compiler Explorer was originally named <code>godbolt</code>, search for how does <code>godbolt</code> filter assembly code:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/kdrp4ee.png" alt="Search Result&lt;sup id&#x3D;&quot;fnref:6&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:6&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;Peter Cordes. [Step into standard library call with godbolt](https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;56245402&#x2F;step-into-standard-library-call-with-godbolt&#x2F;56246283#56246283). 2019-05-21. [Archived](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20231211162509&#x2F;https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;56245402&#x2F;step-into-standard-library-call-with-godbolt&#x2F;56246283#56246283) on 2023-12-11. Retrieved 2023-12-11.&quot;&gt;[6]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;sup id&#x3D;&quot;fnref:7&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:7&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;Peter Cordes. [How to remove &quot;noise&quot; from GCC&#x2F;clang assembly output?](https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;38552116&#x2F;how-to-remove-noise-from-gcc-clang-assembly-output&#x2F;38552509#38552509). 2016-01-24. [Archived](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20231211162508&#x2F;https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;38552116&#x2F;how-to-remove-noise-from-gcc-clang-assembly-output&#x2F;38552509#38552509) on 2023-12-11. Retrieved 2023-12-11.&quot;&gt;[7]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>Then I found this talk by Matt Godbolt, the author of Compiler Explorer: <a href="https://www.youtube.com/watch?v=bSkpMdDe4g4">CppCon 2017: Matt Godbolt â€œWhat Has My Compiler Done for Me Lately? Unbolting the Compilerâ€™s Lidâ€</a></p><div style="width=90%; padding-top: 56.25%; position: relative;"><iframe style="top:0; bottom:0; left:0; right:0; position: absolute;" width="100%" height="100%" src="https://www.youtube.com/embed/bSkpMdDe4g4" title="CppCon 2017: Matt Godbolt â€œWhat Has My Compiler Done for Me Lately? Unbolting the Compiler's Lidâ€" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div><h3 id="Matt-Godboltâ€™s-Talk"><a href="#Matt-Godboltâ€™s-Talk" class="headerlink" title="Matt Godboltâ€™s Talk"></a>Matt Godboltâ€™s Talk</h3><p>This speech explains in detail the differences between registers, how to maintain compatibility from 8-bit processors to 64-bit processors, Intel syntax and AT&amp;T syntax, Compiler Explorer principlesâ€¦</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/lm0pkxk.png" alt="Registers Name and Convention"></p><p><img src="https://picture.zhanganzhi.com/2023/12/11/tkwgh5q.png" alt="Registers from 8-bit to 64-bit"></p><blockquote><p>I personally strongly recommend this speech to undergraduate students in computer science. This is very helpful for understanding the process of the C compiler, the basic knowledge of assembly language, registers, compiler optimization strategies, etc. It is definitely worth spending 2-3 hours to learn and understand this speech.</p><p>Each of the details in it can diverge a lot of content, such as the history and changes of computers from 8-bit to 64-bit, assembly language basics, compiler optimization (he demonstrated several cases and showed how the compiler optimized them), linux commands, Docker, cloud server practice and virtual machinesâ€¦</p><p>Learning the content of this talk, and fully understand it, is beneficial to students who are aiming for either industry or academia.</p></blockquote><h3 id="Filter-Lines-Starting-with-a-Dot-and-C-Symbols"><a href="#Filter-Lines-Starting-with-a-Dot-and-C-Symbols" class="headerlink" title="Filter Lines Starting with a Dot and C++ Symbols"></a>Filter Lines Starting with a Dot and C++ Symbols</h3><p>In the speech, I noticed the following command:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/b06924r.png" alt="The simplest way to filter"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ /tmp/test.cc -O2 -c -S -o - -masm=intel | c++filt | grep -vE <span class="hljs-string">&#x27;\s+\.&#x27;</span><br></code></pre></td></tr></table></figure><p>The parameters of this command are as follows:</p><ul><li><code>-O2</code> optimization level</li><li><code>-c</code> compile and assemble only, do not link, but we donâ€™t need object files</li><li><code>-S</code> compile and get assembly code</li><li><code>-o -</code> output to command line</li><li><code>-masm=intel</code> use intel syntax</li><li><code>c++filt</code> filter C++ symbols</li><li><code>grep -vE &#39;\s+\.</code> filter lines starting with a dot</li></ul><p>The function of <code>c++filt</code> is to filter C++ symbols, because C++ has function overloading, the compiler will handle this, and we want to get human-readable function names, for example:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">echo</span> _ZNSt11char_traitsIcE6lengthEPKc | c++filt<br>std::char_traits&lt;char&gt;::length(char const*)<br></code></pre></td></tr></table></figure><p>From this command, we can update our compilation command as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -masm=intel -fno-asynchronous-unwind-tables -fno-ident -o - example.cpp | c++filt | grep -vE <span class="hljs-string">&#x27;\s+\.&#x27;</span> &gt; example.asm<br></code></pre></td></tr></table></figure><p>The result of this compilation:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:<br>pushrbp<br>movrbp, rsp<br>subrsp, 48<br>call__main<br>movedx, DWORD PTR -4[rbp]<br>moveax, DWORD PTR -8[rbp]<br>addeax, edx<br>movDWORD PTR -12[rbp], eax<br>moveax, 0<br>leave<br>ret<br></code></pre></td></tr></table></figure><h3 id="Problem-of-Command-Parameters"><a href="#Problem-of-Command-Parameters" class="headerlink" title="Problem of Command Parameters"></a>Problem of Command Parameters</h3><p>Now we can see that <code>-fno-asynchronous-unwind-tables</code> and <code>-fno-ident</code> are actually not needed, and may filter out the content we want to keep, and further modify the command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -masm=intel -o - example.cpp | c++filt | grep -vE <span class="hljs-string">&#x27;\s+\.&#x27;</span> &gt; example.asm<br></code></pre></td></tr></table></figure><h3 id="Mattâ€™s-Simple-Solution"><a href="#Mattâ€™s-Simple-Solution" class="headerlink" title="Mattâ€™s Simple Solution"></a>Mattâ€™s Simple Solution</h3><p>In the speech, Matt mentioned his previous simple solution: use the <code>watch</code> command to execute the compilation command regularly, and then use <code>tmux</code> to open <code>vim</code> and <code>watch</code> at the same time to achieve a simple Compiler Explorer. I simply reproduced his solution:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/mv03xaf.png" alt="A Simple Compiler Explorer"></p><h2 id="Discussion-of-Platform-Differences"><a href="#Discussion-of-Platform-Differences" class="headerlink" title="Discussion of Platform Differences"></a>Discussion of Platform Differences</h2><p>Here is current result, there are still some differences from the code on Compiler Explorer (green is my result, red is Compiler Explorer):</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs diff">main:<br><span class="hljs-addition">+ .LFB0:</span><br>pushrbp<br>movrbp, rsp<br><span class="hljs-addition">+ subrsp, 48</span><br><span class="hljs-addition">+ call__main</span><br><span class="hljs-deletion">- movedx, DWORD PTR [rbp-4]</span><br><span class="hljs-deletion">- moveax, DWORD PTR [rbp-8]</span><br><span class="hljs-addition">+ movedx, DWORD PTR -4[rbp]</span><br><span class="hljs-addition">+ moveax, DWORD PTR -8[rbp]</span><br>addeax, edx<br><span class="hljs-deletion">- movDWORD PTR [rbp-12], eax</span><br><span class="hljs-addition">+ movDWORD PTR -12[rbp], eax</span><br>moveax, 0<br><span class="hljs-addition">+ addrsp, 48</span><br>poprbp<br>ret<br></code></pre></td></tr></table></figure><p>I considered whether it was because of the difference in the platform, so I compiled with the same GCC 13 on the AMD platform, Ubuntu system, and the same GCC 13, the results are as follows:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/9jx6rpj.png" alt="Different Compilation Result on Different Platforms"></p><p>We can see that the operations on <code>rsp</code> and the <code>call __main</code> are removed, but there are still differences when using pointer variables.</p><h3 id="Indirect-Operands-Pointer-Based"><a href="#Indirect-Operands-Pointer-Based" class="headerlink" title="Indirect Operands (Pointer Based)"></a>Indirect Operands (Pointer Based)</h3><p>The indirect operands of Compiler Explorer is <code>[rbp-4]</code>, while ours is <code>-4[rbp]</code>.</p><p>Generally, <code>-4(%rbp)</code> is AT&amp;T syntax, <code>[rbp-4]</code> is Intel syntax, but in our compilation result, Intel syntax produces <code>-4[rbp]</code>.</p><p>Adding <code>-fno-pie</code> flag can produce the expected output on Linux gcc, letâ€™s ignore these platform differences for now and continue to explore the principles of Compiler Explorer.</p><h2 id="Compiler-Explorer-Principles"><a href="#Compiler-Explorer-Principles" class="headerlink" title="Compiler Explorer Principles"></a>Compiler Explorer Principles</h2><h3 id="Deep-into-Source-Code"><a href="#Deep-into-Source-Code" class="headerlink" title="Deep into Source Code"></a>Deep into Source Code</h3><p>Now our code is basically the same as the code on Compiler Explorer, we only need to do two things: filters Library functions and Unused label.</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/65edkm7.png" alt="Compiler Explorer&#39;s Filter Options"></p><p>The talk did not mention how to filter, so I searched for the source code of Compiler Explorer: <a href="https://github.com/compiler-explorer/compiler-explorer">https://github.com/compiler-explorer/compiler-explorer</a></p><p>First, we search for <code>filters</code> in the source code, and find all available filters in the API documentation:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/214qhv6.png" alt="Search for filters"></p><p>Then, we search for <code>libraryCode</code> and find the following code:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/6kagrcr.png" alt="Search for libraryCode"></p><p><code>objdump</code> is a tool that disassembles the target file. We havenâ€™t seen <code>ASMPARSER</code> before, it seems to be an assembler parser. Then I continue to search for <code>externalparser</code>, and found the software name:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/6gl9non.png" alt="Search for externalparser"></p><h3 id="Update-Test-Code"><a href="#Update-Test-Code" class="headerlink" title="Update Test Code"></a>Update Test Code</h3><p>In order to test the ability of the filter library function, we update the test code to:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">fq</span><span class="hljs-params">(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>)</span></span>;<br>    <span class="hljs-type">int</span> a, b, c;<br>    c = a + b;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="asm-parser"><a href="#asm-parser" class="headerlink" title="asm-parser"></a>asm-parser</h3><p>I found the <code>asm-parser</code> software of the author, which is written in C++:</p><p><a href="https://github.com/compiler-explorer/asm-parser">https://github.com/compiler-explorer/asm-parser</a></p><p>This software only compiles on the Linux platform. I tried to compile it on Windows but without success. I executed the following command on Linux:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -g -c example.cpp<br>objdump -d example.o -M intel -l --insn-width=16 | ./asm-parser -stdin -binary -outputtext -library_functions &gt; example.asm<br></code></pre></td></tr></table></figure><p>The result is as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:<br>...<br> mov    DWORD PTR [rbp-0x48],0x0<br> lea    rcx,[rbp-0x49]<br> lea    rdx,[rbp-0x48]<br> lea    rax,[rbp-0x30]<br> mov    esi,0x1a<br> mov    rdi,rax<br> call   46 &lt;main+0x46&gt;<br> lea    rax,[rbp-0x49]<br> mov    rdi,rax<br> call   52 &lt;main+0x52&gt;<br> nop<br> mov    edx,DWORD PTR [rbp-0x44]<br> mov    eax,DWORD PTR [rbp-0x40]<br>...<br></code></pre></td></tr></table></figure><p>The result on Compiler Explorer:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:<br>...<br> mov    DWORD PTR [rbp-0x2c],0x0<br> lea    rcx,[rbp-0x2d]<br> lea    rdx,[rbp-0x2c]<br> lea    rax,[rbp-0x50]<br> mov    esi,0x1a<br> mov    rdi,rax<br> call   33 &lt;main+0x33&gt;<br>    R_X86_64_PLT32 std::vector&lt;int, std::allocator&lt;int&gt; &gt;::vector(unsigned long, int const&amp;, std::allocator&lt;int&gt; const&amp;)-0x4<br> lea    rax,[rbp-0x2d]<br> mov    rdi,rax<br> call   3f &lt;main+0x3f&gt;<br>    R_X86_64_PLT32 std::__new_allocator&lt;int&gt;::~__new_allocator()-0x4<br> nop<br> mov    edx,DWORD PTR [rbp-0x14]<br> mov    eax,DWORD PTR [rbp-0x18]<br> add    eax,edx<br> mov    DWORD PTR [rbp-0x1c],eax<br> mov    ebx,0x0<br> lea    rax,[rbp-0x50]<br> mov    rdi,rax<br> call   5c &lt;main+0x5c&gt;<br>...<br></code></pre></td></tr></table></figure><p>The flag <code>-library_functions</code> of this software completely removes all library functions, not unused library functions. I found that in Compiler Explorer, you can choose the <code>binary</code> option, which is to compile to binary object files and then compile to assembly, or directly use the source file to compile to assembly. This software may be a bit outdated, and can only process binary files.</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/m2dxt3m.png" alt="binary option of Compiler Explorer"></p><h3 id="Back-to-Source-Code"><a href="#Back-to-Source-Code" class="headerlink" title="Back to Source Code"></a>Back to Source Code</h3><p>Back to the source code of Compiler Explorer, I found a file named <code>asm-parser.ts</code>, which contains a lot of regular expressions. This is probably the filter that the platform is currently using. <strong>This further confirms my idea that filtering is not a parameter of gcc, but filtering after compilation.</strong></p><p><img src="https://picture.zhanganzhi.com/2023/12/11/ylbpnta.png" alt="asm_parser.ts"></p><p>I downloaded the source code and ran it locally to see if it would output the command used in the console, but it didnâ€™t.</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/qyoojki.png" alt="Run Locally"></p><h2 id="Extract-Source-Code-to-Local-Program"><a href="#Extract-Source-Code-to-Local-Program" class="headerlink" title="Extract Source Code to Local Program"></a>Extract Source Code to Local Program</h2><h3 id="Extract-Filtering-Code"><a href="#Extract-Filtering-Code" class="headerlink" title="Extract Filtering Code"></a>Extract Filtering Code</h3><p>Then I plan to extract the filtered js code and repackage it, so that it can be run locally.</p><p>In the <code>asm-parser.ts</code> file mentioned above, the last two functions seem to be functions that process binary and non-binary assembly.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title function_">processBinaryAsm</span>(<span class="hljs-attr">asmResult</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">filters</span>: <span class="hljs-title class_">ParseFiltersAndOutputOptions</span>): <span class="hljs-title class_">ParsedAsmResult</span> &#123;<br>    ...<br>&#125;<br><br><span class="hljs-title function_">process</span>(<span class="hljs-params">asm: <span class="hljs-built_in">string</span>, filters: ParseFiltersAndOutputOptions</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processAsm</span>(asm, filters);<br>&#125;<br></code></pre></td></tr></table></figure><p>The next thing is simple, set a breakpoint and view the method parameters:</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/s6jez8j.png" alt="Debug"></p><p><code>asm</code> is the text of assembly code, <code>filter</code> is a object contains filtering options.</p><p>By the asm text here, we know that the actual compilation parameters are as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -g -S -masm=intel -o - example.cpp &gt; example.asm<br></code></pre></td></tr></table></figure><p>Which is added <code>-g</code> parameter, this is to add debug information in the assembly code, I guess <code>c++filt</code> will use it later.</p><p>I extracted <code>asm_parser.ts</code> and other files I needed, and wrote a main file.</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/3e3l94o.png" alt="Main File"></p><p>According to the documentation of asm-parser that written in C++, filter library function is based on file path, the file name must be <code>example.cpp</code> to be retained, otherwise the main file will be filtered as a library file. The regular expression in the source code shows this:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">stdInLooking</span> = <span class="hljs-regexp">/&lt;stdin&gt;|^-$|example\.[^/]+$|&lt;source&gt;/</span>;<br></code></pre></td></tr></table></figure><h3 id="JSON-to-Text"><a href="#JSON-to-Text" class="headerlink" title="JSON to Text"></a>JSON to Text</h3><p>The current output is still in JSON format, and I wanted to convert it to plain text, so I wrote a function to output plain text.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">resultToText</span>(<span class="hljs-params">r: ParsedAsmResult</span>) &#123;<br>  <span class="hljs-keyword">return</span> r.<span class="hljs-property">asm</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> line.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="c-filt"><a href="#c-filt" class="headerlink" title="c++filt"></a>c++filt</h3><p>The next step is to filter C++ symbols by <code>c++filt</code>, then we have the almost same result as Compiler Explorer.</p><h3 id="Description-after-Symbol"><a href="#Description-after-Symbol" class="headerlink" title="Description after Symbol"></a>Description after Symbol</h3><p><img src="https://picture.zhanganzhi.com/2023/12/11/klyq497.png" alt="Comparing Results"></p><p>The comparison of the above shows that the output of Compiler Explorer adds a description in brackets after the function call. After reading the source code again, I extracted the <code>CppDemangler</code> class.</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/a0hquni.png" alt="Compiler Explorer uses this class to mark library functions"></p><p>Up to now, the output is exactly the same as the output on godbolt.</p><h2 id="asm-parser-in-Typescript"><a href="#asm-parser-in-Typescript" class="headerlink" title="asm-parser in Typescript"></a>asm-parser in Typescript</h2><h3 id="Optimize-Command-Line-Interface"><a href="#Optimize-Command-Line-Interface" class="headerlink" title="Optimize Command Line Interface"></a>Optimize Command Line Interface</h3><p>Finally, I made some small modifications to the code, improved the command line interface, read the assembly code from <code>stdin</code>, and output to <code>stdout</code>.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">AsmParser</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/lib/asm-parser.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">BaseCompiler</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/lib/fake-base-compiler.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">CppDemangler</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/lib/demangler/cpp.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">ParsedAsmResult</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/types/asmresult/asmresult.interfaces.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>  <span class="hljs-title class_">ParseFiltersAndOutputOptions</span><br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/types/features/filters.interfaces.js&quot;</span>;<br><br><span class="hljs-keyword">const</span> baseCompiler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseCompiler</span>();<br><span class="hljs-keyword">const</span> cppDemangler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CppDemangler</span>(<span class="hljs-string">&quot;c++filt&quot;</span>, baseCompiler);<br><span class="hljs-keyword">const</span> asmParser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsmParser</span>();<br><br><span class="hljs-keyword">const</span> args = process.<span class="hljs-property">argv</span>;<br><span class="hljs-keyword">const</span> outputTextFlag = args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--outputtext&quot;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-attr">filters</span>: <span class="hljs-title class_">ParseFiltersAndOutputOptions</span> = &#123;<br>  <span class="hljs-attr">labels</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--unused_labels&quot;</span>),<br>  <span class="hljs-attr">libraryCode</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--library_code&quot;</span>),<br>  <span class="hljs-attr">directives</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--directives&quot;</span>),<br>  <span class="hljs-attr">commentOnly</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--comment_only&quot;</span>),<br>  <span class="hljs-attr">binary</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--binary&quot;</span>),<br>  <span class="hljs-attr">binaryObject</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--binary&quot;</span>)<br>&#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">resultToText</span>(<span class="hljs-params">r: ParsedAsmResult</span>) &#123;<br>  <span class="hljs-keyword">return</span> r.<span class="hljs-property">asm</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> line.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getInput</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) &#123;<br>    <span class="hljs-keyword">const</span> stdin = process.<span class="hljs-property">stdin</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;&quot;</span>;<br><br>    stdin.<span class="hljs-title function_">setEncoding</span>(<span class="hljs-string">&quot;utf8&quot;</span>);<br>    stdin.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;data&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">chunk</span>) &#123;<br>      data += chunk;<br>    &#125;);<br><br>    stdin.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;end&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-title function_">resolve</span>(data);<br>    &#125;);<br><br>    stdin.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;error&#x27;</span>, reject);<br>  &#125;);<br>&#125;<br><br><span class="hljs-title function_">getInput</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span>) =&gt; &#123;<br>  <span class="hljs-comment">// parse</span><br>  <span class="hljs-keyword">let</span> result = asmParser.<span class="hljs-title function_">process</span>(input, filters);<br><br>  <span class="hljs-comment">// demangle</span><br>  result = <span class="hljs-keyword">await</span> cppDemangler.<span class="hljs-title function_">process</span>(result);<br><br>  <span class="hljs-comment">// print</span><br>  <span class="hljs-keyword">if</span> (outputTextFlag) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">resultToText</span>(result));<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -g -S -masm=intel -o - example.cpp | ts-node-esm index.ts --unused_labels --library_code --directives --comment_only  --outputtext &gt; example.asm<br></code></pre></td></tr></table></figure><p>Test again, the output is the same as the output on Compiler Explorer, and the output is exactly the same.</p><p>Then we use <a href="https://github.com/vercel/pkg">https://github.com/vercel/pkg</a> to compile ts into binary files, this tool can compile to three platforms at the same.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">tsc index.ts --target esnext --module nodenext --skipLibCheck --outDir dist<br>rollup dist/index.js --file dist/bundle.js --format cjs<span class="hljs-string">&quot;,</span><br><span class="hljs-string">pkg dist/bundle.js --out-path dist</span><br></code></pre></td></tr></table></figure><p>I published this project on GitHub, and welcome everyone to use and give suggestions: <a href="https://github.com/AnzhiZhang/asm-parser">https://github.com/AnzhiZhang/asm-parser</a></p><p>Now we have the full compile command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -g -S -masm=intel -o - example.cpp | asm-parser-win --unused_labels --library_code --directives --comment_only --outputtext &gt; example.asm<br></code></pre></td></tr></table></figure><h3 id="Source-Code-Correspondence-and-Coloring"><a href="#Source-Code-Correspondence-and-Coloring" class="headerlink" title="Source Code Correspondence and Coloring"></a>Source Code Correspondence and Coloring</h3><p>The last small problem is that the assembly code on Compiler Explorer is colored to mark the correspondence between the assembly code and the source code, but ours is not. Looking at the return data of the interface, it can be found that the front end receives JSON format, and each line has the line number of the corresponding source code. This feature is implemented by the front end.</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/g4872u6.png" alt="Correspondence on Compiler Explorer"></p><p>We only need to remove the <code>--outputtext</code> parameter when using <code>asm-parser</code>, and we can get the data with the correspondence between the source code and the line numbers. The command is as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -g -S -masm=intel -o - example.cpp | asm-parser-win --unused_labels --library_code --directives --comment_only &gt; example.asm<br></code></pre></td></tr></table></figure><h2 id="Other-Platforms"><a href="#Other-Platforms" class="headerlink" title="Other Platforms"></a>Other Platforms</h2><p>We may also want to get filtered assembly code on the armv8 and riscv platforms. The following briefly introduces the implementation method.</p><p>To facilitate demonstration, I only use the following code:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a, b, c;<br>    c = a + b;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Also, in order to facilitate cross-compilation, we use <code>clang</code> and add <code>-target &lt;triple&gt;</code> to specify the target platform.<sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Cross-compilation using Clang â€” Clang 18.0.0git documentation](https://clang.llvm.org/docs/CrossCompilation.html#target-triple). [Archived](https://web.archive.org/web/20231211182735/https://clang.llvm.org/docs/CrossCompilation.html#target-triple) on 2023-12-11. Retrieved 2023-12-11.">[8]</span></a></sup></p><blockquote><p>The triple has the general format <code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;env&gt;</code>, where:</p><ul><li><code>arch</code> &#x3D; <code>x86_64</code>, <code>i386</code>, <code>arm</code>, <code>thumb</code>, <code>mips</code>, etc.</li><li><code>sub</code> &#x3D; for ex. on ARM: <code>v5</code>, <code>v6m</code>, <code>v7a</code>, <code>v7m</code>, etc.</li><li><code>vendor</code> &#x3D; <code>pc</code>, <code>apple</code>, <code>nvidia</code>, <code>ibm</code>, etc.</li><li><code>sys</code> &#x3D; <code>none</code>, <code>linux</code>, <code>win32</code>, <code>darwin</code>, <code>cuda</code>, etc.</li><li><code>env</code> &#x3D; <code>eabi</code>, <code>gnu</code>, <code>android</code>, <code>macho</code>, <code>elf</code>, etc.</li></ul></blockquote><h3 id="armv8"><a href="#armv8" class="headerlink" title="armv8"></a>armv8</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">clang -g -S -o - -target aarch64-pc-linux-gnu example.cpp | asm-parser-win --unused_labels --library_code --directives --comment_only --outputtext<br></code></pre></td></tr></table></figure><p>Compile output:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:                                   // @main<br>        sub     sp, sp, #16<br>        mov     w0, wzr<br>        str     wzr, [sp, #12]<br>        ldr     w8, [sp, #8]<br>        ldr     w9, [sp, #4]<br>        add     w8, w8, w9<br>        str     w8, [sp]<br>        add     sp, sp, #16<br>        ret<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2023/12/11/ie2wr3i.png" alt="armv8 result on Compiler Explorer"></p><h3 id="riscv"><a href="#riscv" class="headerlink" title="riscv"></a>riscv</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">clang -g -S -o - -target riscv64-unknown-linux-gnu example.cpp | asm-parser-win --unused_labels --library_code --directives --comment_only --outputtext<br></code></pre></td></tr></table></figure><p>Compile output:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:                                   # @main<br>        addi    sp, sp, -32<br>        sd      ra, 24(sp)                      # 8-byte Folded Spill<br>        sd      s0, 16(sp)                      # 8-byte Folded Spill<br>        addi    s0, sp, 32<br>        li      a0, 0<br>        sw      a0, -20(s0)<br>        lw      a1, -24(s0)<br>        lw      a2, -28(s0)<br>        addw    a1, a1, a2<br>        sw      a1, -32(s0)<br>        ld      ra, 24(sp)                      # 8-byte Folded Reload<br>        ld      s0, 16(sp)                      # 8-byte Folded Reload<br>        addi    sp, sp, 32<br>        ret<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2023/12/11/w99hp8l.png" alt="riscv result on Compiler Explorer"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>é˜®ä¸€å³°. <a href="https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html">æ±‡ç¼–è¯­è¨€å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a>. 2018-01-21. <a href="https://web.archive.org/web/20231211131556/https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>Antoine Pelisse. <a href="https://stackoverflow.com/questions/4779336/does-c-compile-to-assembly/4779372#4779372">Does C++ compile to assembly?</a>. 2011-01-24. <a href="https://web.archive.org/web/20231211153914/https://stackoverflow.com/questions/4779336/does-c-compile-to-assembly/4779372#4779372">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>Andrew Edgecombe. <a href="https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc/137074#137074">How do you get assembler output from C&#x2F;C++ source in GCC?</a>. 2008-09-26. <a href="https://web.archive.org/web/20231211153931/https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc/137074#137074">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>David Wohlferd. <a href="https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874">What are .seh_* assembly commands that gcc outputs?</a>. 2016-07-04. <a href="https://web.archive.org/web/20231211160356/https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874">Code Gen Options (Using the GNU Compiler Collection (GCC))</a>. <a href="https://web.archive.org/web/20231211161014/https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>Peter Cordes. <a href="https://stackoverflow.com/questions/56245402/step-into-standard-library-call-with-godbolt/56246283#56246283">Step into standard library call with godbolt</a>. 2019-05-21. <a href="https://web.archive.org/web/20231211162509/https://stackoverflow.com/questions/56245402/step-into-standard-library-call-with-godbolt/56246283#56246283">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>Peter Cordes. <a href="https://stackoverflow.com/questions/38552116/how-to-remove-noise-from-gcc-clang-assembly-output/38552509#38552509">How to remove â€œnoiseâ€ from GCC&#x2F;clang assembly output?</a>. 2016-01-24. <a href="https://web.archive.org/web/20231211162508/https://stackoverflow.com/questions/38552116/how-to-remove-noise-from-gcc-clang-assembly-output/38552509#38552509">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:8" class="footnote-text"><span><a href="https://clang.llvm.org/docs/CrossCompilation.html#target-triple">Cross-compilation using Clang â€” Clang 18.0.0git documentation</a>. <a href="https://web.archive.org/web/20231211182735/https://clang.llvm.org/docs/CrossCompilation.html#target-triple">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:8" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>å­¦æœ¯</category>
      
      <category>ç¼–è¯‘åŸç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>æ±‡ç¼–</tag>
      
      <tag>Compiler Explorer</tag>
      
      <tag>ç¼–è¯‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Compiler Explorerï¼ˆGodboltï¼‰æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</title>
    <link href="/zh-CN/2023/12/e1e8adfb656e/"/>
    <url>/zh-CN/2023/12/e1e8adfb656e/</url>
    
    <content type="html"><![CDATA[<!-- markdownlint-disable MD010 MD033 --><blockquote><p>Compiler Explorerï¼ˆGodboltï¼‰æ˜¯ä¸€ä¸ªäº¤äº’å¼åœ¨çº¿æ±‡ç¼–è¯­è¨€ç¼–è¯‘å™¨ï¼Œæœ¬æ–‡ä¸»è¦åˆ†äº«æ¢ç´¢å…¶åŸç†çš„è¿‡ç¨‹ï¼Œå¹¶æå–å…¶å¼€æºä»£ç å®ç°äº†ä¸€ä¸ªæœ¬åœ°å‘½ä»¤è¡Œç‰ˆæœ¬ã€‚</p></blockquote><span id="more"></span><h2 id="ä»€ä¹ˆæ˜¯æ±‡ç¼–"><a href="#ä»€ä¹ˆæ˜¯æ±‡ç¼–" class="headerlink" title="ä»€ä¹ˆæ˜¯æ±‡ç¼–"></a>ä»€ä¹ˆæ˜¯æ±‡ç¼–</h2><p>æ¨èé˜…è¯»<a href="https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html">æ±‡ç¼–è¯­è¨€å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="é˜®ä¸€å³°. [æ±‡ç¼–è¯­è¨€å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—](https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html). 2018-01-21. [Archived](https://web.archive.org/web/20231211131556/https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html) on 2023-12-11. Retrieved 2023-12-11.">[1]</span></a></sup>äº†è§£æ±‡ç¼–è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ã€‚</p><h2 id="æ ·ä¾‹ä»£ç "><a href="#æ ·ä¾‹ä»£ç " class="headerlink" title="æ ·ä¾‹ä»£ç "></a>æ ·ä¾‹ä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a, b, c;<br>    c = a + b;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Compiler-Explorer-ç»“æœ"><a href="#Compiler-Explorer-ç»“æœ" class="headerlink" title="Compiler Explorer ç»“æœ"></a>Compiler Explorer ç»“æœ</h2><p>é¦–å…ˆä½¿ç”¨ Compiler Explorer ç¼–è¯‘ä¸Šè¿°ä»£ç ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼Œç¡®å®šæˆ‘ä»¬çš„ç›®æ ‡ï¼š</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/rfd7a37.png" alt="Compiler Explorer çš„è¾“å‡º"></p><h2 id="GCC-ç¼–è¯‘åˆ°æ±‡ç¼–"><a href="#GCC-ç¼–è¯‘åˆ°æ±‡ç¼–" class="headerlink" title="GCC ç¼–è¯‘åˆ°æ±‡ç¼–"></a>GCC ç¼–è¯‘åˆ°æ±‡ç¼–</h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°† C++ ä»£ç ç¼–è¯‘åˆ°æ±‡ç¼–<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="Antoine Pelisse. [Does C++ compile to assembly?](https://stackoverflow.com/questions/4779336/does-c-compile-to-assembly/4779372#4779372). 2011-01-24. [Archived](https://web.archive.org/web/20231211153914/https://stackoverflow.com/questions/4779336/does-c-compile-to-assembly/4779372#4779372) on 2023-12-11. Retrieved 2023-12-11.">[2]</span></a></sup><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Andrew Edgecombe. [How do you get assembler output from C/C++ source in GCC?](https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc/137074#137074). 2008-09-26. [Archived](https://web.archive.org/web/20231211153931/https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc/137074#137074) on 2023-12-11. Retrieved 2023-12-11.">[3]</span></a></sup>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S example.cpp<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs assembly">.file&quot;example.cpp&quot;<br>.text<br>.def__main;.scl2;.type32;.endef<br>.globlmain<br>.defmain;.scl2;.type32;.endef<br>.seh_procmain<br>main:<br>.LFB0:<br>pushq%rbp<br>.seh_pushreg%rbp<br>movq%rsp, %rbp<br>.seh_setframe%rbp, 0<br>subq$48, %rsp<br>.seh_stackalloc48<br>.seh_endprologue<br>call__main<br>movl-4(%rbp), %edx<br>movl-8(%rbp), %eax<br>addl%edx, %eax<br>movl%eax, -12(%rbp)<br>movl$0, %eax<br>addq$48, %rsp<br>popq%rbp<br>ret<br>.seh_endproc<br>.ident&quot;GCC: (GNU) 13.2.0&quot;<br></code></pre></td></tr></table></figure><h2 id="æ–‡ä»¶æ¸…ç†åŠä¼˜åŒ–å‚æ•°"><a href="#æ–‡ä»¶æ¸…ç†åŠä¼˜åŒ–å‚æ•°" class="headerlink" title="æ–‡ä»¶æ¸…ç†åŠä¼˜åŒ–å‚æ•°"></a>æ–‡ä»¶æ¸…ç†åŠä¼˜åŒ–å‚æ•°</h2><blockquote><p>æœ¬æ–‡ä¸»è¦åˆ†äº«æ¢ç´¢è¿‡ç¨‹ï¼Œè¿™éƒ¨åˆ†å®é™…ä¸Šå¹¶ä¸ä¼šåœ¨æœ€åç”¨åˆ°ï¼Œå¯ä»¥è€ƒè™‘è·³è¿‡ã€‚</p></blockquote><h3 id="seh-æŒ‡ä»¤"><a href="#seh-æŒ‡ä»¤" class="headerlink" title=".seh_* æŒ‡ä»¤"></a><code>.seh_*</code> æŒ‡ä»¤</h3><p>é¦–å…ˆç§»é™¤ <code>.seh_*</code>ï¼Œè¿™äº›æ˜¯ MASM çš„å¸§å¤„ç†ä¼ªä»£ç  <code>gas</code> çš„å®ç°<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="David Wohlferd. [What are .seh_* assembly commands that gcc outputs?](https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874). 2016-07-04. [Archived](https://web.archive.org/web/20231211160356/https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874) on 2023-12-11. Retrieved 2023-12-11.">[4]</span></a></sup>ã€‚æ·»åŠ å‚æ•° <code>-fno-asynchronous-unwind-tables</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -fno-asynchronous-unwind-tables example.cpp<br></code></pre></td></tr></table></figure><h3 id="æŒ‡å®šè¾“å‡ºæ–‡ä»¶"><a href="#æŒ‡å®šè¾“å‡ºæ–‡ä»¶" class="headerlink" title="æŒ‡å®šè¾“å‡ºæ–‡ä»¶"></a>æŒ‡å®šè¾“å‡ºæ–‡ä»¶</h3><p>ä½¿ç”¨ <code>-o</code> å‚æ•°æŒ‡å®šè¾“å‡ºæ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -fno-asynchronous-unwind-tables -o example.asm example.cpp<br></code></pre></td></tr></table></figure><h3 id="Intel-é£æ ¼"><a href="#Intel-é£æ ¼" class="headerlink" title="Intel é£æ ¼"></a>Intel é£æ ¼</h3><p>åœ¨ Compiler Explorer ä¸Šçš„æ±‡ç¼–ä»£ç æ²¡æœ‰ <code>%</code>ï¼Œè€Œç›´æ¥ç¼–è¯‘çš„ç»“æœæœ‰å¤§é‡çš„ <code>%</code>ï¼Œæœç´¢å‘ç°è¿™æ˜¯ AT&amp;T é£æ ¼å’Œ Intel é£æ ¼çš„åŒºåˆ«ã€‚</p><p>æ›´æ–°å‘½ä»¤å‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -masm=intel -fno-asynchronous-unwind-tables -o example.asm example.cpp<br></code></pre></td></tr></table></figure><h3 id="ç§»é™¤-ident"><a href="#ç§»é™¤-ident" class="headerlink" title="ç§»é™¤ .ident"></a>ç§»é™¤ <code>.ident</code></h3><p>ä»¥ <code>-fno-asynchronous-unwind-tables</code> ä¸ºçº¿ç´¢æœç´¢ï¼Œæ‰¾åˆ°äº† GCC æ–‡æ¡£ï¼Œå‘ç° <code>-fno-ident</code> å‚æ•°å¯ä»¥ç§»é™¤ <code>.ident</code><sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Code Gen Options (Using the GNU Compiler Collection (GCC))](https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874). [Archived](https://web.archive.org/web/20231211161014/https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html) on 2023-12-11. Retrieved 2023-12-11.">[5]</span></a></sup>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -masm=intel -fno-asynchronous-unwind-tables -fno-ident -o example.asm example.cpp<br></code></pre></td></tr></table></figure><h3 id="å½“å‰çš„æˆæœ"><a href="#å½“å‰çš„æˆæœ" class="headerlink" title="å½“å‰çš„æˆæœ"></a>å½“å‰çš„æˆæœ</h3><p>æ­¤æ—¶å·²ç»å’Œ Compiler Explorer çš„è¾“å‡ºåŸºæœ¬ä¸€è‡´äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs assembly">.file&quot;example.cpp&quot;<br>.intel_syntax noprefix<br>.text<br>.def__main;.scl2;.type32;.endef<br>.globlmain<br>.defmain;.scl2;.type32;.endef<br>main:<br>pushrbp<br>movrbp, rsp<br>subrsp, 48<br>call__main<br>movedx, DWORD PTR -4[rbp]<br>moveax, DWORD PTR -8[rbp]<br>addeax, edx<br>movDWORD PTR -12[rbp], eax<br>moveax, 0<br>leave<br>ret<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2023/12/11/iznyq18.png" alt="Compiler Explorer çš„è¾“å‡º"></p><h2 id="æ·±å…¥-Compiler-Explorer-åŸç†"><a href="#æ·±å…¥-Compiler-Explorer-åŸç†" class="headerlink" title="æ·±å…¥ Compiler Explorer åŸç†"></a>æ·±å…¥ Compiler Explorer åŸç†</h2><h3 id="çœŸçš„æ˜¯-GCC-åœ¨è¿‡æ»¤å—ï¼Ÿ"><a href="#çœŸçš„æ˜¯-GCC-åœ¨è¿‡æ»¤å—ï¼Ÿ" class="headerlink" title="çœŸçš„æ˜¯ GCC åœ¨è¿‡æ»¤å—ï¼Ÿ"></a>çœŸçš„æ˜¯ GCC åœ¨è¿‡æ»¤å—ï¼Ÿ</h3><p>åœ¨ Compiler Explorer ä¸Šï¼Œæœ‰ä¸€ä¸ªè¿‡æ»¤å™¨é€‰é¡¹ï¼Œä¸é€‰æ‹©è¿‡æ»¤æ—¶ï¼Œç»“æœæœ‰ç€å·¨å¤§çš„å·®å¼‚ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/rargnnn.png" alt="ä¸è¿‡æ»¤æœªä½¿ç”¨çš„æ ‡ç­¾å’Œåº“å‡½æ•°"></p><p><img src="https://picture.zhanganzhi.com/2023/12/11/65edkm7.png" alt="è¿‡æ»¤æ‰€æœ‰"></p><p>äºæ˜¯æˆ‘æ€€ç–‘æ˜¯å¦è¿™ä¸ªè¿‡æ»¤ä¸æ˜¯ GCC ç¼–è¯‘å™¨çš„åŠŸèƒ½ï¼Œå› ä¸ºå®Œæ•´çš„ç¼–è¯‘æµç¨‹åäº§ç”Ÿçš„äºŒè¿›åˆ¶æ–‡ä»¶éœ€è¦å¯æ‰§è¡Œï¼Œæ˜¯å¿…é¡»åŒ…å«åº“å‡½æ•°ç­‰æ–‡ä»¶çš„ï¼Œæ˜¯ä¸æ˜¯ Compiler Explorer å®é™…ä¸Šåœ¨ç¼–è¯‘åè¿‡æ»¤äº†ä¸€éï¼Œå®ç°çš„è¿™ä¸ªæ•ˆæœã€‚</p><p>ä¾‹å¦‚ä¸Šæ–‡çš„ç®€å•ä»£ç ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹é¢„å¤„ç†åçš„æ–‡ä»¶æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -E -o example.txt example.cpp<br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"># <span class="hljs-number">0</span> <span class="hljs-string">&quot;example.cpp&quot;</span><br># <span class="hljs-number">0</span> <span class="hljs-string">&quot;&lt;built-in&gt;&quot;</span><br># <span class="hljs-number">0</span> <span class="hljs-string">&quot;&lt;command-line&gt;&quot;</span><br># <span class="hljs-number">1</span> <span class="hljs-string">&quot;example.cpp&quot;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a, b, c;<br>    c = a + b;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œæ·»åŠ  <code>#include &lt;stdio.h&gt;</code> åï¼Œé¢„å¤„ç†åçš„æ–‡ä»¶å˜ä¸ºäº†ä¸€åƒå¤šè¡Œï¼Œ<code>stdio</code> ä¸­çš„å†…å®¹ä¹Ÿè¢«åŒ…å«äº†è¿›æ¥ï¼Œäºæ˜¯ç¼–è¯‘å™¨ä¼šå°†è¿™éƒ¨åˆ†ä¹Ÿç¼–è¯‘ä¸ºæ±‡ç¼–ä»£ç ï¼Œä»¥ä¾¿å¯æ‰§è¡Œæ–‡ä»¶åŒ…å«æ‰€æœ‰çš„åº“ã€‚</p><h3 id="æœç´¢-Compiler-Explorer-åŸç†"><a href="#æœç´¢-Compiler-Explorer-åŸç†" class="headerlink" title="æœç´¢ Compiler Explorer åŸç†"></a>æœç´¢ Compiler Explorer åŸç†</h3><p>Compiler Explorer æ›¾ç»åä¸º <code>godbolt</code>ï¼Œç›´æ¥æ£€ç´¢ godbolt å¦‚ä½•è¿‡æ»¤æ±‡ç¼–ä»£ç ï¼š</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/kdrp4ee.png" alt="æœç´¢ç»“æœ&lt;sup id&#x3D;&quot;fnref:6&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:6&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;Peter Cordes. [Step into standard library call with godbolt](https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;56245402&#x2F;step-into-standard-library-call-with-godbolt&#x2F;56246283#56246283). 2019-05-21. [Archived](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20231211162509&#x2F;https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;56245402&#x2F;step-into-standard-library-call-with-godbolt&#x2F;56246283#56246283) on 2023-12-11. Retrieved 2023-12-11.&quot;&gt;[6]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;sup id&#x3D;&quot;fnref:7&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:7&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;Peter Cordes. [How to remove &quot;noise&quot; from GCC&#x2F;clang assembly output?](https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;38552116&#x2F;how-to-remove-noise-from-gcc-clang-assembly-output&#x2F;38552509#38552509). 2016-01-24. [Archived](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20231211162508&#x2F;https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;38552116&#x2F;how-to-remove-noise-from-gcc-clang-assembly-output&#x2F;38552509#38552509) on 2023-12-11. Retrieved 2023-12-11.&quot;&gt;[7]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>ç„¶åæ‰¾åˆ°äº† Compiler Explorer ä½œè€… Matt Godbolt çš„æ¼”è®²ï¼š<a href="https://www.youtube.com/watch?v=bSkpMdDe4g4">CppCon 2017: Matt Godbolt â€œWhat Has My Compiler Done for Me Lately? Unbolting the Compilerâ€™s Lidâ€</a></p><div style="width=90%; padding-top: 56.25%; position: relative;"><iframe style="top:0; bottom:0; left:0; right:0; position: absolute;" width="100%" height="100%" src="https://www.youtube.com/embed/bSkpMdDe4g4" title="CppCon 2017: Matt Godbolt â€œWhat Has My Compiler Done for Me Lately? Unbolting the Compiler's Lidâ€" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div><h3 id="Matt-Godbolt-çš„æ¼”è®²"><a href="#Matt-Godbolt-çš„æ¼”è®²" class="headerlink" title="Matt Godbolt çš„æ¼”è®²"></a>Matt Godbolt çš„æ¼”è®²</h3><p>è¿™ä¸ªæ¼”è®²è¯¦ç»†è§£é‡Šäº†å¯„å­˜å™¨çš„åŒºåˆ«ã€å¦‚ä½•ä¿æŒä» 8 ä½å¤„ç†å™¨åˆ°ç°åœ¨ 64 ä½çš„å…¼å®¹ã€Intel è¯­æ³•å’Œ AT&amp;T è¯­æ³•ã€Compiler Explorer åŸç†â€¦â€¦</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/lm0pkxk.png" alt="å…³äºå¯„å­˜å™¨çš„åç§°å’Œçº¦å®š"></p><p><img src="https://picture.zhanganzhi.com/2023/12/11/tkwgh5q.png" alt="ä» 8 ä½åˆ° 64 ä½æ—¶ä»£çš„å¯„å­˜å™¨"></p><blockquote><p>æˆ‘ä¸ªäººå¼ºçƒˆæ¨èè¿™ä¸ªæ¼”è®²ç»™è®¡ç®—æœºæœ¬ç§‘çš„åŒå­¦ï¼Œè¿™å¯¹äºäº†è§£ C ç¼–è¯‘å™¨çš„è¿‡ç¨‹ã€æ±‡ç¼–è¯­è¨€çš„åŸºæœ¬çŸ¥è¯†ã€å¯„å­˜å™¨ã€ç¼–è¯‘å™¨çš„ä¼˜åŒ–ç­–ç•¥ç­‰éƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œç»å¯¹å€¼å¾—èŠ±è´¹ 2-3 å°æ—¶çš„æ—¶é—´å­¦ä¹ å’Œç†è§£è¿™ä¸ªæ¼”è®²ã€‚</p><p>å…¶ä¸­çš„æ¯ä¸€ä¸ªç»†èŠ‚çš„çŸ¥è¯†ç‚¹éƒ½å¯ä»¥å‘æ•£å‡ºéå¸¸å¤šçš„å†…å®¹ï¼Œä¾‹å¦‚è®¡ç®—æœºä» 8 ä½å‘å±•åˆ° 64 ä½çš„å†å²å’Œå˜åŒ–ã€æ±‡ç¼–è¯­è¨€åŸºç¡€ã€ç¼–è¯‘å™¨çš„ä¼˜åŒ–ï¼ˆä»–æ¼”ç¤ºäº†å‡ ç§æƒ…å†µï¼Œå±•ç¤ºäº†ç¼–è¯‘å™¨å¦‚ä½•ä¼˜åŒ–å®ƒä»¬ï¼‰ã€linux å‘½ä»¤ã€Dockerã€äº‘æœåŠ¡å™¨å®è·µå’Œè™šæ‹Ÿæœºâ€¦â€¦</p><p>å­¦ä¹ è¿™ä¸ªæ¼”è®²çš„å†…å®¹ï¼Œå¹¶å®Œå…¨æ¶ˆåŒ–ï¼Œæ— è®ºå¯¹äºç›®æ ‡æ˜¯å·¥ä¸šç•Œè¿˜æ˜¯å­¦æœ¯ç•Œçš„å­¦ç”Ÿéƒ½æ˜¯æœ‰ç›Šçš„ã€‚</p></blockquote><h3 id="è¿‡æ»¤ä»¥ç‚¹å¼€å¤´çš„è¡Œå’Œ-C-ç¬¦å·"><a href="#è¿‡æ»¤ä»¥ç‚¹å¼€å¤´çš„è¡Œå’Œ-C-ç¬¦å·" class="headerlink" title="è¿‡æ»¤ä»¥ç‚¹å¼€å¤´çš„è¡Œå’Œ C++ ç¬¦å·"></a>è¿‡æ»¤ä»¥ç‚¹å¼€å¤´çš„è¡Œå’Œ C++ ç¬¦å·</h3><p>åœ¨æ¼”è®²ä¸­ï¼Œæˆ‘æ³¨æ„åˆ°äº†ä»¥ä¸‹å‘½ä»¤ï¼š</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/b06924r.png" alt="æœ€ç®€æ˜“çš„è¿‡æ»¤æ–¹å¼"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ /tmp/test.cc -O2 -c -S -o - -masm=intel | c++filt | grep -vE <span class="hljs-string">&#x27;\s+\.&#x27;</span><br></code></pre></td></tr></table></figure><p>å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li><code>-O2</code> ä¼˜åŒ–ç­‰çº§</li><li><code>-c</code> ä»…ç¼–è¯‘å’Œæ±‡ç¼–ï¼Œä¸é“¾æ¥ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬ä¸éœ€è¦ object æ–‡ä»¶</li><li><code>-S</code> ç¼–è¯‘ï¼Œè·å¾—æ±‡ç¼–ä»£ç </li><li><code>-o -</code> è¾“å‡ºåˆ°å‘½ä»¤è¡Œ</li><li><code>-masm=intel</code> ä½¿ç”¨ intel è¯­æ³•</li><li><code>c++filt</code> è¿‡æ»¤ C++ çš„ç¬¦å·</li><li><code>grep -vE &#39;\s+\.</code> è¿‡æ»¤ä»¥ç‚¹å¼€å¤´çš„è¡Œ</li></ul><p><code>c++filt</code> çš„ä½œç”¨æ˜¯è¿‡æ»¤ C++ çš„ç¬¦å·ï¼Œå› ä¸º C++ æœ‰å‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨ä¼šå¯¹æ­¤å¤„ç†ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›è·å¾—äººç±»å¯è¯»çš„å‡½æ•°åï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">echo</span> _ZNSt11char_traitsIcE6lengthEPKc | c++filt<br>std::char_traits&lt;char&gt;::length(char const*)<br></code></pre></td></tr></table></figure><p>å€Ÿé‰´è¿™ä¸ªå‘½ä»¤ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„ç¼–è¯‘å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -masm=intel -fno-asynchronous-unwind-tables -fno-ident -o - example.cpp | c++filt | grep -vE <span class="hljs-string">&#x27;\s+\.&#x27;</span> &gt; example.asm<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶çš„ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:<br>pushrbp<br>movrbp, rsp<br>subrsp, 48<br>call__main<br>movedx, DWORD PTR -4[rbp]<br>moveax, DWORD PTR -8[rbp]<br>addeax, edx<br>movDWORD PTR -12[rbp], eax<br>moveax, 0<br>leave<br>ret<br></code></pre></td></tr></table></figure><h3 id="å‘½ä»¤å‚æ•°çš„é—®é¢˜"><a href="#å‘½ä»¤å‚æ•°çš„é—®é¢˜" class="headerlink" title="å‘½ä»¤å‚æ•°çš„é—®é¢˜"></a>å‘½ä»¤å‚æ•°çš„é—®é¢˜</h3><p>ç”±æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ <code>-fno-asynchronous-unwind-tables</code> å’Œ <code>-fno-ident</code> å…¶å®å¹¶ä¸éœ€è¦ï¼Œåè€Œå¯èƒ½ä¼šè¿‡æ»¤æ‰æˆ‘ä»¬å¸Œæœ›ä¿ç•™çš„å†…å®¹ï¼Œè¿›ä¸€æ­¥ä¿®æ”¹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -S -masm=intel -o - example.cpp | c++filt | grep -vE <span class="hljs-string">&#x27;\s+\.&#x27;</span> &gt; example.asm<br></code></pre></td></tr></table></figure><h3 id="Matt-çš„ç®€å•æ–¹æ¡ˆ"><a href="#Matt-çš„ç®€å•æ–¹æ¡ˆ" class="headerlink" title="Matt çš„ç®€å•æ–¹æ¡ˆ"></a>Matt çš„ç®€å•æ–¹æ¡ˆ</h3><p>æœ‰äº†è¿™æ ·çš„æŒ‡ä»¤ï¼ŒMatt æåˆ°äº†ä»–ä»¥å‰ä½¿ç”¨çš„ç®€å•æ–¹æ¡ˆï¼šåŸºäº Linux çš„ <code>watch</code> å‘½ä»¤å®ç°å®šæ—¶æ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼Œç„¶åç”¨ <code>tmux</code> ä¸€è¾¹å¼€ <code>vim</code> ä¸€è¾¹ <code>watch</code>ï¼Œå®ç°äº†ç®€å•çš„ Compiler Explorerã€‚æˆ‘ç®€å•å¤ç°äº†ä»–çš„æ–¹æ¡ˆï¼š</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/mv03xaf.png" alt="ç®€é™‹ç‰ˆçš„ Compiler Explorer"></p><h2 id="ç®€å•è®¨è®ºå¹³å°å·®å¼‚"><a href="#ç®€å•è®¨è®ºå¹³å°å·®å¼‚" class="headerlink" title="ç®€å•è®¨è®ºå¹³å°å·®å¼‚"></a>ç®€å•è®¨è®ºå¹³å°å·®å¼‚</h2><p>å½“å‰çš„ç¼–è¯‘ç»“æœæ˜¯è¿™æ ·çš„ï¼Œå…¶ä¸­æœ‰å‡ è¡Œä¾ç„¶ä¸ Compiler Explorer ä¸Šçš„ä»£ç ä¸åŒï¼ˆç»¿è‰²ä¸ºæˆ‘çš„ç»“æœï¼Œçº¢è‰²ä¸º Compiler Explorer çš„ï¼‰ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs diff">main:<br><span class="hljs-addition">+ .LFB0:</span><br>pushrbp<br>movrbp, rsp<br><span class="hljs-addition">+ subrsp, 48</span><br><span class="hljs-addition">+ call__main</span><br><span class="hljs-deletion">- movedx, DWORD PTR [rbp-4]</span><br><span class="hljs-deletion">- moveax, DWORD PTR [rbp-8]</span><br><span class="hljs-addition">+ movedx, DWORD PTR -4[rbp]</span><br><span class="hljs-addition">+ moveax, DWORD PTR -8[rbp]</span><br>addeax, edx<br><span class="hljs-deletion">- movDWORD PTR [rbp-12], eax</span><br><span class="hljs-addition">+ movDWORD PTR -12[rbp], eax</span><br>moveax, 0<br><span class="hljs-addition">+ addrsp, 48</span><br>poprbp<br>ret<br></code></pre></td></tr></table></figure><p>æˆ‘è€ƒè™‘æ˜¯å¦æœ‰å¯èƒ½æ˜¯æœ‰å¹³å°çš„åŒºåˆ«ï¼Œäºæ˜¯åœ¨ AMD å¹³å°ï¼ŒUbuntu ç³»ç»Ÿï¼Œä½¿ç”¨åŒæ ·çš„ GCC 13 ç¼–è¯‘ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/9jx6rpj.png" alt="åœ¨ä¸åŒå¹³å°çš„ç¼–è¯‘ç»“æœä¸åŒ"></p><p>å¯ä»¥çœ‹åˆ°ç¡®å®å¯¹ <code>rsp</code> çš„æ— ç”¨æ“ä½œå’Œ <code>call __main</code> æ¶ˆå¤±äº†ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨æŒ‡é’ˆå˜é‡æ—¶ä»ç„¶æœ‰åŒºåˆ«ã€‚</p><h3 id="æŒ‡é’ˆè¯­æ³•"><a href="#æŒ‡é’ˆè¯­æ³•" class="headerlink" title="æŒ‡é’ˆè¯­æ³•"></a>æŒ‡é’ˆè¯­æ³•</h3><p>Compiler Explorer çš„ç¼–è¯‘ç»“æœä¸­çš„å¼•ç”¨æ ¼å¼æ˜¯ <code>[rbp-4]</code>ï¼Œè€Œæˆ‘ä»¬çš„æ˜¯ <code>-4[rbp]</code>ã€‚</p><p>ä¸€èˆ¬è€Œè¨€ï¼Œ<code>-4(%rbp)</code> æ˜¯ AT&amp;T è¯­æ³•ï¼Œ<code>[rbp-4]</code> æ˜¯ Intel è¯­æ³•ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„ç¼–è¯‘ç»“æœä¸­ï¼ŒIntel è¯­æ³•äº§ç”Ÿäº† <code>-4[rbp]</code> çš„ç»“æœã€‚</p><p>æˆ‘ä»¬å…ˆæ”¾ä¸‹è¿™äº›å¹³å°å·®å¼‚ï¼Œç»§ç»­æ¢ç´¢ Compiler Explorer çš„åŸç†ã€‚</p><h2 id="Compiler-Explorer-åŸç†"><a href="#Compiler-Explorer-åŸç†" class="headerlink" title="Compiler Explorer åŸç†"></a>Compiler Explorer åŸç†</h2><h3 id="æ·±å…¥æºç "><a href="#æ·±å…¥æºç " class="headerlink" title="æ·±å…¥æºç "></a>æ·±å…¥æºç </h3><p>ç°åœ¨æˆ‘ä»¬çš„ä»£ç å·²ç»å’Œ Compiler Explorer ä¸Šçš„ä»£ç åŸºæœ¬ä¸€è‡´äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åšä¸¤ä»¶äº‹ï¼šè¿‡æ»¤ Library functions å’Œ Unused labelã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/65edkm7.png" alt="Compiler Explorer çš„è¿‡æ»¤é€‰é¡¹"></p><p>æ¼”è®²ä¸­å¹¶æ²¡æœ‰æåˆ°æ˜¯æ€ä¹ˆè¿‡æ»¤çš„ï¼Œäºæ˜¯æˆ‘æŸ¥æ‰¾äº† Compiler Explorer çš„æºç ï¼š<a href="https://github.com/compiler-explorer/compiler-explorer">https://github.com/compiler-explorer/compiler-explorer</a></p><p>é¦–å…ˆæœç´¢ <code>filters</code>ï¼Œåœ¨ API æ–‡æ¡£ä¸­æ‰¾åˆ°äº†æ‰€æœ‰å¯ç”¨çš„ filtersï¼š</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/214qhv6.png" alt="filters çš„æœç´¢ç»“æœ"></p><p>ç»§ç»­æœç´¢ <code>libraryCode</code>ï¼Œæ‰¾åˆ°äº†è¿™æ®µä»£ç ï¼Œçœ‹èµ·æ¥æ˜¯ç”Ÿæˆä¸€ä¸ªè¿‡æ»¤ç”¨çš„è„šæœ¬ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/6kagrcr.png" alt="libraryCode çš„æœç´¢ç»“æœ"></p><p><code>objdump</code>ï¼Œæ˜¯å°†ç›®æ ‡æ–‡ä»¶åæ±‡ç¼–çš„å·¥å…·ï¼Œè€Œ <code>ASMPARSER</code> ä¹‹å‰å¹¶æ²¡æœ‰è§è¿‡ï¼Œä¼¼ä¹æ˜¯æ±‡ç¼–è¯­è¨€çš„è§£æå™¨ï¼Œäºæ˜¯ç»§ç»­æœç´¢ <code>externalparser</code>ï¼Œæ‰¾åˆ°äº†è¿™ä¸ªè½¯ä»¶åï¼š</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/6gl9non.png" alt="externalparser çš„æœç´¢ç»“æœ"></p><h3 id="æ›´æ–°æµ‹è¯•ä»£ç "><a href="#æ›´æ–°æµ‹è¯•ä»£ç " class="headerlink" title="æ›´æ–°æµ‹è¯•ä»£ç "></a>æ›´æ–°æµ‹è¯•ä»£ç </h3><p>ä¸ºäº†æµ‹è¯•è¿‡æ»¤åº“å‡½æ•°çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å°†æµ‹è¯•ä»£ç æ›´æ–°ä¸ºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">fq</span><span class="hljs-params">(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>)</span></span>;<br>    <span class="hljs-type">int</span> a, b, c;<br>    c = a + b;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="asm-parser"><a href="#asm-parser" class="headerlink" title="asm-parser"></a>asm-parser</h3><p>éšåæ‰¾åˆ°äº†è¯¥ä½œè€…çš„ <code>asm-parser</code> è½¯ä»¶ï¼Œä½¿ç”¨ C++ ç¼–å†™ï¼š</p><p><a href="https://github.com/compiler-explorer/asm-parser">https://github.com/compiler-explorer/asm-parser</a></p><p>è¿™ä¸ªè½¯ä»¶åªç¼–è¯‘äº† Linux å¹³å°ï¼Œæˆ‘å°è¯•åœ¨ Windows ç¼–è¯‘æ²¡æœ‰æˆåŠŸï¼Œåœ¨ Linux æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -g -c example.cpp<br>objdump -d example.o -M intel -l --insn-width=16 | ./asm-parser -stdin -binary -outputtext -library_functions &gt; example.asm<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘åçš„ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:<br>...<br> mov    DWORD PTR [rbp-0x48],0x0<br> lea    rcx,[rbp-0x49]<br> lea    rdx,[rbp-0x48]<br> lea    rax,[rbp-0x30]<br> mov    esi,0x1a<br> mov    rdi,rax<br> call   46 &lt;main+0x46&gt;<br> lea    rax,[rbp-0x49]<br> mov    rdi,rax<br> call   52 &lt;main+0x52&gt;<br> nop<br> mov    edx,DWORD PTR [rbp-0x44]<br> mov    eax,DWORD PTR [rbp-0x40]<br>...<br></code></pre></td></tr></table></figure><p>Compiler Explorer ä¸Šçš„ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:<br>...<br> mov    DWORD PTR [rbp-0x2c],0x0<br> lea    rcx,[rbp-0x2d]<br> lea    rdx,[rbp-0x2c]<br> lea    rax,[rbp-0x50]<br> mov    esi,0x1a<br> mov    rdi,rax<br> call   33 &lt;main+0x33&gt;<br>    R_X86_64_PLT32 std::vector&lt;int, std::allocator&lt;int&gt; &gt;::vector(unsigned long, int const&amp;, std::allocator&lt;int&gt; const&amp;)-0x4<br> lea    rax,[rbp-0x2d]<br> mov    rdi,rax<br> call   3f &lt;main+0x3f&gt;<br>    R_X86_64_PLT32 std::__new_allocator&lt;int&gt;::~__new_allocator()-0x4<br> nop<br> mov    edx,DWORD PTR [rbp-0x14]<br> mov    eax,DWORD PTR [rbp-0x18]<br> add    eax,edx<br> mov    DWORD PTR [rbp-0x1c],eax<br> mov    ebx,0x0<br> lea    rax,[rbp-0x50]<br> mov    rdi,rax<br> call   5c &lt;main+0x5c&gt;<br>...<br></code></pre></td></tr></table></figure><p>è¯¥è½¯ä»¶çš„ <code>-library_functions</code> å‚æ•°å®Œå…¨åˆ é™¤äº†æ‰€æœ‰çš„åº“å‡½æ•°ï¼Œå¹¶ä¸æ˜¯æœªä½¿ç”¨çš„åº“å‡½æ•°ï¼Œè€Œä¸”æˆ‘å‘ç°åœ¨ Compiler Explorer ä¸Šå¯ä»¥é€‰æ‹© <code>binary</code> é€‰é¡¹ï¼Œå³ä¸ºå…ˆç¼–è¯‘åˆ°äºŒè¿›åˆ¶å¯¹è±¡æ–‡ä»¶å†ç¼–è¯‘åˆ°æ±‡ç¼–ï¼Œè¿˜æ˜¯ç›´æ¥ä½¿ç”¨æºæ–‡ä»¶ç¼–è¯‘åˆ°æ±‡ç¼–ï¼Œè€Œè¿™ä¸ªè½¯ä»¶å¯èƒ½ç‰ˆæœ¬æœ‰äº›è½åï¼Œä¸”åªèƒ½å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/m2dxt3m.png" alt="Compiler Explorer çš„ binary é€‰é¡¹"></p><h3 id="å›åˆ°æºç "><a href="#å›åˆ°æºç " class="headerlink" title="å›åˆ°æºç "></a>å›åˆ°æºç </h3><p>å†æ¬¡å›åˆ° Compiler Explorer çš„æºç ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªåä¸º <code>asm_parser.ts</code> çš„æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰å¤§é‡çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™ä¸ªå¤§æ¦‚å°±æ˜¯è¯¥å¹³å°ç›®å‰å®é™…ä¸Šæ­£åœ¨ä½¿ç”¨çš„è¿‡æ»¤å™¨ã€‚<strong>è¿™ä¹Ÿè¿›ä¸€æ­¥å°è¯äº†æˆ‘çš„æƒ³æ³•ï¼Œè¿‡æ»¤å¹¶ä¸æ˜¯ gcc çš„å‚æ•°ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘åå†è¿‡æ»¤ã€‚</strong></p><p><img src="https://picture.zhanganzhi.com/2023/12/11/ylbpnta.png" alt="asm_parser.ts"></p><p>æˆ‘å°†æºç ä¸‹è½½ä¸‹æ¥åœ¨æœ¬åœ°è¿è¡Œï¼Œå°è¯•æŸ¥çœ‹æ˜¯å¦ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºä½¿ç”¨çš„å‘½ä»¤ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/qyoojki.png" alt="æœ¬åœ°è¿è¡Œï¼Œä½†æ˜¯æ§åˆ¶å°å¹¶æ²¡æœ‰æ—¥å¿—è¾“å‡º"></p><h2 id="æå–æºç ç»„åˆæœ¬åœ°ç¨‹åº"><a href="#æå–æºç ç»„åˆæœ¬åœ°ç¨‹åº" class="headerlink" title="æå–æºç ç»„åˆæœ¬åœ°ç¨‹åº"></a>æå–æºç ç»„åˆæœ¬åœ°ç¨‹åº</h2><h3 id="æå–è¿‡æ»¤çš„-js-ä»£ç "><a href="#æå–è¿‡æ»¤çš„-js-ä»£ç " class="headerlink" title="æå–è¿‡æ»¤çš„ js ä»£ç "></a>æå–è¿‡æ»¤çš„ js ä»£ç </h3><p>äºæ˜¯æˆ‘è®¡åˆ’å°†è¿‡æ»¤çš„ js ä»£ç æå–å‡ºæ¥é‡æ–°å°è£…ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œäº†ã€‚</p><p>åœ¨ä¸Šæ–‡æåˆ°çš„ <code>asm_parser.ts</code> æ–‡ä»¶ä¸­ï¼Œæœ€åä¸¤ä¸ªå‡½æ•°ä¼¼ä¹æ˜¯å¤„ç†äºŒè¿›åˆ¶å’ŒéäºŒè¿›åˆ¶æ±‡ç¼–çš„å‡½æ•°ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title function_">processBinaryAsm</span>(<span class="hljs-attr">asmResult</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">filters</span>: <span class="hljs-title class_">ParseFiltersAndOutputOptions</span>): <span class="hljs-title class_">ParsedAsmResult</span> &#123;<br>    ...<br>&#125;<br><br><span class="hljs-title function_">process</span>(<span class="hljs-params">asm: <span class="hljs-built_in">string</span>, filters: ParseFiltersAndOutputOptions</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processAsm</span>(asm, filters);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¾ˆç®€å•äº†ï¼Œæ‰“æ–­ç‚¹è°ƒè¯•ï¼ŒæŸ¥çœ‹æ–¹æ³•å‚æ•°ï¼š</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/s6jez8j.png" alt="æ–­ç‚¹è°ƒè¯•"></p><p><code>asm</code> æ˜¯æ±‡ç¼–çš„åŸæ–‡ï¼Œ<code>filter</code> æ˜¯ä¸ªé›†åˆäº†è¿‡æ»¤é€‰é¡¹çš„å¯¹è±¡ã€‚</p><p>æ ¹æ®è¿™é‡Œçš„åŸæ–‡ï¼ŒçŸ¥é“äº†å®é™…çš„ç¼–è¯‘å‚æ•°æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -g -S -masm=intel -o - example.cpp &gt; example.asm<br></code></pre></td></tr></table></figure><p>æ·»åŠ äº† <code>-g</code> å‚æ•°ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨æ±‡ç¼–ä»£ç ä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯ï¼Œæˆ‘çŒœæµ‹ <code>c++filt</code> ä¼šåœ¨ä¹‹åä½¿ç”¨ã€‚</p><p>æˆ‘å°† <code>asm_parser.ts</code> å’Œéœ€è¦çš„å…¶ä»–æ–‡ä»¶æå–å‡ºæ¥ï¼Œå¹¶å†™äº†ä¸€ä¸ªä¸»æ–‡ä»¶ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/3e3l94o.png" alt="æå–çš„ä¸»æ–‡ä»¶"></p><p>æ ¹æ®ä¹‹å‰ C++ ç‰ˆ asm-parser çš„æ–‡æ¡£ï¼Œè¿‡æ»¤åº“å‡½æ•°æ˜¯åŸºäºæ–‡ä»¶è·¯å¾„çš„ï¼Œæ–‡ä»¶åå¿…é¡»æ˜¯ <code>example.cpp</code> æ‰å¯ä»¥è¢«ä¿ç•™ï¼Œå¦åˆ™ä¸»æ–‡ä»¶ä¼šè¢«å½“åšåº“æ–‡ä»¶è¢«è¿‡æ»¤ã€‚æºç ä¸­çš„è¿™ä¸ªæ­£åˆ™å±•ç¤ºäº†è¿™ä¸€ç‚¹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">stdInLooking</span> = <span class="hljs-regexp">/&lt;stdin&gt;|^-$|example\.[^/]+$|&lt;source&gt;/</span>;<br></code></pre></td></tr></table></figure><h3 id="JSON-è½¬çº¯æ–‡æœ¬"><a href="#JSON-è½¬çº¯æ–‡æœ¬" class="headerlink" title="JSON è½¬çº¯æ–‡æœ¬"></a>JSON è½¬çº¯æ–‡æœ¬</h3><p>å½“å‰çš„è¾“å‡ºè¿˜æ˜¯ JSON çš„æ ¼å¼ï¼Œæˆ‘å¸Œæœ›è½¬ä¸ºçº¯æ–‡æœ¬ï¼Œäºæ˜¯æ’°å†™äº†ä¸€ä¸ªå‡½æ•°ä½¿å…¶è¾“å‡ºçº¯æ–‡æœ¬ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">resultToText</span>(<span class="hljs-params">r: ParsedAsmResult</span>) &#123;<br>  <span class="hljs-keyword">return</span> r.<span class="hljs-property">asm</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> line.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="c-filt"><a href="#c-filt" class="headerlink" title="c++filt"></a>c++filt</h3><p>å†ä½¿ç”¨ <code>c++filt</code> è¿‡æ»¤ C++ ç¬¦å·ï¼Œå°±å¯ä»¥å¾—åˆ°å’Œ Compiler Explorer å‡ ä¹ä¸€æ ·çš„ç»“æœäº†ã€‚</p><h3 id="ç¬¦å·åçš„æè¿°"><a href="#ç¬¦å·åçš„æè¿°" class="headerlink" title="ç¬¦å·åçš„æè¿°"></a>ç¬¦å·åçš„æè¿°</h3><p><img src="https://picture.zhanganzhi.com/2023/12/11/klyq497.png" alt="å¯¹æ¯”è¾“å‡ºç»“æœ"></p><p>ä¸Šå›¾çš„å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼ŒCompiler Explorer çš„è¾“å‡ºåœ¨è°ƒç”¨å‡½æ•°åä½¿ç”¨æ–¹æ‹¬å·è¡¥å……äº†ä¸€æ®µæè¿°ã€‚å†æ¬¡é˜…è¯»æºç åï¼Œæˆ‘å°† <code>CppDemangler</code> æå–äº†å‡ºæ¥ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/a0hquni.png" alt="Compiler Explorer ä½¿ç”¨è¿™ä¸ªç±»æ ‡æ³¨åº“å‡½æ•°"></p><p>è‡³æ­¤ï¼Œè¾“å‡ºä¸ godbolt ä¸Šçš„è¾“å‡ºå®Œå…¨ä¸€è‡´ã€‚</p><h2 id="Typescript-ç‰ˆ-asm-parser"><a href="#Typescript-ç‰ˆ-asm-parser" class="headerlink" title="Typescript ç‰ˆ asm-parser"></a>Typescript ç‰ˆ asm-parser</h2><h3 id="å®Œå–„å‘½ä»¤è¡Œæ¥å£"><a href="#å®Œå–„å‘½ä»¤è¡Œæ¥å£" class="headerlink" title="å®Œå–„å‘½ä»¤è¡Œæ¥å£"></a>å®Œå–„å‘½ä»¤è¡Œæ¥å£</h3><p>æœ€ååšä¸€äº›å°ä¿®æ”¹ï¼Œå®Œå–„å‘½ä»¤è¡Œæ¥å£ï¼Œä» stdin è¯»å–æ±‡ç¼–ä»£ç ï¼Œè¾“å‡ºåˆ° stdoutã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">AsmParser</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/lib/asm-parser.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">BaseCompiler</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/lib/fake-base-compiler.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">CppDemangler</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/lib/demangler/cpp.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">ParsedAsmResult</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/types/asmresult/asmresult.interfaces.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>  <span class="hljs-title class_">ParseFiltersAndOutputOptions</span><br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./src/types/features/filters.interfaces.js&quot;</span>;<br><br><span class="hljs-keyword">const</span> baseCompiler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseCompiler</span>();<br><span class="hljs-keyword">const</span> cppDemangler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CppDemangler</span>(<span class="hljs-string">&quot;c++filt&quot;</span>, baseCompiler);<br><span class="hljs-keyword">const</span> asmParser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsmParser</span>();<br><br><span class="hljs-keyword">const</span> args = process.<span class="hljs-property">argv</span>;<br><span class="hljs-keyword">const</span> outputTextFlag = args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--outputtext&quot;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-attr">filters</span>: <span class="hljs-title class_">ParseFiltersAndOutputOptions</span> = &#123;<br>  <span class="hljs-attr">labels</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--unused_labels&quot;</span>),<br>  <span class="hljs-attr">libraryCode</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--library_code&quot;</span>),<br>  <span class="hljs-attr">directives</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--directives&quot;</span>),<br>  <span class="hljs-attr">commentOnly</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--comment_only&quot;</span>),<br>  <span class="hljs-attr">binary</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--binary&quot;</span>),<br>  <span class="hljs-attr">binaryObject</span>: args.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;--binary&quot;</span>)<br>&#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">resultToText</span>(<span class="hljs-params">r: ParsedAsmResult</span>) &#123;<br>  <span class="hljs-keyword">return</span> r.<span class="hljs-property">asm</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> line.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getInput</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) &#123;<br>    <span class="hljs-keyword">const</span> stdin = process.<span class="hljs-property">stdin</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;&quot;</span>;<br><br>    stdin.<span class="hljs-title function_">setEncoding</span>(<span class="hljs-string">&quot;utf8&quot;</span>);<br>    stdin.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;data&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">chunk</span>) &#123;<br>      data += chunk;<br>    &#125;);<br><br>    stdin.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;end&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-title function_">resolve</span>(data);<br>    &#125;);<br><br>    stdin.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;error&#x27;</span>, reject);<br>  &#125;);<br>&#125;<br><br><span class="hljs-title function_">getInput</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span>) =&gt; &#123;<br>  <span class="hljs-comment">// parse</span><br>  <span class="hljs-keyword">let</span> result = asmParser.<span class="hljs-title function_">process</span>(input, filters);<br><br>  <span class="hljs-comment">// demangle</span><br>  result = <span class="hljs-keyword">await</span> cppDemangler.<span class="hljs-title function_">process</span>(result);<br><br>  <span class="hljs-comment">// print</span><br>  <span class="hljs-keyword">if</span> (outputTextFlag) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">resultToText</span>(result));<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -g -S -masm=intel -o - example.cpp | ts-node-esm index.ts --unused_labels --library_code --directives --comment_only  --outputtext &gt; example.asm<br></code></pre></td></tr></table></figure><p>å†æµ‹è¯•ï¼Œåœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œè¾“å‡ºç»“æœå®Œå…¨ä¸€è‡´ã€‚</p><p>ç„¶åå†ä½¿ç”¨ <a href="https://github.com/vercel/pkg">https://github.com/vercel/pkg</a> å°† ts ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥åŒæ—¶ç¼–è¯‘åˆ°ä¸‰ä¸ªå¹³å°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">tsc index.ts --target esnext --module nodenext --skipLibCheck --outDir dist<br>rollup dist/index.js --file dist/bundle.js --format cjs<span class="hljs-string">&quot;,</span><br><span class="hljs-string">pkg dist/bundle.js --out-path dist</span><br></code></pre></td></tr></table></figure><p>æˆ‘å°†è¿™ä¸ªé¡¹ç›®å¼€æºåœ¨äº† GitHub ä¸Šï¼Œæ¬¢è¿å¤§å®¶ä½¿ç”¨å’Œæå‡ºå»ºè®®ï¼š<a href="https://github.com/AnzhiZhang/asm-parser">https://github.com/AnzhiZhang/asm-parser</a></p><p>è‡³æ­¤ï¼Œå®Œæ•´çš„ç¼–è¯‘å‘½ä»¤æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -g -S -masm=intel -o - example.cpp | asm-parser-win --unused_labels --library_code --directives --comment_only --outputtext &gt; example.asm<br></code></pre></td></tr></table></figure><h3 id="æºç å¯¹åº”å…³ç³»å’Œä¸Šè‰²"><a href="#æºç å¯¹åº”å…³ç³»å’Œä¸Šè‰²" class="headerlink" title="æºç å¯¹åº”å…³ç³»å’Œä¸Šè‰²"></a>æºç å¯¹åº”å…³ç³»å’Œä¸Šè‰²</h3><p>è¿˜æœ‰æœ€åä¸€ä¸ªå°é—®é¢˜ï¼ŒCompiler Explorer ä¸Šçš„æ±‡ç¼–ä»£ç æ˜¯æœ‰ä¸Šè‰²çš„ï¼Œç”¨äºæ ‡è®°å’Œæºç çš„å¯¹åº”å…³ç³»ï¼Œè€Œæˆ‘ä»¬çš„æ²¡æœ‰ã€‚æŸ¥çœ‹æ¥å£çš„è¿”å›æ•°æ®ï¼Œå¯ä»¥å‘ç°å‰ç«¯æ”¶åˆ°çš„æ˜¯ JSON æ ¼å¼çš„ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰å¯¹åº”æºç çš„è¡Œå·ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯å‰ç«¯å®ç°çš„ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/12/11/g4872u6.png" alt="Compiler Explorer çš„è¡Œæ•°å¯¹åº”å…³ç³»"></p><p>åªéœ€è¦åœ¨ä½¿ç”¨ <code>asm-parser</code> æ—¶ç§»é™¤ <code>--outputtext</code> å‚æ•°ï¼Œå°±å¯ä»¥å¾—åˆ°å¸¦æœ‰æºç è¡Œæ•°å¯¹åº”å…³ç³»çš„æ•°æ®äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -g -S -masm=intel -o - example.cpp | asm-parser-win --unused_labels --library_code --directives --comment_only &gt; example.asm<br></code></pre></td></tr></table></figure><h2 id="å…¶ä»–å¹³å°"><a href="#å…¶ä»–å¹³å°" class="headerlink" title="å…¶ä»–å¹³å°"></a>å…¶ä»–å¹³å°</h2><p>æˆ‘ä»¬è¿˜å¸Œæœ›åœ¨ armv8 å’Œ riscv å¹³å°ä¸Šè·å¾—è¿‡æ»¤çš„æ±‡ç¼–ä»£ç ï¼Œä¸‹æ–‡ç®€çŸ­ä»‹ç»äº†å®ç°æ–¹å¼ã€‚</p><p>ä¸ºæ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»…ç”¨ä»¥ä¸‹ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a, b, c;<br>    c = a + b;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿äº¤å‰ç¼–è¯‘ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>clang</code>ï¼Œæ·»åŠ  <code>-target &lt;triple&gt;</code> å³å¯æŒ‡å®šç›®æ ‡å¹³å°<sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Cross-compilation using Clang â€” Clang 18.0.0git documentation](https://clang.llvm.org/docs/CrossCompilation.html#target-triple). [Archived](https://web.archive.org/web/20231211182735/https://clang.llvm.org/docs/CrossCompilation.html#target-triple) on 2023-12-11. Retrieved 2023-12-11.">[8]</span></a></sup>ï¼š</p><blockquote><p>The triple has the general format <code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;env&gt;</code>, where:</p><ul><li><code>arch</code> &#x3D; <code>x86_64</code>, <code>i386</code>, <code>arm</code>, <code>thumb</code>, <code>mips</code>, etc.</li><li><code>sub</code> &#x3D; for ex. on ARM: <code>v5</code>, <code>v6m</code>, <code>v7a</code>, <code>v7m</code>, etc.</li><li><code>vendor</code> &#x3D; <code>pc</code>, <code>apple</code>, <code>nvidia</code>, <code>ibm</code>, etc.</li><li><code>sys</code> &#x3D; <code>none</code>, <code>linux</code>, <code>win32</code>, <code>darwin</code>, <code>cuda</code>, etc.</li><li><code>env</code> &#x3D; <code>eabi</code>, <code>gnu</code>, <code>android</code>, <code>macho</code>, <code>elf</code>, etc.</li></ul></blockquote><h3 id="armv8"><a href="#armv8" class="headerlink" title="armv8"></a>armv8</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">clang -g -S -o - -target aarch64-pc-linux-gnu example.cpp | asm-parser-win --unused_labels --library_code --directives --comment_only --outputtext<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:                                   // @main<br>        sub     sp, sp, #16<br>        mov     w0, wzr<br>        str     wzr, [sp, #12]<br>        ldr     w8, [sp, #8]<br>        ldr     w9, [sp, #4]<br>        add     w8, w8, w9<br>        str     w8, [sp]<br>        add     sp, sp, #16<br>        ret<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2023/12/11/ie2wr3i.png" alt="Compiler Explorer ç¼–è¯‘çš„ armv8 ç»“æœ"></p><h3 id="riscv"><a href="#riscv" class="headerlink" title="riscv"></a>riscv</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">clang -g -S -o - -target riscv64-unknown-linux-gnu example.cpp | asm-parser-win --unused_labels --library_code --directives --comment_only --outputtext<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs assembly">main:                                   # @main<br>        addi    sp, sp, -32<br>        sd      ra, 24(sp)                      # 8-byte Folded Spill<br>        sd      s0, 16(sp)                      # 8-byte Folded Spill<br>        addi    s0, sp, 32<br>        li      a0, 0<br>        sw      a0, -20(s0)<br>        lw      a1, -24(s0)<br>        lw      a2, -28(s0)<br>        addw    a1, a1, a2<br>        sw      a1, -32(s0)<br>        ld      ra, 24(sp)                      # 8-byte Folded Reload<br>        ld      s0, 16(sp)                      # 8-byte Folded Reload<br>        addi    sp, sp, 32<br>        ret<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2023/12/11/w99hp8l.png" alt="Compiler Explorer ç¼–è¯‘çš„ riscv ç»“æœ"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>é˜®ä¸€å³°. <a href="https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html">æ±‡ç¼–è¯­è¨€å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a>. 2018-01-21. <a href="https://web.archive.org/web/20231211131556/https://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>Antoine Pelisse. <a href="https://stackoverflow.com/questions/4779336/does-c-compile-to-assembly/4779372#4779372">Does C++ compile to assembly?</a>. 2011-01-24. <a href="https://web.archive.org/web/20231211153914/https://stackoverflow.com/questions/4779336/does-c-compile-to-assembly/4779372#4779372">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>Andrew Edgecombe. <a href="https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc/137074#137074">How do you get assembler output from C&#x2F;C++ source in GCC?</a>. 2008-09-26. <a href="https://web.archive.org/web/20231211153931/https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc/137074#137074">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>David Wohlferd. <a href="https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874">What are .seh_* assembly commands that gcc outputs?</a>. 2016-07-04. <a href="https://web.archive.org/web/20231211160356/https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://stackoverflow.com/questions/20819927/what-are-seh-assembly-commands-that-gcc-outputs/38181874#38181874">Code Gen Options (Using the GNU Compiler Collection (GCC))</a>. <a href="https://web.archive.org/web/20231211161014/https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>Peter Cordes. <a href="https://stackoverflow.com/questions/56245402/step-into-standard-library-call-with-godbolt/56246283#56246283">Step into standard library call with godbolt</a>. 2019-05-21. <a href="https://web.archive.org/web/20231211162509/https://stackoverflow.com/questions/56245402/step-into-standard-library-call-with-godbolt/56246283#56246283">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>Peter Cordes. <a href="https://stackoverflow.com/questions/38552116/how-to-remove-noise-from-gcc-clang-assembly-output/38552509#38552509">How to remove â€œnoiseâ€ from GCC&#x2F;clang assembly output?</a>. 2016-01-24. <a href="https://web.archive.org/web/20231211162508/https://stackoverflow.com/questions/38552116/how-to-remove-noise-from-gcc-clang-assembly-output/38552509#38552509">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:8" class="footnote-text"><span><a href="https://clang.llvm.org/docs/CrossCompilation.html#target-triple">Cross-compilation using Clang â€” Clang 18.0.0git documentation</a>. <a href="https://web.archive.org/web/20231211182735/https://clang.llvm.org/docs/CrossCompilation.html#target-triple">Archived</a> on 2023-12-11. Retrieved 2023-12-11.<a href="#fnref:8" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>å­¦æœ¯</category>
      
      <category>ç¼–è¯‘åŸç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>æ±‡ç¼–</tag>
      
      <tag>Compiler Explorer</tag>
      
      <tag>ç¼–è¯‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‹è½½ PDF.js ç¦æ­¢ä¸‹è½½çš„æ–‡ä»¶</title>
    <link href="/zh-CN/2023/08/6946cd043888/"/>
    <url>/zh-CN/2023/08/6946cd043888/</url>
    
    <content type="html"><![CDATA[<blockquote><p>éƒ¨åˆ†ä½¿ç”¨ PDF.js æä¾› PDF é¢„è§ˆçš„ç½‘ç«™ä¼šç¦æ­¢ä¸‹è½½æ–‡ä»¶ï¼Œæœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ç»•è¿‡é™åˆ¶ï¼Œä¸‹è½½è¿™äº›æ–‡ä»¶ã€‚</p></blockquote><span id="more"></span><h2 id="PDF-js-ç®€ä»‹"><a href="#PDF-js-ç®€ä»‹" class="headerlink" title="PDF.js ç®€ä»‹"></a>PDF.js ç®€ä»‹</h2><p>PDF.js æ˜¯ä¸€ä¸ªé€šç”¨çš„ã€åŸºäº Web æ ‡å‡†çš„å¹³å°ï¼Œç”¨äºè§£æå’Œå‘ˆç° PDF<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[PDF.js](https://mozilla.github.io/pdf.js/). Mozilla and individual contributors. [2023-08-17].">[1]</span></a></sup>ã€‚</p><h2 id="ç¦ç”¨çš„åŸç†"><a href="#ç¦ç”¨çš„åŸç†" class="headerlink" title="ç¦ç”¨çš„åŸç†"></a>ç¦ç”¨çš„åŸç†</h2><p>ç¦ç”¨ä¸»è¦æ˜¯ä¾èµ–ä»¥ä¸‹å‡ ä¸ªé­”æ”¹ï¼Œéƒ¨åˆ†ç½‘ç«™å¯èƒ½åªæœ‰å…¶ä¸­ä¹‹ä¸€æˆ–å‡ ä¸ªï¼š</p><ol><li>ç¦ç”¨å³é”®èœå•</li><li>éšè—ä¸‹è½½æŒ‰é’®</li><li>ç§»é™¤ PDF.js eventBus çš„ openfile, save å’Œ print äº‹ä»¶</li><li>ç§»é™¤ PDF.js ç›¸å…³ä¸‹è½½å’Œæ‰“å°çš„æ–¹æ³•ï¼Œé¿å…ä» Console è°ƒç”¨</li></ol><p>æ›´å¤šçš„è¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒ ã€Š<a href="https://cloud.tencent.com/developer/article/1549679?from=15425">pdf.jsç¦ç”¨æ‰“å¼€æ‰“å°ä¸‹è½½åŠŸèƒ½</a>ã€‹<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[pdf.jsç¦ç”¨æ‰“å¼€æ‰“å°ä¸‹è½½åŠŸèƒ½](https://cloud.tencent.com/developer/article/1549679?from=15425). ä¼¼æ°´çš„æµå¹´. 2019-12-05 [2023-08-17]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20230818123734/https://cloud.tencent.com/developer/article/1549679?from=15425)äº2023-08-18ï¼‰.">[2]</span></a></sup></p><p><img src="https://picture.zhanganzhi.com/2023/08/18/uadnbjh.png" alt="æ²¡æœ‰ä¸‹è½½æŒ‰é’®ï¼Œä¿å­˜å’Œæ‰“å°çš„å¿«æ·é”®å’Œå³é”®ä¹Ÿæ— æ•ˆ"></p><h2 id="ç ”ç©¶è¿‡ç¨‹"><a href="#ç ”ç©¶è¿‡ç¨‹" class="headerlink" title="ç ”ç©¶è¿‡ç¨‹"></a>ç ”ç©¶è¿‡ç¨‹</h2><p>é˜…è¯» Sourcesï¼Œå‘ç°ç¡®å®ä½¿ç”¨äº†æ–‡ç« ä¸­çš„ç±»ä¼¼æ–¹æ³•ï¼Œæœç´¢ <code>download</code> å¯ä»¥æ‰¾åˆ°å¤šå¤„è¢«æ³¨é‡Šçš„å†…å®¹ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/08/18/e3ns35c.png" alt="è¢«éšè—çš„ç›¸å…³æ–¹æ³•"></p><p>åœ¨äº†è§£äº†åŸç†åï¼Œè§£å†³å°±å¾ˆç®€å•äº†ï¼ŒæŸçŸ¥åäººå£«è¯´è¿‡ï¼š</p><blockquote><p>ç»™ç”¨æˆ·çœ‹çš„æ•°æ®ä¸€å®šå¯ä»¥è¢«ä¿å­˜ä¸‹æ¥ï¼Œå³ä½¿æ˜¯ç”¨æ‰‹æœºæ‹å±å¹•ã€‚</p></blockquote><p>é¦–å…ˆæˆ‘åœ¨ Console ä¸­æ‰¾åˆ°äº† <code>PDFViewerApplication</code> å¯¹è±¡ï¼Œç¡®è®¤ç¡®å®æ²¡æœ‰ downlaod æ–¹æ³•ã€‚<strong>éœ€è¦æ³¨æ„è¿™ä¸ªç½‘ç«™çš„ <code>PDFViewerApplication</code> åœ¨ <code>this[0]</code> ä¸­ï¼Œä½†ä¸åŒç½‘ç«™å¯èƒ½æœ‰æ‰€åŒºåˆ«ï¼Œä¸‹æ–‡çš„ä»£ç å®é™…ä½¿ç”¨æ—¶ä¹Ÿè¦æ³¨æ„ä¿®æ”¹ã€‚</strong></p><p><img src="https://picture.zhanganzhi.com/2023/08/18/eyi55v2.png" alt="ä¸‹è½½æ–¹æ³•ä¹Ÿè¢«æ³¨é‡Šäº†"></p><p>ç”±äºæµè§ˆå™¨é‡Œé˜…è¯»å®åœ¨éº»çƒ¦ï¼Œäºæ˜¯æˆ‘ä¸‹è½½äº†ä¸€ä»½ PDF.js æºç ï¼Œåœ¨ <code>/web/viewer.js</code> ä¸­æ‰¾åˆ°äº†æ ¸å¿ƒçš„ä¸¤æ®µä»£ç ï¼š</p><p>ç¬¬ä¸€æ®µæ˜¯ <code>PDFViewerApplication</code> çš„ <code>download</code> æ–¹æ³•ï¼Œè·å–äº†æ–‡ä»¶çš„ blob ç„¶åè°ƒç”¨äº† <code>downloadManager</code> çš„ <code>download</code> æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">PDFViewerApplication</span> = &#123;<br>  <span class="hljs-comment">/** å·²çœç•¥ */</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">download</span>(<span class="hljs-params">options = &#123;&#125;</span>) &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_downloadUrl</span>,<br>      filename = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_docFilename</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_ensureDownloadComplete</span>();<br>      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">pdfDocument</span>.<span class="hljs-title function_">getData</span>();<br>      <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([data], &#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;application/pdf&quot;</span><br>      &#125;);<br>      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">downloadManager</span>.<span class="hljs-title function_">download</span>(blob, url, filename, options);<br>    &#125; <span class="hljs-keyword">catch</span> &#123;<br>      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">downloadManager</span>.<span class="hljs-title function_">downloadUrl</span>(url, filename, options);<br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">/** å·²çœç•¥ */</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒæ®µæ˜¯ä¸€ä¸ª <code>download</code> æ–¹æ³•å’Œ <code>DownloadManager</code> ç±»ï¼Œè¿™ä¸ªç±»çš„ <code>download</code> æ–¹æ³•ä¼šè°ƒç”¨è¿™ä¸ªç‹¬ç«‹çš„ <code>download</code> æ–¹æ³•ï¼Œéšååˆ›å»ºä¸€ä¸ª <code>a</code> æ ‡ç­¾ï¼Œç„¶åè°ƒç”¨ <code>a.click()</code> æ–¹æ³•ï¼Œå®ç°ä¸‹è½½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">download</span>(<span class="hljs-params">blobUrl, filename</span>) &#123;<br>  <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;a&quot;</span>);<br>  <span class="hljs-keyword">if</span> (!a.<span class="hljs-property">click</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;DownloadManager: &quot;a.click()&quot; is not supported.&#x27;</span>);<br>  &#125;<br>  a.<span class="hljs-property">href</span> = blobUrl;<br>  a.<span class="hljs-property">target</span> = <span class="hljs-string">&quot;_parent&quot;</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;download&quot;</span> <span class="hljs-keyword">in</span> a) &#123;<br>    a.<span class="hljs-property">download</span> = filename;<br>  &#125;<br>  (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>).<span class="hljs-title function_">append</span>(a);<br>  a.<span class="hljs-title function_">click</span>();<br>  a.<span class="hljs-title function_">remove</span>();<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadManager</span> &#123;<br>  #openBlobUrls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();<br>  <span class="hljs-title function_">downloadUrl</span>(<span class="hljs-params">url, filename, _options</span>) &#123;<br>    <span class="hljs-keyword">if</span> (!(<span class="hljs-number">0</span>, _pdfjsLib.<span class="hljs-property">createValidAbsoluteUrl</span>)(url, <span class="hljs-string">&quot;http://example.com&quot;</span>)) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`downloadUrl - not a valid URL: <span class="hljs-subst">$&#123;url&#125;</span>`</span>);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-title function_">download</span>(url + <span class="hljs-string">&quot;#pdfjs.action=download&quot;</span>, filename);<br>  &#125;<br>  <span class="hljs-title function_">downloadData</span>(<span class="hljs-params">data, filename, contentType</span>) &#123;<br>    <span class="hljs-keyword">const</span> blobUrl = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([data], &#123;<br>      <span class="hljs-attr">type</span>: contentType<br>    &#125;));<br>    <span class="hljs-title function_">download</span>(blobUrl, filename);<br>  &#125;<br>  <span class="hljs-title function_">openOrDownloadData</span>(<span class="hljs-params">element, data, filename</span>) &#123;<br>    <span class="hljs-keyword">const</span> isPdfData = (<span class="hljs-number">0</span>, _pdfjsLib.<span class="hljs-property">isPdfFile</span>)(filename);<br>    <span class="hljs-keyword">const</span> contentType = isPdfData ? <span class="hljs-string">&quot;application/pdf&quot;</span> : <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span> (isPdfData) &#123;<br>      <span class="hljs-keyword">let</span> blobUrl = <span class="hljs-variable language_">this</span>.#openBlobUrls.<span class="hljs-title function_">get</span>(element);<br>      <span class="hljs-keyword">if</span> (!blobUrl) &#123;<br>        blobUrl = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([data], &#123;<br>          <span class="hljs-attr">type</span>: contentType<br>        &#125;));<br>        <span class="hljs-variable language_">this</span>.#openBlobUrls.<span class="hljs-title function_">set</span>(element, blobUrl);<br>      &#125;<br>      <span class="hljs-keyword">let</span> viewerUrl;<br>      viewerUrl = <span class="hljs-string">&quot;?file=&quot;</span> + <span class="hljs-built_in">encodeURIComponent</span>(blobUrl + <span class="hljs-string">&quot;#&quot;</span> + filename);<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(viewerUrl);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>      &#125; <span class="hljs-keyword">catch</span> (ex) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`openOrDownloadData: <span class="hljs-subst">$&#123;ex&#125;</span>`</span>);<br>        <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(blobUrl);<br>        <span class="hljs-variable language_">this</span>.#openBlobUrls.<span class="hljs-title function_">delete</span>(element);<br>      &#125;<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">downloadData</span>(data, filename, contentType);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br>  <span class="hljs-title function_">download</span>(<span class="hljs-params">blob, url, filename, _options</span>) &#123;<br>    <span class="hljs-keyword">const</span> blobUrl = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);<br>    <span class="hljs-title function_">download</span>(blobUrl, filename);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªç‹¬ç«‹çš„ <code>download</code> æ–¹æ³•å–å‡ºæ¥ï¼ŒåŠ ä¸Š <code>PDFViewerApplication.pdfDocument.getData()</code>ï¼Œç”Ÿæˆ blob å¹¶ä¸‹è½½å³å¯ã€‚å°†ä¸‹é¢è¿™æ®µç²˜è´´åˆ° Console ä¸­ï¼Œå³å¯ä¸‹è½½ã€‚<strong>è¯·æ³¨æ„ <code>this[0].PDFViewerApplication</code></strong> å¯èƒ½éœ€è¦ä¿®æ”¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">download</span>(<span class="hljs-params">blobUrl, filename</span>) &#123;<br>  <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;a&quot;</span>);<br>  <span class="hljs-keyword">if</span> (!a.<span class="hljs-property">click</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;DownloadManager: &quot;a.click()&quot; is not supported.&#x27;</span>);<br>  &#125;<br>  a.<span class="hljs-property">href</span> = blobUrl;<br>  a.<span class="hljs-property">target</span> = <span class="hljs-string">&quot;_parent&quot;</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;download&quot;</span> <span class="hljs-keyword">in</span> a) &#123;<br>    a.<span class="hljs-property">download</span> = filename;<br>  &#125;<br>  (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>).<span class="hljs-title function_">append</span>(a);<br>  a.<span class="hljs-title function_">click</span>();<br>  a.<span class="hljs-title function_">remove</span>();<br>&#125;<br><br><span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>[<span class="hljs-number">0</span>].<span class="hljs-property">PDFViewerApplication</span>.<span class="hljs-property">pdfDocument</span>.<span class="hljs-title function_">getData</span>();<br><span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([data], &#123;<br>  <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;application/pdf&quot;</span><br>&#125;);<br><span class="hljs-keyword">const</span> blobUrl = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);<br><span class="hljs-keyword">const</span> filename = <span class="hljs-variable language_">this</span>[<span class="hljs-number">0</span>].<span class="hljs-property">PDFViewerApplication</span>.<span class="hljs-property">contentDispositionFilename</span>;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(blobUrl);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(filename)<br><span class="hljs-title function_">download</span>(blobUrl, filename);<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2023/08/18/kqz47lw.png" alt="æˆåŠŸè·å– blob å¹¶ä¸‹è½½"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://mozilla.github.io/pdf.js/">PDF.js</a>. Mozilla and individual contributors. [2023-08-17].<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://cloud.tencent.com/developer/article/1549679?from=15425">pdf.jsç¦ç”¨æ‰“å¼€æ‰“å°ä¸‹è½½åŠŸèƒ½</a>. ä¼¼æ°´çš„æµå¹´. 2019-12-05 [2023-08-17]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20230818123734/https://cloud.tencent.com/developer/article/1549679?from=15425">å­˜æ¡£</a>äº2023-08-18ï¼‰.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>é€†å‘å·¥ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
      <tag>é€†å‘å·¥ç¨‹</tag>
      
      <tag>PDF.js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Security è‡ªå®šä¹‰ @Anonymous å’Œ @HasRole æ³¨è§£</title>
    <link href="/zh-CN/2023/08/f2d4df6ce0b9/"/>
    <url>/zh-CN/2023/08/f2d4df6ce0b9/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨ SpringSecurity æ—¶ï¼Œä¸åŒæ¥å£çš„é‰´æƒè¾ƒä¸ºéº»çƒ¦ï¼Œæœ¬æ–‡å®ç°äº† @Anonymous å’Œ @HasRole æ³¨è§£ï¼Œä½¿å¾—é‰´æƒæ›´åŠ ç®€å•ã€‚</p></blockquote><span id="more"></span><h2 id="ç¼–å†™æ³¨è§£"><a href="#ç¼–å†™æ³¨è§£" class="headerlink" title="ç¼–å†™æ³¨è§£"></a>ç¼–å†™æ³¨è§£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><br><span class="hljs-meta">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Anonymous &#123;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><br><span class="hljs-meta">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> HasRole &#123;<br>    Role <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¼–å†™-AnonymousAuthenticationToken-å’Œå·¥å…·ç±»"><a href="#ç¼–å†™-AnonymousAuthenticationToken-å’Œå·¥å…·ç±»" class="headerlink" title="ç¼–å†™ AnonymousAuthenticationToken å’Œå·¥å…·ç±»"></a>ç¼–å†™ AnonymousAuthenticationToken å’Œå·¥å…·ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Collection;<br><br><span class="hljs-keyword">import</span> org.springframework.security.core.GrantedAuthority;<br><span class="hljs-keyword">import</span> org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationToken;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousAuthenticationToken</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">PreAuthenticatedAuthenticationToken</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AnonymousAuthenticationToken</span><span class="hljs-params">(Object aPrincipal, Object aCredentials, Collection&lt;? extends GrantedAuthority&gt; anAuthorities)</span> &#123;<br>        <span class="hljs-built_in">super</span>(aPrincipal, aCredentials, anAuthorities);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.security.core.Authentication;<br><span class="hljs-keyword">import</span> org.springframework.security.core.context.SecurityContextHolder;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityUtils</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Get authentication.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> authentication.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Authentication <span class="hljs-title function_">getAuthentication</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> SecurityContextHolder.getContext().getAuthentication();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Get principal.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> principal.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">getPrincipal</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Authentication</span> <span class="hljs-variable">authentication</span> <span class="hljs-operator">=</span> getAuthentication();<br>        <span class="hljs-keyword">return</span> authentication == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : authentication.getPrincipal();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Get current account.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> current account.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Account <span class="hljs-title function_">getCurrentAccount</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isAuthenticated()) &#123;<br>            <span class="hljs-keyword">return</span> (Account) getPrincipal();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;Current principal is not an account&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Set authentication.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> authentication authentication.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAuthentication</span><span class="hljs-params">(Authentication authentication)</span> &#123;<br>        SecurityContextHolder.getContext().setAuthentication(authentication);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¼–å†™-Filter"><a href="#ç¼–å†™-Filter" class="headerlink" title="ç¼–å†™ Filter"></a>ç¼–å†™ Filter</h2><p>å¯¼å…¥è¯·è‡ªè¡Œè¡¥å…¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.function.Function;<br><br><span class="hljs-keyword">import</span> jakarta.servlet.FilterChain;<br><span class="hljs-keyword">import</span> jakarta.servlet.ServletException;<br><span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> org.springframework.lang.NonNull;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> org.springframework.security.core.authority.AuthorityUtils;<br><span class="hljs-keyword">import</span> org.springframework.security.web.authentication.WebAuthenticationDetailsSource;<br><span class="hljs-keyword">import</span> org.springframework.web.filter.OncePerRequestFilter;<br><span class="hljs-keyword">import</span> org.springframework.web.method.HandlerMethod;<br><br><span class="hljs-keyword">import</span> **.Anonymous;<br><span class="hljs-keyword">import</span> **.SecurityUtils;<br><span class="hljs-keyword">import</span> **.AnonymousAuthenticationToken;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OncePerRequestFilter</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Function&lt;HttpServletRequest, HandlerMethod&gt; handlerMethodGetter;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilterInternal</span><span class="hljs-params">(</span><br><span class="hljs-params">            <span class="hljs-meta">@NonNull</span> HttpServletRequest request,</span><br><span class="hljs-params">            <span class="hljs-meta">@NonNull</span> HttpServletResponse response,</span><br><span class="hljs-params">            <span class="hljs-meta">@NonNull</span> FilterChain filterChain</span><br><span class="hljs-params">    )</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-keyword">if</span> (SecurityUtils.getAuthentication() == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">// get the handler method</span><br>            <span class="hljs-type">HandlerMethod</span> <span class="hljs-variable">handlerMethod</span> <span class="hljs-operator">=</span> handlerMethodGetter.apply(request);<br><br>            <span class="hljs-keyword">if</span> (handlerMethod != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-type">Anonymous</span> <span class="hljs-variable">anonymous</span> <span class="hljs-operator">=</span> handlerMethod.getMethodAnnotation(Anonymous.class);<br>                <span class="hljs-keyword">if</span> (anonymous != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-type">AnonymousAuthenticationToken</span> <span class="hljs-variable">authToken</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnonymousAuthenticationToken</span>(<br>                            <span class="hljs-string">&quot;anonymousUser&quot;</span>,<br>                            <span class="hljs-string">&quot;&quot;</span>,<br>                            AuthorityUtils.createAuthorityList(<span class="hljs-string">&quot;ROLE_ANONYMOUS&quot;</span>)<br>                    );<br>                    authToken.setDetails(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebAuthenticationDetailsSource</span>().buildDetails(request));<br>                    SecurityUtils.setAuthentication(authToken);<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// continue to other filters</span><br>        filterChain.doFilter(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Account ä¸ºç”¨æˆ·ç±»ï¼Œéœ€è¦è‡ªè¡Œç¼–å†™ hasRole æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.function.Function;<br><br><span class="hljs-keyword">import</span> jakarta.servlet.FilterChain;<br><span class="hljs-keyword">import</span> jakarta.servlet.ServletException;<br><span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> org.springframework.lang.NonNull;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> org.springframework.security.access.AccessDeniedException;<br><span class="hljs-keyword">import</span> org.springframework.web.filter.OncePerRequestFilter;<br><span class="hljs-keyword">import</span> org.springframework.web.method.HandlerMethod;<br><br><span class="hljs-keyword">import</span> **.HasRole;<br><span class="hljs-keyword">import</span> **.Account;<br><span class="hljs-keyword">import</span> **.SecurityUtils;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HasRoleFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OncePerRequestFilter</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Function&lt;HttpServletRequest, HandlerMethod&gt; handlerMethodGetter;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilterInternal</span><span class="hljs-params">(</span><br><span class="hljs-params">            <span class="hljs-meta">@NonNull</span> HttpServletRequest request,</span><br><span class="hljs-params">            <span class="hljs-meta">@NonNull</span> HttpServletResponse response,</span><br><span class="hljs-params">            <span class="hljs-meta">@NonNull</span> FilterChain filterChain</span><br><span class="hljs-params">    )</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-keyword">if</span> (SecurityUtils.isAuthenticated()) &#123;<br>            <span class="hljs-comment">// get the handler method</span><br>            <span class="hljs-type">HandlerMethod</span> <span class="hljs-variable">handlerMethod</span> <span class="hljs-operator">=</span> handlerMethodGetter.apply(request);<br><br>            <span class="hljs-keyword">if</span> (handlerMethod != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> SecurityUtils.getCurrentAccount();<br>                <span class="hljs-type">HasRole</span> <span class="hljs-variable">hasRole</span> <span class="hljs-operator">=</span> handlerMethod.getMethodAnnotation(HasRole.class);<br><br>                <span class="hljs-comment">// the ordinal of the required role must be greater than or equal to the ordinal of the current role</span><br>                <span class="hljs-keyword">if</span> (hasRole != <span class="hljs-literal">null</span> &amp;&amp; !account.hasRole(hasRole.value())) &#123;<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccessDeniedException</span>(<span class="hljs-string">&quot;Does not match the required role&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// continue to other filters</span><br>        filterChain.doFilter(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ·»åŠ åˆ°-SecurityConfig"><a href="#æ·»åŠ åˆ°-SecurityConfig" class="headerlink" title="æ·»åŠ åˆ° SecurityConfig"></a>æ·»åŠ åˆ° SecurityConfig</h2><p>åªå†™äº† filter çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†è¯·è§†æƒ…å†µè‡ªè¡Œåˆå¹¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Arrays;<br><br><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configurers.CsrfConfigurer;<br><span class="hljs-keyword">import</span> org.springframework.security.web.SecurityFilterChain;<br><span class="hljs-keyword">import</span> org.springframework.security.web.access.ExceptionTranslationFilter;<br><span class="hljs-keyword">import</span> org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;<br><br><span class="hljs-keyword">import</span> **.filters.*;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableWebSecurity</span><br><span class="hljs-meta">@EnableMethodSecurity</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityConfig</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AnonymousFilter anonymousFilter;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SecurityJwtFilter securityJwtFilter;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> HasRoleFilter hasRoleFilter;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> SecurityFilterChain <span class="hljs-title function_">securityFilterChain</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        http<br>                .addFilterBefore(anonymousFilter, UsernamePasswordAuthenticationFilter.class)<br>                .addFilterBefore(securityJwtFilter, UsernamePasswordAuthenticationFilter.class)<br>                .addFilterAfter(hasRoleFilter, ExceptionTranslationFilter.class);<br><br>        <span class="hljs-keyword">return</span> http.build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>åç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Spring Boot</tag>
      
      <tag>Spring Security</tag>
      
      <tag>Java</tag>
      
      <tag>æ³¨è§£</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³ WebStorm å¼€å‘ uni-app æ—¶ rpx å•ä½ä¸è¯†åˆ«é—®é¢˜</title>
    <link href="/zh-CN/2023/07/9b33bad6bb1d/"/>
    <url>/zh-CN/2023/07/9b33bad6bb1d/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>WebStorm å¼€å‘ uni-app æ—¶ï¼Œrpx å•ä½ä¸è¯†åˆ«ï¼Œä¸”æ— æ³•æ­£å¸¸æ ¼å¼åŒ–ã€‚</p><span id="more"></span><p><img src="https://picture.zhanganzhi.com/2023/07/25/43fup1w.png" alt="ä¸è¯†åˆ« rpx å•ä½"></p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>æŸ¥é˜…èµ„æ–™æ¨èå®‰è£…è¿™ä¸¤ä¸ªæ’ä»¶ï¼Œä½†éƒ½ä¸å¥½ç”¨æˆ–æ›´æ–°ä¸åŠæ—¶å¯¼è‡´ä¸æ”¯æŒã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/07/25/vikukwx.png" alt="ç¬¬ä¸€ä¸ªæ²¡ç”¨ï¼Œç¬¬äºŒä¸ªæ›´æ–°è¾ƒæ…¢"></p><p>æœ€ç»ˆæ–¹æ¡ˆï¼šå®‰è£… <a href="https://plugins.jetbrains.com/plugin/21470-uniapp-tool">Uniapp Tool</a>ï¼Œé—®é¢˜è§£å†³ã€‚</p><p><img src="https://picture.zhanganzhi.com/2023/07/25/5xsnxd3.png" alt="å®‰è£… Uniapp Tool"></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>å‰ç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WebStorm</tag>
      
      <tag>å¾®ä¿¡å°ç¨‹åº</tag>
      
      <tag>uni-app</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Security customizing status code, and prevent other codes overridden by 403</title>
    <link href="/en/2023/07/d7099ff451fa/"/>
    <url>/en/2023/07/d7099ff451fa/</url>
    
    <content type="html"><![CDATA[<!-- markdownlint-disable-file MD033 --><blockquote><p>The Spring Security will override all errors like 400, 405, and 500 to 403, and we may want to use 401 for unauthorized requests. This article will solve this problem by customizing an AuthenticationEntryPoint.</p></blockquote><span id="more"></span><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><ul><li>I folled this video to setup Spring Security and JWT authorization:</li></ul><div style="width=100%; padding-top: 56.25%; position: relative;"><iframe style="top:0; bottom:0; left:0; right:0; position: absolute;" width="100%" height="100%" src="https://www.youtube.com/embed/KxqlJblhzfI" title="Spring Boot 3 + Spring Security 6 - JWT Authentication and Authorisation [NEW] [2023]" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div><ul><li>Also referred to this answer: <a href="https://stackoverflow.com/a/47507342/19420247">https://stackoverflow.com/a/47507342/19420247</a></li><li>Based on the above, due to the version updating may make some changes, please note that the article time is not too old</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>Add <code>exceptionHandling</code> to <code>SecurityFilterChain</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> org.springframework.http.HttpStatus;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.web.SecurityFilterChain;<br><span class="hljs-keyword">import</span> org.springframework.security.web.authentication.HttpStatusEntryPoint;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableWebSecurity</span><br><span class="hljs-meta">@EnableMethodSecurity</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> SecurityFilterChain <span class="hljs-title function_">securityFilterChain</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        http<br>                .exceptionHandling(<br>                        exceptionHandling -&gt; exceptionHandling<br>                                .accessDeniedHandler(<br>                                        (request, response, accessDeniedException) -&gt; response<br>                                                .sendError(HttpStatus.UNAUTHORIZED.value())<br>                                )<br>                                .authenticationEntryPoint(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpStatusEntryPoint</span>(HttpStatus.UNAUTHORIZED))<br>        <span class="hljs-keyword">return</span> http.build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>åç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Spring Boot</tag>
      
      <tag>Spring Security</tag>
      
      <tag>HTTP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Security è‡ªå®šä¹‰çŠ¶æ€ç ï¼Œé˜²æ­¢æ­£å¸¸çŠ¶æ€ç è¢« 403 è¦†ç›–</title>
    <link href="/zh-CN/2023/07/2d4f8ccace6c/"/>
    <url>/zh-CN/2023/07/2d4f8ccace6c/</url>
    
    <content type="html"><![CDATA[<!-- markdownlint-disable-file MD033 --><blockquote><p>åœ¨é¡¹ç›®ä¸­åŠ å…¥ Spring Security åï¼Œå®ƒä¼šå°†æ‰€æœ‰çš„é”™è¯¯çŠ¶æ€ç è¦†ç›–ä¸º 403ï¼Œä¾‹å¦‚ 400, 405 å’Œ 500ï¼Œæˆ‘ä»¬ä¹Ÿå¯èƒ½éœ€è¦å°† 403 æ”¹ä¸º 401 ä½œä¸ºæœªç™»å½•çš„çŠ¶æ€ç ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•è‡ªå®šä¹‰ AuthenticationEntryPoint ä»¥è§£å†³æ­¤é—®é¢˜ã€‚</p></blockquote><span id="more"></span><h2 id="èƒŒæ™¯æƒ…å†µ"><a href="#èƒŒæ™¯æƒ…å†µ" class="headerlink" title="èƒŒæ™¯æƒ…å†µ"></a>èƒŒæ™¯æƒ…å†µ</h2><ul><li>æˆ‘æ ¹æ®è¿™ä¸ªè§†é¢‘é…ç½®äº†åŸºç¡€çš„ Spring Security å’Œ JWT é‰´æƒï¼š</li></ul><div style="width=90%; padding-top: 56.25%; position: relative;"><iframe style="top:0; bottom:0; left:0; right:0; position: absolute;" width="100%" height="100%" src="https://www.youtube.com/embed/KxqlJblhzfI" title="Spring Boot 3 + Spring Security 6 - JWT Authentication and Authorisation [NEW] [2023]" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div><ul><li>å¹¶ä¸”å‚è€ƒäº†æ­¤å›ç­”ï¼š<a href="https://stackoverflow.com/a/47507342/19420247">https://stackoverflow.com/a/47507342/19420247</a></li><li>åœ¨ä»¥ä¸Šçš„åŸºç¡€ä¸Šï¼Œç”±äºç‰ˆæœ¬æ›´æ–°ï¼Œæ‰€ä»¥ä½œäº†ä¸€äº›ä¿®æ”¹ï¼Œè¯·æ³¨æ„æ–‡ç« æ—¶é—´æ˜¯å¦è¿‡æ—§ã€‚</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>å°† <code>exceptionHandling</code> æ·»åŠ åˆ° <code>SecurityFilterChain</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> org.springframework.http.HttpStatus;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;<br><span class="hljs-keyword">import</span> org.springframework.security.web.SecurityFilterChain;<br><span class="hljs-keyword">import</span> org.springframework.security.web.authentication.HttpStatusEntryPoint;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableWebSecurity</span><br><span class="hljs-meta">@EnableMethodSecurity</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> SecurityFilterChain <span class="hljs-title function_">securityFilterChain</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        http<br>                .exceptionHandling(<br>                        exceptionHandling -&gt; exceptionHandling<br>                                .accessDeniedHandler(<br>                                        (request, response, accessDeniedException) -&gt; response<br>                                                .sendError(HttpStatus.UNAUTHORIZED.value())<br>                                )<br>                                .authenticationEntryPoint(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpStatusEntryPoint</span>(HttpStatus.UNAUTHORIZED))<br>        <span class="hljs-keyword">return</span> http.build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>åç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>Spring Boot</tag>
      
      <tag>Spring Security</tag>
      
      <tag>HTTP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Element UI é€šç”¨å›¾ç‰‡éª¨æ¶å±ç»„ä»¶</title>
    <link href="/zh-CN/2022/11/92e7bb97253e/"/>
    <url>/zh-CN/2022/11/92e7bb97253e/</url>
    
    <content type="html"><![CDATA[<!-- markdownlint-disable-file MD033 --><blockquote><p>è¿‘å¹´æ¥ï¼Œéª¨æ¶å±ï¼ˆSkeletonï¼‰é€æ¸æˆä¸ºä¸€ç§æµè¡Œçš„åŠ è½½åŠ¨ç”»ï¼Œå…¶æ˜¾è‘—å¢å¼ºäº†ç”¨æˆ·ç­‰å¾…è¿‡ç¨‹ä¸­çš„ä½“éªŒã€‚æœ¬æ–‡å®ç°äº† Vue.js + Element UI çš„é€šç”¨å›¾ç‰‡éª¨æ¶å±ç»„ä»¶ã€‚</p></blockquote><span id="more"></span><p>æ„Ÿè°¢ <a href="https://space.bilibili.com/1568294">@å°ç°ç°</a> åœ¨ç ”ç©¶è¿‡ç¨‹ä¸­æä¾›çš„å¸®åŠ©å’Œåˆ›æ–°ï¼Œç¼–å†™äº†ç»„ä»¶çš„éƒ¨åˆ†å†…å®¹ï¼Œä½œäº†å¤§é‡é‡è¦çš„å·¥ä½œã€‚</p><h2 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h2><video width="100%" controls>  <source src="https://picture.zhanganzhi.com/2022/11/16/0dclfq9.mp4"></video><h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-skeleton</span></span><br><span class="hljs-tag">    <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;root&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">animated</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:loading</span>=<span class="hljs-string">&quot;loading&quot;</span></span><br><span class="hljs-tag">  &gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">template</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-skeleton-item</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:id</span>=<span class="hljs-string">&quot;idName&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;className&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123;height: heightValue&#125;&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">variant</span>=<span class="hljs-string">&quot;image&quot;</span></span><br><span class="hljs-tag">      /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:id</span>=<span class="hljs-string">&quot;idName&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;className&quot;</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;src&quot;</span> <span class="hljs-attr">:alt</span>=<span class="hljs-string">&quot;alt&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-skeleton</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;BaseLoadingImage&quot;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">props</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">className</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">idName</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">src</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">alt</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">height</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">heightValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> === <span class="hljs-literal">undefined</span> ? <span class="hljs-string">&quot;200px&quot;</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>,</span><br><span class="language-javascript">    &#125;;</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> === <span class="hljs-literal">undefined</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heightValue</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">root</span>.<span class="hljs-property">$el</span>.<span class="hljs-property">clientWidth</span> / <span class="hljs-number">16</span> * <span class="hljs-number">9</span>) + <span class="hljs-string">&quot;px&quot;</span>;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();</span><br><span class="language-javascript">    img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">    &#125;;</span><br><span class="language-javascript">    img.<span class="hljs-property">src</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span>;</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">&#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>ä½¿ç”¨æ—¶åªéœ€ä¼ é€’ç›¸åº”å‚æ•°å³å¯:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">loading-image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;src.webp&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">loading-image</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è‹¥éœ€è¦ä¿®æ”¹å›¾ç‰‡çš„æ ·å¼ï¼Œåªéœ€ä¼ é€’ <code>class</code> æˆ– <code>id</code> ä»å¤–éƒ¨ä½¿ç”¨ <code>v-deep</code> è®¾ç½® css å³å¯ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">loading-image</span> <span class="hljs-attr">class-name</span>=<span class="hljs-string">&quot;class-1&quot;</span> <span class="hljs-attr">id-name</span>=<span class="hljs-string">&quot;id-1&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;src.webp&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">loading-image</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css">::v-deep .class-<span class="hljs-number">1</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>&#125;<br><br>::v-deep #id-<span class="hljs-number">1</span> &#123;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">1rem</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åŸç†è§£æ"><a href="#åŸç†è§£æ" class="headerlink" title="åŸç†è§£æ"></a>åŸç†è§£æ</h2><p>è¯¥ç»„ä»¶ä¸»è¦ç”±ä¸¤å¤§åŠŸèƒ½ç»„æˆï¼Œä¸€æ˜¯åŠ è½½å›¾ç‰‡å¹¶åˆ‡æ¢éª¨æ¶å±æ˜¾ç¤ºï¼ŒäºŒæ˜¯æ™ºèƒ½é«˜åº¦è°ƒæ•´ã€‚</p><h3 id="åŠ è½½åŠŸèƒ½"><a href="#åŠ è½½åŠŸèƒ½" class="headerlink" title="åŠ è½½åŠŸèƒ½"></a>åŠ è½½åŠŸèƒ½</h3><p>ç”±äºé»˜è®¤ <code>loading</code> ä¸º <code>true</code>ï¼Œæ‰€ä»¥ <code>&lt;img&gt;</code> å¹¶ä¸ä¼šæ˜¾ç¤ºï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šè¯·æ±‚å›¾ç‰‡èµ„æºã€‚æˆ‘ä»¬åœ¨ <code>mounted</code> æ—¶ä½¿ç”¨ js è¯·æ±‚å›¾ç‰‡èµ„æºã€‚å½“å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œå°† <code>loading</code> è®¾ç½®ä¸º <code>false</code> ä¸”æ›´æ–° <code>&lt;img&gt;</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();<br>img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>;<br>&#125;;<br>img.<span class="hljs-property">src</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span>;<br></code></pre></td></tr></table></figure><h3 id="æ™ºèƒ½é«˜åº¦è°ƒæ•´"><a href="#æ™ºèƒ½é«˜åº¦è°ƒæ•´" class="headerlink" title="æ™ºèƒ½é«˜åº¦è°ƒæ•´"></a>æ™ºèƒ½é«˜åº¦è°ƒæ•´</h3><p>éª¨æ¶çš„é«˜åº¦éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p><ol><li>è‹¥ä¼ é€’äº†é«˜åº¦å‚æ•°ï¼Œä½¿ç”¨å‚æ•°è®¾ç½®é«˜åº¦ï¼›</li><li><code>mounte</code> ä¹‹å‰ä½¿ç”¨ <code>200px</code> ä½œä¸ºé»˜è®¤é«˜åº¦ï¼›</li><li><code>mounte</code> ä¹‹åè·å–å®½åº¦ï¼Œä»¥ <code>16:9</code> è®¡ç®—é»˜è®¤é«˜åº¦ã€‚</li></ol><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://element.eleme.io/#/zh-CN/component/skeleton">Skeleton éª¨æ¶å±</a>. Element. [2022-11-16]. ï¼ˆåŸå§‹å†…å®¹<a href="http://web.archive.org/web/20221116204140/https://element.eleme.io/#/zh-CN/component/skeleton">å­˜æ¡£</a>äº2022-11-16ï¼‰.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>å‰ç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
      <tag>Vue.js</tag>
      
      <tag>Element UI</tag>
      
      <tag>éª¨æ¶å±</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€ä¸ªæ²¡æœ‰å¯†ç ä¿æŠ¤çš„ frp æœåŠ¡å™¨æœ‰å¤šä¸å®‰å…¨</title>
    <link href="/zh-CN/2022/10/7951c3e787fe/"/>
    <url>/zh-CN/2022/10/7951c3e787fe/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å½“ä½¿ç”¨ frp æ—¶ï¼ŒåŠ¡å¿…å¼€å¯æƒé™éªŒè¯ã€‚</p></blockquote><span id="more"></span><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>ç¾¤å†…æœ‰äººçš„å®¶é‡Œäº‘å—åˆ°äº†å°è¯•ç™»å½•çš„æ”»å‡»ï¼Œåœ¨ç¾¤å‹åŠå…¶å…³é—­å…¬ç½‘æ—¶è¡¨ç¤ºä¸æ€•æ‰“ï¼Œå¹¶å…¬å¸ƒäº†è‡ªå·± frps çš„ç«¯å£ã€‚åœ¨å¾æ±‚åŒæ„åï¼Œæˆ‘å¼€å§‹å°è¯•è¿æ¥å’Œåº”ç”¨ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/10/30/ljwwqfd.png" alt="è¡¨ç¤ºæ¬¢è¿å°è¯•ç©ç©"></p><h2 id="æœ¬åœ°æœåŠ¡éƒ¨ç½²"><a href="#æœ¬åœ°æœåŠ¡éƒ¨ç½²" class="headerlink" title="æœ¬åœ°æœåŠ¡éƒ¨ç½²"></a>æœ¬åœ°æœåŠ¡éƒ¨ç½²</h2><p>æ­£å¥½æ‰‹é‡Œæœ‰ä¸ª web é¡¹ç›®ï¼Œäºæ˜¯ç«‹åˆ»å¯åŠ¨äº†èµ·æ¥ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/10/30/haxwbw3.png" alt="ä¸€ä¸ªç½‘ç«™é¡¹ç›®"></p><h2 id="frpc-é…ç½®"><a href="#frpc-é…ç½®" class="headerlink" title="frpc é…ç½®"></a>frpc é…ç½®</h2><p>æ¥ä¸‹æ¥åˆ° <a href="https://github.com/fatedier/frp">https://github.com/fatedier/frp</a> ä¸‹è½½å®¢æˆ·ç«¯ï¼Œç¼–å†™é…ç½®æ–‡ä»¶ç„¶åå¯åŠ¨ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/10/30/bzlvof9.png" alt="ç¼–å†™é…ç½®æ–‡ä»¶"></p><p><img src="https://picture.zhanganzhi.com/2022/10/30/z6q2lj9.png" alt="å¯åŠ¨ frpc"></p><h2 id="æ£€éªŒæˆæœ"><a href="#æ£€éªŒæˆæœ" class="headerlink" title="æ£€éªŒæˆæœ"></a>æ£€éªŒæˆæœ</h2><p>è®¿é—®ä»–çš„åŸŸåå’Œ frpc é…ç½®çš„ç«¯å£ï¼Œæ£€éªŒæ˜¯å¦æˆåŠŸã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/10/30/dcv4bsc.png" alt="æµ‹è¯•æˆåŠŸ"></p><p><img src="https://picture.zhanganzhi.com/2022/10/30/e6wxr16.png" alt="æœåŠ¡ç«¯æ—¥å¿—"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol><li>å½“ä½¿ç”¨ frp æ—¶ï¼Œä¸€å®šè¦é…ç½®é‰´æƒæ–¹å¼ï¼Œæ— è®ºæ˜¯ <code>token</code> è¿˜æ˜¯ <code>oidc</code>ï¼›</li><li>ä¸è¦éšæ„å…¬å¼€æœåŠ¡å™¨åº”ç”¨çš„ç«¯å£ï¼Œå°¤å…¶æ˜¯éå…¬å¼€æœåŠ¡ï¼›</li><li>ä½¿ç”¨è·¯ç”±å™¨å’Œé˜²ç«å¢™å°†æœåŠ¡å™¨åº”ç”¨çš„ç«¯å£æ˜ å°„åˆ°å…¬ç½‘ï¼Œè€Œä¸æ˜¯ç›´æ¥æš´éœ²æ‰€æœ‰ç«¯å£ï¼›</li><li>è°¨é˜²ç¤¾ä¼šå·¥ç¨‹å­¦æ”»å‡»ã€‚</li></ol><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://pixabay.com/photos/security-protection-antivirus-265130/">https://pixabay.com/photos/security-protection-antivirus-265130/</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>å®‰å…¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>frp</tag>
      
      <tag>å®‰å…¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows è¿æ¥ smb éæ ‡å‡†ç«¯å£</title>
    <link href="/zh-CN/2022/09/9fe6d5ab7fe2/"/>
    <url>/zh-CN/2022/09/9fe6d5ab7fe2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å½“ä½¿ç”¨å®¶åº­å®½å¸¦å°† smb æœåŠ¡è½¬å‘åˆ°å…¬ç½‘æ—¶ï¼Œç”±äº 445 ç«¯å£è¢«å°ï¼Œå¿…é¡»ä½¿ç”¨å…¶å®ƒç«¯å£ï¼Œè€Œ Windows ç³»ç»Ÿåªæ”¯æŒè¿æ¥æ ‡å‡†ç«¯å£ï¼Œéœ€è¦é€šè¿‡ç«¯å£è½¬å‘è§£å†³æ­¤é—®é¢˜ã€‚</p></blockquote><span id="more"></span><h2 id="å…³é—­è‡ªå¸¦æ–‡ä»¶å…±äº«æœåŠ¡"><a href="#å…³é—­è‡ªå¸¦æ–‡ä»¶å…±äº«æœåŠ¡" class="headerlink" title="å…³é—­è‡ªå¸¦æ–‡ä»¶å…±äº«æœåŠ¡"></a>å…³é—­è‡ªå¸¦æ–‡ä»¶å…±äº«æœåŠ¡</h2><p>ç”±äº Windows è‡ªå¸¦çš„æ–‡ä»¶å…±äº«æœåŠ¡ä¼šå ç”¨ 445 ç«¯å£ï¼Œéœ€è¦å°†å…¶å…³é—­ä»¥é‡Šæ”¾ç«¯å£ã€‚</p><h3 id="å…³é—­-Windows-åŠŸèƒ½"><a href="#å…³é—­-Windows-åŠŸèƒ½" class="headerlink" title="å…³é—­ Windows åŠŸèƒ½"></a>å…³é—­ Windows åŠŸèƒ½</h3><p>åœ¨å¼€å§‹èœå•ä¸­æœç´¢ <code>å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½</code> å¹¶è¿è¡Œï¼Œå–æ¶ˆé€‰ä¸­ <code>SMB 1.0/CIFS æ–‡ä»¶å…±äº«æ”¯æŒ</code>ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/09/03/t32qfre.png" alt="æœç´¢å¹¶æ‰“å¼€ å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½"></p><p><img src="https://picture.zhanganzhi.com/2022/09/03/3we8v69.png" alt="å–æ¶ˆé€‰ä¸­ SMB åŠŸèƒ½"></p><h3 id="å…³é—­-LanmanServer"><a href="#å…³é—­-LanmanServer" class="headerlink" title="å…³é—­ LanmanServer"></a>å…³é—­ LanmanServer</h3><p>ç”¨ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[PORT 445: What is the use and how to disable this TCP port](https://www.how2shout.com/how-to/port-445-what-is-the-use-and-how-to-disable-this-tcp-port.html). H2S Media. 2021-07-29 [2022-09-03]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220903121932/https://www.how2shout.com/how-to/port-445-what-is-the-use-and-how-to-disable-this-tcp-port.html)äº2022-09-03ï¼‰.">[2]</span></a></sup>ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/09/03/ssalh2l.png" alt="è¿è¡Œå‘½ä»¤æç¤ºç¬¦"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sc stop lanmanserver<br>sc config lanmanserver start=disabled<br></code></pre></td></tr></table></figure><h2 id="åˆ›å»ºç«¯å£è½¬å‘"><a href="#åˆ›å»ºç«¯å£è½¬å‘" class="headerlink" title="åˆ›å»ºç«¯å£è½¬å‘"></a>åˆ›å»ºç«¯å£è½¬å‘</h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="çº¸ä¹. [Windows 10 ä¸‹å¦‚ä½•ä¿®æ”¹ smb è¿æ¥çš„é»˜è®¤ç«¯å£(445)ï¼Ÿ](https://www.zhihu.com/question/59814912/answer/684689433). çŸ¥ä¹. 2019-05-16 [2022-09-03]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220903121926/https://www.zhihu.com/question/59814912/answer/684689433)äº2022-09-03ï¼‰.">[3]</span></a></sup>åˆ›å»ºæœ¬æœºçš„ç«¯å£è½¬å‘ï¼Œå°†è¿œç¨‹ smb æœåŠ¡è½¬å‘åˆ°æœ¬æœºçš„ 445 ç«¯å£ã€‚å°† <code>serverport</code> å’Œ <code>serverip</code> æ”¹ä¸ºè¿œç¨‹æœåŠ¡çš„åœ°å€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">netsh interface portproxy add v4tov4 listenport=445 listenaddress=127.0.0.1 connectport=serverport connectaddress=serverip<br></code></pre></td></tr></table></figure><p>éšå<strong>é‡å¯</strong>ï¼Œå³å¯é€šè¿‡ <code>\\127.0.0.1</code> è¿æ¥è¿œç¨‹ smb æœåŠ¡ã€‚</p><h2 id="IP-åœ°å€å˜åŒ–"><a href="#IP-åœ°å€å˜åŒ–" class="headerlink" title="IP åœ°å€å˜åŒ–"></a>IP åœ°å€å˜åŒ–</h2><p>æˆ‘ä»¬ä¸€èˆ¬ä¼šå°†ç«¯å£è½¬å‘ç»‘å®šåˆ°åŸŸåä¸Šï¼Œè‹¥åŸŸåæ”¹å˜å°†æ— æ³•è¿æ¥ï¼Œéœ€è¦é‡æ–°å¯åŠ¨ <code>IP Helper Service</code> æ¥é‡æ–°æ˜ å°„åŸŸåã€‚å¯åŠ¨å‘½ä»¤æç¤ºç¬¦å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="Morris. [Windows 10 ä¸‹å¦‚ä½•ä¿®æ”¹ smb è¿æ¥çš„é»˜è®¤ç«¯å£(445)ï¼Ÿ](https://www.zhihu.com/question/59814912/answer/2355661073). çŸ¥ä¹. 2022-02-20 [2022-09-03]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220903121933/https://www.zhihu.com/question/59814912/answer/2355661073)äº2022-09-03ï¼‰.">[4]</span></a></sup>ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">ipconfig /flushdns<br>net stop iphlpsvc<br>net start iphlpsvc<br></code></pre></td></tr></table></figure><h2 id="ç«¯å£è½¬å‘æ£€æŸ¥"><a href="#ç«¯å£è½¬å‘æ£€æŸ¥" class="headerlink" title="ç«¯å£è½¬å‘æ£€æŸ¥"></a>ç«¯å£è½¬å‘æ£€æŸ¥</h2><p>æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£è½¬å‘è®¾ç½®<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="çº¸ä¹. [Windows 10 ä¸‹å¦‚ä½•ä¿®æ”¹ smb è¿æ¥çš„é»˜è®¤ç«¯å£(445)ï¼Ÿ](https://www.zhihu.com/question/59814912/answer/684689433). çŸ¥ä¹. 2019-05-16 [2022-09-03]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220903121926/https://www.zhihu.com/question/59814912/answer/684689433)äº2022-09-03ï¼‰.">[3]</span></a></sup>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">netsh interface portproxy show all<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ 445 ç«¯å£å ç”¨æƒ…å†µï¼Œè‹¥å·²ç»å»ºç«‹ smb çš„è¿æ¥ï¼Œå¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°è¿œç¨‹ IP<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="Morris. [Windows 10 ä¸‹å¦‚ä½•ä¿®æ”¹ smb è¿æ¥çš„é»˜è®¤ç«¯å£(445)ï¼Ÿ](https://www.zhihu.com/question/59814912/answer/2355661073). çŸ¥ä¹. 2022-02-20 [2022-09-03]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220903121933/https://www.zhihu.com/question/59814912/answer/2355661073)äº2022-09-03ï¼‰.">[4]</span></a></sup>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">netstat -ano|findstr 445<br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.pexels.com/zh-cn/photo/1181772/">https://www.pexels.com/zh-cn/photo/1181772/</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.how2shout.com/how-to/port-445-what-is-the-use-and-how-to-disable-this-tcp-port.html">PORT 445: What is the use and how to disable this TCP port</a>. H2S Media. 2021-07-29 [2022-09-03]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220903121932/https://www.how2shout.com/how-to/port-445-what-is-the-use-and-how-to-disable-this-tcp-port.html">å­˜æ¡£</a>äº2022-09-03ï¼‰.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>çº¸ä¹. <a href="https://www.zhihu.com/question/59814912/answer/684689433">Windows 10 ä¸‹å¦‚ä½•ä¿®æ”¹ smb è¿æ¥çš„é»˜è®¤ç«¯å£(445)ï¼Ÿ</a>. çŸ¥ä¹. 2019-05-16 [2022-09-03]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220903121926/https://www.zhihu.com/question/59814912/answer/684689433">å­˜æ¡£</a>äº2022-09-03ï¼‰.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>Morris. <a href="https://www.zhihu.com/question/59814912/answer/2355661073">Windows 10 ä¸‹å¦‚ä½•ä¿®æ”¹ smb è¿æ¥çš„é»˜è®¤ç«¯å£(445)ï¼Ÿ</a>. çŸ¥ä¹. 2022-02-20 [2022-09-03]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220903121933/https://www.zhihu.com/question/59814912/answer/2355661073">å­˜æ¡£</a>äº2022-09-03ï¼‰.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç»éªŒåˆ†äº«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>ç«¯å£è½¬å‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€MCDR Tutorials 01ã€‘Introduction</title>
    <link href="/en/2022/08/8fe975c3db2b/"/>
    <url>/en/2022/08/8fe975c3db2b/</url>
    
    <content type="html"><![CDATA[<blockquote><p>The vanilla Minecraft technology survival has become a hot topic in recent years. Perhaps because of the pandemic, people have been able to pick up the game they put down years ago, or perhaps because of the successful advertising of TIS, students have been able to look up from the tasteless mobile games, and this long-history but minority topic has gradually entered the public eye. In the last three years, a large number of new technology survival servers have been founded, and both old and new players have been blown away by the unlimited potential shown by this decade-old game. And behind these servers, almost all are using a significant server management tool - MCDReforged.</p></blockquote><h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><p>In November 2018<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="TIS_TrinityUnion. &quot;[ä¸€èµ·è§è¯åŸç‰ˆç”Ÿå­˜ç§‘æŠ€çš„å·…å³°ï¼TISæœåŠ¡å™¨ä¸€å‘¨å¹´çºªå¿µè§†é¢‘ TIS Trinity Union First Anniversary](https://www.bilibili.com/video/BV17J41197be?t=15.8)&quot;. bilibili. November 29, 2019. [Archived](https://web.archive.org/web/20220823131237/https://www.bilibili.com/video/BV17J41197be?t=15.8) from the original on August 23, 2022. Retrieved August 23, 2022.">[1]</span></a></sup>, before the TIS started the server, chino_desu developed the server management tool MCDaemon<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="kafuuchino-desu. &quot;[MCDaemon](https://github.com/kafuuchino-desu/MCDaemon)&quot;. GitHub. [Archived](https://web.archive.org/web/20220823093059/https://github.com/kafuuchino-desu/MCDaemon) from the original on August 23, 2022. Retrieved August 23, 2022.">[2]</span></a></sup>. Without modifying the vanilla server, the tool provides server management functions such as restart, world files backup, automatic rollback, cross-service chat, mirror synchronization, etc.</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/6vgazij.png" alt="The first commit of MCDaemon&lt;sup id&#x3D;&quot;fnref:3&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:3&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;kafuuchino-desu. &quot;[Initial commit](https:&#x2F;&#x2F;github.com&#x2F;kafuuchino-desu&#x2F;MCDaemon&#x2F;commit&#x2F;ab6e9d92fdcb0f2a2a13c77d573d1af61fc51920)&quot;. GitHub. November 13, 2018. [Archived](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20220823093612&#x2F;https:&#x2F;&#x2F;github.com&#x2F;kafuuchino-desu&#x2F;MCDaemon&#x2F;commit&#x2F;ab6e9d92fdcb0f2a2a13c77d573d1af61fc51920) from the original on August 23, 2022. Retrieved August 23, 2022.&quot;&gt;[3]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>With the development of TIS, powerful functions shown by the MCDaemon are notified by many people, especially the saves backup and rollback. They want to use MCDaemon to manage their server, but it does not support Windows. Therefore, lightbrotherV created the project MCDaemon-go<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="TISUnion. &quot;[MCDaemon-go](https://github.com/TISUnion/MCDaemon-go)&quot;. GitHub. [Archived](https://web.archive.org/web/20220823094520/https://github.com/TISUnion/MCDaemon-go) from the original on August 23, 2022. Retrieved August 23, 2022.">[4]</span></a></sup>, which is compatible with the Windows system.</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/s6bco38.png" alt="Archived MCDaemon-go"></p><p><img src="https://picture.zhanganzhi.com/2022/08/23/6zjvd3y.png" alt="The first commit of MCDaemon-go&lt;sup id&#x3D;&quot;fnref:5&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:5&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;lightbrotherV. &quot;[Initial commit](https:&#x2F;&#x2F;github.com&#x2F;TISUnion&#x2F;MCDaemon-go&#x2F;commit&#x2F;72322490b6aa5570baafc3de10f3af5b32380e20)&quot;. GitHub. December 2, 2018 [Archived](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20220823112917&#x2F;https:&#x2F;&#x2F;github.com&#x2F;TISUnion&#x2F;MCDaemon-go&#x2F;commit&#x2F;72322490b6aa5570baafc3de10f3af5b32380e20) from the original on August 23, 2022. Retrieved August 23, 2022.&quot;&gt;[5]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>Although MCDaemon-go is compatible with windows, it cannot load Python plugins from MCDaemon. Repeating the development of two system plugins is obviously not wise and unsustainable for long-term community development. During the period, some users created forks like MCD-Windows, and now most are deleted.</p><p>TIS has used MCDaemon for a while, and many problems have been revealed, and there are a lot of features to optimize, so the development of MCD 2.0 is on the agenda.</p><p>In March 2020, Fallen_Breath started the development of MCDReforged<sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Fallen-Breath. &quot;[MCDReforged](https://github.com/Fallen-Breath/MCDReforged)&quot;. GitHub. [Archived](https://web.archive.org/web/20220515211259/https://github.com/Fallen-Breath/MCDReforged) from the original on May 15, 2022. Retrieved August 23, 2022.">[6]</span></a></sup>, which can run on Windows.</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/0g3fejd.png" alt="The first commit of MCDReforged&lt;sup id&#x3D;&quot;fnref:7&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:7&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;Fallen-Breath. &quot;[init](https:&#x2F;&#x2F;github.com&#x2F;Fallen-Breath&#x2F;MCDReforged&#x2F;commit&#x2F;e7cc72a523f8c8b113df37c41015704cf4031e2b)&quot;. GitHub. May 30, 2020 [Archived](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20220823113116&#x2F;https:&#x2F;&#x2F;github.com&#x2F;Fallen-Breath&#x2F;MCDReforged&#x2F;commit&#x2F;e7cc72a523f8c8b113df37c41015704cf4031e2b) from the original on August 23, 2022. Retrieved August 23, 2022.&quot;&gt;[7]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>Chino sent the source code of MCD 2.0 and the expected features list to Fallen_Breath. In March 2020, MCDR released its first prerelease. In May, chino announced to stop the development and maintenance of MCDaemon.</p><blockquote><p>At the beginning of MCDR development, I gave Fallen a small portion of the MCD 2.0 source code I had written, as well as a list of expected MCD 2.0 features. Itâ€™s hard to say if it helped Fox write MCDR, but the directory structure in the src of MCDR does look like MCD 2.0.<br>â€”â€” <em>chino_desu</em></p></blockquote><p><img src="https://picture.zhanganzhi.com/2022/08/23/wuxhmzm.png" alt="The document of MCDaemon states it stops maintenance"></p><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><blockquote><p>MCDReforged is a tool that provides the management ability of the Minecraft server using a custom plugin system. It doesnâ€™t need to modify or mod the original Minecraft server at all. From in-game calculator, player high-light, to manipulate scoreboard, manage structure file and backup &#x2F; load backup, you can implement these by using MCDR and related plugins.<br>â€”â€” <em>The readme of MCDReforged</em><sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Fallen-Breath. &quot;[MCDReforged](https://github.com/Fallen-Breath/MCDReforged)&quot;. GitHub. [Archived](https://web.archive.org/web/20220515211259/https://github.com/Fallen-Breath/MCDReforged) from the original on May 15, 2022. Retrieved August 23, 2022.">[6]</span></a></sup></p></blockquote><p><img src="https://picture.zhanganzhi.com/2022/08/23/bzwxibh.png" alt="The readme of MCDReforged"></p><p>The MCDReforged completely liberates the limitations of MC server management. The relatively independent server management tool can manipulate server files during the server is turned off or provides functions without permitting OP permission to players.</p><p>This really fits the needs of the vanilla technical survival players and has effectively contributed to the excellent development of MC vanilla technical survival in recent years. It is also behind the resurgence of Minecraft topics in China during the epidemic.</p><p>Today, many bukkit and mod servers use MCDR to save file management and cross-server chatting functions.</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/lqu2rgv.png" alt="Google trends of Minecraft"></p><h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h2><p>Actually, the principle of MCDR is straightforward.</p><blockquote><p>MCDR uses Popen to start the server as a sub-process, then it has the ability to control the standard input &#x2F; out stream of the server. Since the console output of a Minecraft server has a stable format and contains a large amount of useful information about the server, e.g. player chat messages, MCDR is able to parse and analyze the server output, abstract them into different events, and dispatch them towards plugins for responding. With the help of the Minecraft command system, MCDR can send Minecraft commands via the standard input stream to affect the actual Minecraft server. <sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Fallen-Breath. &quot;[MCDReforged](https://github.com/Fallen-Breath/MCDReforged)&quot;. GitHub. [Archived](https://web.archive.org/web/20220515211259/https://github.com/Fallen-Breath/MCDReforged) from the original on May 15, 2022. Retrieved August 23, 2022.">[6]</span></a></sup></p></blockquote><p><img src="https://picture.zhanganzhi.com/2022/08/23/yvzoe3u.png" alt="MCDReforged will launch the server, and have its input&#x2F;out stream"></p><p>Plugins react differently depending on different events. For example, players can back up server saves, send their location to other players, use the calculator, manage and store fake players, etc., by typing specific commands in the chat box.</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/16gbx6q.png" alt="Player types !!qb in the chat to make a backup of save file"></p><p><img src="https://picture.zhanganzhi.com/2022/08/23/uve47tl.png" alt="Player types !!here in the chat to send his location"></p><p><img src="https://picture.zhanganzhi.com/2022/08/23/by2gpmo.png" alt="In-game calculator"></p><p><img src="https://picture.zhanganzhi.com/2022/08/23/d69iqse.png" alt="Fake players management plugin"></p><h2 id="Unique-Features"><a href="#Unique-Features" class="headerlink" title="Unique Features"></a>Unique Features</h2><ul><li><strong>The ability to control the running status of the server.</strong> No plugin or mod can manage a turned-off server, but MCDReforged can do that easily because it runs out of the server. Any Bukkit plugin or Forge&#x2F;Fabric mod can never achieve the feature.</li><li><strong>The ability to manage server files.</strong> The ability to freely control the running of the server allows MCDR to manage files that must restart the server. For example, shutting down the server and rollback the save, changing server mods or plugins, can be easily implemented by MCDR plugins, eliminating manual login to the server terminal.</li></ul><h2 id="Strongpoints"><a href="#Strongpoints" class="headerlink" title="Strongpoints"></a>Strongpoints</h2><ul><li><strong>Management ability out of the server.</strong> Independent running decoupling MCDR and the server, which helps to implement unbelievable functions in the past.</li><li><strong>Cheap to get started and easy to develop.</strong> Complete documents allow server owners only need basic computer skills to get started. MCDR and its plugins are written in Python, an easy language that makes it easy to quickly learn and develop plugins over the Internet.</li><li><strong>Fantastic community energy and support services.</strong> Many excellent plugins are still emerging from the community, and new users become plugin developers, updating old plugins to add new energy and ideas to the community. A large number of users and active MCDR developers work together to provide multi-platform, responsive, and satisfying technical support, application deployment, and emergency maintenance services.</li></ul><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>TIS_TrinityUnion. &quot;<a href="https://www.bilibili.com/video/BV17J41197be?t=15.8">ä¸€èµ·è§è¯åŸç‰ˆç”Ÿå­˜ç§‘æŠ€çš„å·…å³°ï¼TISæœåŠ¡å™¨ä¸€å‘¨å¹´çºªå¿µè§†é¢‘ TIS Trinity Union First Anniversary</a>&quot;. bilibili. November 29, 2019. <a href="https://web.archive.org/web/20220823131237/https://www.bilibili.com/video/BV17J41197be?t=15.8">Archived</a> from the original on August 23, 2022. Retrieved August 23, 2022.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>kafuuchino-desu. &quot;<a href="https://github.com/kafuuchino-desu/MCDaemon">MCDaemon</a>&quot;. GitHub. <a href="https://web.archive.org/web/20220823093059/https://github.com/kafuuchino-desu/MCDaemon">Archived</a> from the original on August 23, 2022. Retrieved August 23, 2022.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>kafuuchino-desu. &quot;<a href="https://github.com/kafuuchino-desu/MCDaemon/commit/ab6e9d92fdcb0f2a2a13c77d573d1af61fc51920">Initial commit</a>&quot;. GitHub. November 13, 2018. <a href="https://web.archive.org/web/20220823093612/https://github.com/kafuuchino-desu/MCDaemon/commit/ab6e9d92fdcb0f2a2a13c77d573d1af61fc51920">Archived</a> from the original on August 23, 2022. Retrieved August 23, 2022.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>TISUnion. &quot;<a href="https://github.com/TISUnion/MCDaemon-go">MCDaemon-go</a>&quot;. GitHub. <a href="https://web.archive.org/web/20220823094520/https://github.com/TISUnion/MCDaemon-go">Archived</a> from the original on August 23, 2022. Retrieved August 23, 2022.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>lightbrotherV. &quot;<a href="https://github.com/TISUnion/MCDaemon-go/commit/72322490b6aa5570baafc3de10f3af5b32380e20">Initial commit</a>&quot;. GitHub. December 2, 2018 <a href="https://web.archive.org/web/20220823112917/https://github.com/TISUnion/MCDaemon-go/commit/72322490b6aa5570baafc3de10f3af5b32380e20">Archived</a> from the original on August 23, 2022. Retrieved August 23, 2022.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>Fallen-Breath. &quot;<a href="https://github.com/Fallen-Breath/MCDReforged">MCDReforged</a>&quot;. GitHub. <a href="https://web.archive.org/web/20220515211259/https://github.com/Fallen-Breath/MCDReforged">Archived</a> from the original on May 15, 2022. Retrieved August 23, 2022.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>Fallen-Breath. &quot;<a href="https://github.com/Fallen-Breath/MCDReforged/commit/e7cc72a523f8c8b113df37c41015704cf4031e2b">init</a>&quot;. GitHub. May 30, 2020 <a href="https://web.archive.org/web/20220823113116/https://github.com/Fallen-Breath/MCDReforged/commit/e7cc72a523f8c8b113df37c41015704cf4031e2b">Archived</a> from the original on August 23, 2022. Retrieved August 23, 2022.<a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Minecraft</category>
      
      <category>MCDRç³»åˆ—æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Minecraft</tag>
      
      <tag>MCDReforged</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€MCDR ç³»åˆ—æ•™ç¨‹ 01ã€‘ç®€ä»‹</title>
    <link href="/zh-CN/2022/08/fc02d61c8889/"/>
    <url>/zh-CN/2022/08/fc02d61c8889/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¿‘å‡ å¹´çš„ Minecraft åŸç‰ˆæŠ€æœ¯ç”Ÿå­˜æˆä¸ºäº†ä¸€ä¸ªçƒ­é—¨è¯é¢˜ï¼Œæˆ–è®¸æ˜¯å› ä¸ºç–«æƒ…å¤§å®¶å¾—ä»¥é—²æš‡æ¡èµ·æ•°å¹´å‰æ”¾ä¸‹çš„æ¸¸æˆã€æˆ–è®¸æ˜¯ TIS æˆåŠŸçš„å®£ä¼ è®©å­¦ç”Ÿä»¬ä»ç´¢ç„¶æ— å‘³çš„æ‰‹æœºæ¸¸æˆä¸­æŠ¬èµ·å¤´æ¥ï¼Œè¿™ä¸ªå†å²æ‚ ä¹…ä½†å°ä¼—çš„ç©æ³•é€æ¸è¿›å…¥äº†å¤§ä¼—çš„è§†é‡ã€‚è¿‘ä¸‰å¹´ï¼Œå¤§é‡æ–°çš„æŠ€æœ¯ç”Ÿå­˜æœåŠ¡å™¨ä¸æ–­æ¶Œç°ï¼Œæ— è®ºæ–°è€ç©å®¶éƒ½è¢«è¿™æ¬¾æœ‰ç€åå¹´å†å²çš„æ¸¸æˆæ‰€å±•ç°å‡ºæ¥çš„æ— é™æ½œåŠ›è€Œéœ‡æ’¼ã€‚è€Œåœ¨è¿™äº›æœåŠ¡å™¨çš„èƒŒåï¼Œå‡ ä¹éƒ½åœ¨ä½¿ç”¨ä¸€ä¸ªåˆ’æ—¶ä»£çš„æœåŠ¡ç«¯ç®¡ç†å·¥å…·â€”â€”MCDReforgedã€‚</p></blockquote><h2 id="æ¼”å˜å†å²"><a href="#æ¼”å˜å†å²" class="headerlink" title="æ¼”å˜å†å²"></a>æ¼”å˜å†å²</h2><p>2018 å¹´ 11 æœˆ<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="TIS_TrinityUnion. [ä¸€èµ·è§è¯åŸç‰ˆç”Ÿå­˜ç§‘æŠ€çš„å·…å³°ï¼TISæœåŠ¡å™¨ä¸€å‘¨å¹´çºªå¿µè§†é¢‘ TIS Trinity Union First Anniversary](https://www.bilibili.com/video/BV17J41197be?t=15.8). bilibili. 2019-11-29 [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220823131237/https://www.bilibili.com/video/BV17J41197be?t=15.8)äº2022-08-23ï¼‰.">[1]</span></a></sup>ï¼ŒTIS å¼€æœå‰å¤•ï¼Œchino_desu å¼€å‘äº†æœåŠ¡ç«¯ç®¡ç†å·¥å…· MCDaemon<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="kafuuchino-desu. [MCDaemon](https://github.com/kafuuchino-desu/MCDaemon). GitHub. [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220823093059/https://github.com/kafuuchino-desu/MCDaemon)äº2022-08-23ï¼‰.">[2]</span></a></sup>ã€‚åœ¨ä¸ä¿®æ”¹åŸç‰ˆæœåŠ¡ç«¯çš„æƒ…å†µä¸‹ï¼Œæä¾›äº†å¤šç§æœåŠ¡ç«¯ç®¡ç†åŠŸèƒ½ï¼Œä¾‹å¦‚æœåŠ¡å™¨é‡å¯ã€å­˜æ¡£å¤‡ä»½å’Œè‡ªåŠ¨å›æ¡£ã€è·¨æœèŠå¤©ã€é•œåƒæœå­˜æ¡£åŒæ­¥ç­‰ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/6vgazij.png" alt="MCDaemon çš„ç¬¬ä¸€æ¡ commit&lt;sup id&#x3D;&quot;fnref:3&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:3&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;kafuuchino-desu. [Initial commit](https:&#x2F;&#x2F;github.com&#x2F;kafuuchino-desu&#x2F;MCDaemon&#x2F;commit&#x2F;ab6e9d92fdcb0f2a2a13c77d573d1af61fc51920). GitHub. 2018-11-03 [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20220823093612&#x2F;https:&#x2F;&#x2F;github.com&#x2F;kafuuchino-desu&#x2F;MCDaemon&#x2F;commit&#x2F;ab6e9d92fdcb0f2a2a13c77d573d1af61fc51920)äº2022-08-23ï¼‰.&quot;&gt;[3]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>éšç€ TIS å¼€æœå’Œå‘å±•ï¼ŒMCDaemon å±•ç¤ºå‡ºæ¥çš„å¼ºå¤§åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯å¤‡ä»½å›æ¡£å—åˆ°äº†è¶Šæ¥è¶Šå¤šäººçš„å…³æ³¨ï¼Œå¹¶æœŸæœ›ä½¿ç”¨å®ƒæ¥ç®¡ç†è‡ªå·±çš„æœåŠ¡å™¨ã€‚ä½† MCDaemon æœ‰ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼šä¸æ”¯æŒ Windowsã€‚äºæ˜¯ lightbrotherV åˆ›å»ºäº† MCDaemon-go<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="TISUnion. [MCDaemon-go](https://github.com/TISUnion/MCDaemon-go). GitHub. [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220823094520/https://github.com/TISUnion/MCDaemon-go)äº2022-08-23ï¼‰.">[4]</span></a></sup> é¡¹ç›®ï¼Œå®ç°äº† Windows æ”¯æŒã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/s6bco38.png" alt="å·²ç»å½’æ¡£çš„ MCDaemon-go é¡¹ç›®"></p><p><img src="https://picture.zhanganzhi.com/2022/08/23/6zjvd3y.png" alt="MCDaemon-go çš„ç¬¬ä¸€æ¡ commit&lt;sup id&#x3D;&quot;fnref:5&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:5&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;lightbrotherV. [Initial commit](https:&#x2F;&#x2F;github.com&#x2F;TISUnion&#x2F;MCDaemon-go&#x2F;commit&#x2F;72322490b6aa5570baafc3de10f3af5b32380e20). GitHub. 2018-12-02 [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20220823112917&#x2F;https:&#x2F;&#x2F;github.com&#x2F;TISUnion&#x2F;MCDaemon-go&#x2F;commit&#x2F;72322490b6aa5570baafc3de10f3af5b32380e20)äº2022-08-23ï¼‰.&quot;&gt;[5]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>è™½ç„¶ MCDaemon-go æ”¯æŒäº† windowsï¼Œä½†æ˜¯å¹¶ä¸æ”¯æŒ MCDaemon çš„ Python æ’ä»¶ï¼Œé‡å¤å¼€å‘ä¸¤ä¸ªç”Ÿæ€çš„æ’ä»¶æ˜¾ç„¶ä¸æ˜¯æ˜æ™ºä¹‹ä¸¾ï¼Œå¯¹äºé•¿æœŸç¤¾åŒºå‘å±•ä¹Ÿä¸æ˜¯å¥½äº‹ã€‚è¿™æ®µæ—¶é—´é‡Œï¼Œç¤¾åŒºç”¨æˆ·ä¹Ÿåˆ›å»ºäº†ä¸€äº› Forkï¼Œä¾‹å¦‚ MCD-Windowsã€‚è¿™äº› Fork ç°åœ¨å¤§éƒ¨åˆ†å·²ç»åˆ åº“ã€‚</p><p>MCDaemon åœ¨è¢« TIS ä½¿ç”¨ä¸€æ®µæ—¶é—´åæš´éœ²å‡ºè®¸å¤šé—®é¢˜ï¼Œæœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ï¼Œäºæ˜¯ MCD 2.0 çš„å¼€å‘ä¹Ÿæä¸Šäº†æ—¥ç¨‹ã€‚</p><p>2020å¹´3æœˆï¼ŒFallen_Breath å¼€å§‹äº† MCDReforged<sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Fallen-Breath. [MCDReforged](https://github.com/Fallen-Breath/MCDReforged). GitHub. [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220515211259/https://github.com/Fallen-Breath/MCDReforged)äº2022-05-15ï¼‰.">[6]</span></a></sup> çš„å¼€å‘ï¼Œå…¶æ”¯æŒåœ¨ Windows ä¸‹è¿è¡Œã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/0g3fejd.png" alt="MCDReforged çš„ç¬¬ä¸€æ¡ commit&lt;sup id&#x3D;&quot;fnref:7&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:7&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;Fallen-Breath. [init](https:&#x2F;&#x2F;github.com&#x2F;Fallen-Breath&#x2F;MCDReforged&#x2F;commit&#x2F;e7cc72a523f8c8b113df37c41015704cf4031e2b). GitHub. 2020-05-30 [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20220823113116&#x2F;https:&#x2F;&#x2F;github.com&#x2F;Fallen-Breath&#x2F;MCDReforged&#x2F;commit&#x2F;e7cc72a523f8c8b113df37c41015704cf4031e2b)äº2022-08-23ï¼‰.&quot;&gt;[7]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>chino å°† MCD 2.0 çš„æºç å’Œé¢„æœŸåŠŸèƒ½åˆ—è¡¨ç»™äº† Fallen_Breathã€‚2020å¹´4æœˆï¼ŒMCDR å‘å¸ƒäº†ç¬¬ä¸€ä¸ªé¢„è§ˆç‰ˆæœ¬ã€‚åŒå¹´5æœˆï¼Œchino å®£å¸ƒåœæ­¢ MCDaemon çš„å¼€å‘å’Œç»´æŠ¤ã€‚</p><blockquote><p>æˆ‘ä¸€ä¸ªå‘¨æœ«æ“çš„æ‰€ä»¥æ ¹æœ¬ä¸æƒ³é‡æ„ã€‚MCDR å¼€å‘åˆæœŸï¼Œæˆ‘æ˜¯æŠŠå†™äº†ä¸€å°éƒ¨åˆ†çš„ MCD 2.0 æºç ç»™äº† Fallen çš„ï¼Œä»¥åŠä¸€ä¸ª MCD 2.0 é¢„æœŸçš„åŠŸèƒ½åˆ—è¡¨ã€‚å¾ˆéš¾è¯´æœ‰æ²¡æœ‰å¸®ä¸Šç‹ç‹¸å†™ MCDRï¼Œä½†æ˜¯ MCDR çš„ src é‡Œé¢ç›®å½•ç»“æ„çš„ç¡®æ˜¯ MCD 2.0 çš„æ ·å­ã€‚<br>â€”â€” <em>chino_desu</em></p></blockquote><p><img src="https://picture.zhanganzhi.com/2022/08/23/wuxhmzm.png" alt="MCDaemon çš„æ–‡æ¡£å£°æ˜å…¶å·²ç»åœæ­¢ç»´æŠ¤"></p><h2 id="åŠŸèƒ½ç®€ä»‹"><a href="#åŠŸèƒ½ç®€ä»‹" class="headerlink" title="åŠŸèƒ½ç®€ä»‹"></a>åŠŸèƒ½ç®€ä»‹</h2><blockquote><p>MCDReforged æ˜¯ä¸€ä¸ªåŸºäº Python çš„ Minecraft æœåŠ¡ç«¯æ§åˆ¶å·¥å…·ï¼Œå¯ä»¥åœ¨å®Œå…¨ä¸å¯¹ Minecraft æœåŠ¡ç«¯è¿›è¡Œä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å¯è‡ªå®šä¹‰çš„æ’ä»¶ç³»ç»Ÿï¼Œæä¾›å¯¹æœåŠ¡ç«¯çš„ç®¡ç†èƒ½åŠ›çš„å·¥å…·ã€‚å°è‡³è®¡ç®—å™¨ã€é«˜äº®ç©å®¶ã€B ç«™å¼¹å¹•å§¬ï¼Œå¤§è‡³æ“æ§è®¡åˆ†æ¿ã€ç®¡ç†ç»“æ„æ–‡ä»¶ã€è‡ªåŠ©å¤‡ä»½å›æ¡£ï¼Œéƒ½å¯ä»¥é€šè¿‡ MCDR åŠç›¸é…å¥—çš„æ’ä»¶å®ç°ã€‚<br>â€”â€” <em>MCDReforged è‡ªè¿°æ–‡ä»¶</em><sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Fallen-Breath. [MCDReforged](https://github.com/Fallen-Breath/MCDReforged). GitHub. [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220515211259/https://github.com/Fallen-Breath/MCDReforged)äº2022-05-15ï¼‰.">[6]</span></a></sup></p></blockquote><p><img src="https://picture.zhanganzhi.com/2022/08/23/7flci56.png" alt="MCDReforged çš„è‡ªè¿°æ–‡ä»¶"></p><p>MCDReforged å½»åº•è§£æ”¾äº† MC æœåŠ¡ç«¯æ§åˆ¶çš„é™åˆ¶ï¼Œç›¸å¯¹ç‹¬ç«‹çš„æœåŠ¡ç«¯æ§åˆ¶å·¥å…·å¯ä»¥åœ¨å…³æœæ—¶æ“ä½œæœåŠ¡å™¨æ–‡ä»¶ï¼Œæˆ–æ˜¯åœ¨ç©å®¶æ—  OP æƒé™çš„æƒ…å†µä¸‹ä¸ºåŸç‰ˆç”Ÿå­˜å®ç°å„ç§åŠŸèƒ½ã€‚</p><p>è¿™ååˆ†ç¬¦åˆåŸç‰ˆæŠ€æœ¯ç”Ÿå­˜ç©å®¶çš„éœ€æ±‚ï¼Œåˆ‡å®æ¨åŠ¨äº†è¿‘å‡ å¹´ MC åŸç‰ˆæŠ€æœ¯ç”Ÿå­˜çš„è“¬å‹ƒå‘å±•ã€‚åœ¨ç–«æƒ…æœŸé—´å›½å†…é‡æ–°å…´èµ·çš„ MC ç›¸å…³è¯é¢˜èƒŒåä¹Ÿæœ‰å®ƒçš„å½±å­ã€‚</p><p>å¦‚ä»Šï¼Œè®¸å¤šæ’ä»¶æœå’Œæ¨¡ç»„æœä¹Ÿä¼šä½¿ç”¨ MCDR å®ç°æœåŠ¡å™¨å­˜æ¡£ç®¡ç†å’Œå›æ¡£ã€è·¨æœèŠå¤©ç­‰åŠŸèƒ½ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/rcnqywp.png" alt="Minecraft çš„ç™¾åº¦æŒ‡æ•°"></p><h2 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h2><p>å®é™…ä¸Šï¼ŒMCDR çš„å®ç°åŸç†éå¸¸ç®€å•ã€‚</p><blockquote><p>å®ƒå°†æœåŠ¡ç«¯ä½œä¸ºå­è¿›ç¨‹å¯åŠ¨ï¼Œä»¥æ­¤æ‹¥æœ‰äº†æ§åˆ¶æœåŠ¡ç«¯æ ‡å‡†è¾“å…¥&#x2F;è¾“å‡ºæµçš„èƒ½åŠ›ã€‚æœåŠ¡ç«¯è¾“å‡ºä¼šè¢« MCDR è·å–ï¼Œè€Œ MCDR ä¹Ÿå¯ä»¥å‘æ§åˆ¶å°å†…è¾“å…¥æŒ‡ä»¤ã€‚Minecraft çš„æ§åˆ¶å°è¾“å‡ºéå¸¸æ ‡å‡†ï¼Œé€šè¿‡è§£æè¾“å‡ºå³å¯å°†å…¶æŠ½è±¡æˆä¸åŒçš„äº‹ä»¶å¹¶æ´¾å‘ç»™æ’ä»¶è¿›è¡Œå“åº”ã€‚åœ¨ Minecraft å†…ç½®æŒ‡ä»¤ç³»ç»Ÿçš„å¸®åŠ©ä¸‹ï¼ŒMCDR å¯ä»¥é€šè¿‡å‘æœåŠ¡ç«¯æ ‡å‡†è¾“å…¥æµå‘é€ Minecraft æŒ‡ä»¤æ¥ä¸ Minecraft æœåŠ¡å™¨åšå‡ºäº¤äº’ã€‚<sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Fallen-Breath. [MCDReforged](https://github.com/Fallen-Breath/MCDReforged). GitHub. [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220515211259/https://github.com/Fallen-Breath/MCDReforged)äº2022-05-15ï¼‰.">[6]</span></a></sup></p></blockquote><p><img src="https://picture.zhanganzhi.com/2022/08/23/yvzoe3u.png" alt="MCDReforged ä¼šå¯åŠ¨æœåŠ¡ç«¯ï¼Œå¹¶è·å–å®ƒçš„è¾“å…¥è¾“å‡ºæµ"></p><p>æ’ä»¶æ ¹æ®ä¸åŒçš„äº‹ä»¶åšå‡ºä¸åŒçš„ååº”ã€‚ä¾‹å¦‚ï¼Œç©å®¶åœ¨èŠå¤©æ¡†æ‰“å‡ºç‰¹å®šæŒ‡ä»¤å³å¯å¤‡ä»½å­˜æ¡£ã€å‘å…¶ä»–ç©å®¶å‘é€è‡ªå·±æ‰€åœ¨çš„ä½ç½®ã€ä½¿ç”¨è®¡ç®—å™¨ã€ç®¡ç†å’Œå­˜å‚¨å‡äººç©å®¶ç­‰ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/23/16gbx6q.png" alt="ç©å®¶åœ¨èŠå¤©ä¸­æ‰“å‡º !!qb make ä»¥å¤‡ä»½å­˜æ¡£"></p><p><img src="https://picture.zhanganzhi.com/2022/08/23/uve47tl.png" alt="ç©å®¶åœ¨èŠå¤©ä¸­æ‰“å‡º !!here ä»¥å‘é€è‡ªå·±æ‰€åœ¨ä½ç½®"></p><p><img src="https://picture.zhanganzhi.com/2022/08/23/by2gpmo.png" alt="æ¸¸æˆå†…è®¡ç®—å™¨"></p><p><img src="https://picture.zhanganzhi.com/2022/08/23/d69iqse.png" alt="å‡äººç®¡ç†æ’ä»¶"></p><h2 id="ç‹¬ç‰¹åŠŸèƒ½"><a href="#ç‹¬ç‰¹åŠŸèƒ½" class="headerlink" title="ç‹¬ç‰¹åŠŸèƒ½"></a>ç‹¬ç‰¹åŠŸèƒ½</h2><ul><li>**å¯¹æœåŠ¡ç«¯è¿è¡ŒçŠ¶æ€çš„æ§åˆ¶ã€‚**æ²¡æœ‰ä»»ä½•æ’ä»¶æˆ–æ¨¡ç»„èƒ½æ§åˆ¶å·²å…³é—­çš„æœåŠ¡ç«¯ï¼Œè€Œåœ¨æœåŠ¡ç«¯ä¹‹å¤–è¿è¡Œçš„ MCDReforged å¯ä»¥è½»æ˜“åšåˆ°ã€‚è¿™æ˜¯ Bukkit ç³»æ’ä»¶ã€Forge&#x2F;Fabric æ¨¡ç»„ä¸å¯èƒ½å®ç°çš„ç‰¹æ€§ã€‚</li><li>**å¯¹äºæœåŠ¡ç«¯æ–‡ä»¶çš„ç®¡ç†èƒ½åŠ›ã€‚**è‡ªç”±æ§åˆ¶æœåŠ¡ç«¯çš„è¿è¡Œçš„èƒ½åŠ›è®© MCDR å¯ä»¥æ–¹ä¾¿åœ°ä¿®æ”¹å¿…é¡»é‡å¯æœåŠ¡ç«¯æ‰å¯ç”¨çš„æ–‡ä»¶ã€‚ä¾‹å¦‚å…³æœå›æ¡£ã€ç®¡ç†æœåŠ¡ç«¯æ¨¡ç»„æˆ–æ’ä»¶ï¼Œéƒ½å¯ä»¥æ–¹ä¾¿åœ°é€šè¿‡ MCDR æ’ä»¶å®ç°ï¼Œä¸å†éœ€è¦ç¹çåœ°ç™»å½•æœåŠ¡å™¨åå°æ‰‹åŠ¨æ“ä½œã€‚</li></ul><h2 id="è½¯ä»¶ä¼˜åŠ¿"><a href="#è½¯ä»¶ä¼˜åŠ¿" class="headerlink" title="è½¯ä»¶ä¼˜åŠ¿"></a>è½¯ä»¶ä¼˜åŠ¿</h2><ul><li>**æœåŠ¡ç«¯ä¹‹å¤–çš„ç®¡ç†èƒ½åŠ›ã€‚**ç‹¬ç«‹äºæœåŠ¡ç«¯è¿è¡Œä½¿ MCDR ä¸æœåŠ¡ç«¯è§£è€¦ï¼Œå¾—ä»¥å®ç°åŸæœ¬ä¸å¯èƒ½å®ç°çš„åŠŸèƒ½ã€‚</li><li>**å®¹æ˜“ä¸Šæ‰‹ã€å¼€å‘ç®€å•ã€‚**å®Œå–„çš„æ–‡æ¡£è®©æœä¸»åªéœ€åŸºæœ¬çš„è®¡ç®—æœºåŸºç¡€å³å¯ä¸Šæ‰‹ã€‚å®Œå–„çš„æ–‡æ¡£ã€API å’Œäº‹ä»¶ç³»ç»Ÿï¼Œä½¿æ’ä»¶å¼€å‘ç®€å•æ¸…æ™°ã€‚MCDR åŠå…¶æ’ä»¶å‡ä½¿ç”¨ Python è¯­è¨€ï¼Œè¿™é—¨å¯¹æ–°æ‰‹ååˆ†å‹å¥½çš„è¯­è¨€ä½¿æ–°æ‰‹èƒ½å¤Ÿè½»æ¾åœ°é€šè¿‡äº’è”ç½‘å¿«é€Ÿå­¦ä¹ å¹¶ç›´æ¥å¼€å§‹æ’ä»¶å¼€å‘ã€‚</li><li>**ä¼˜ç§€çš„ç¤¾åŒºæ´»åŠ›å’Œæ”¯æŒæœåŠ¡ã€‚**MCDR ç¤¾åŒºä»æœ‰ä¸å°‘ä¼˜ç§€æ’ä»¶æ¶Œç°ï¼Œæ–°çš„ç”¨æˆ·æˆä¸ºæ’ä»¶å¼€å‘è€…ï¼Œè¿­ä»£æ›´æ–°è€æ—§æ’ä»¶ï¼Œä¸ºç¤¾åŒºæ³¨å…¥æ–°çš„æ´»åŠ›å’Œæ€æƒ³ã€‚åºå¤§çš„ç”¨æˆ·ç¾¤ä½“ä¸ç§¯ææ´»è·ƒçš„ MCDR å¼€å‘è€…å…±åŒæä¾›äº†å¤šå¹³å°ã€å“åº”è¿…é€Ÿã€æ»¡æ„åº¦é«˜çš„æŠ€æœ¯æ”¯æŒã€åº”ç”¨éƒ¨ç½²ã€åº”æ€¥ç»´æŠ¤ç­‰æœåŠ¡ã€‚</li></ul><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>TIS_TrinityUnion. <a href="https://www.bilibili.com/video/BV17J41197be?t=15.8">ä¸€èµ·è§è¯åŸç‰ˆç”Ÿå­˜ç§‘æŠ€çš„å·…å³°ï¼TISæœåŠ¡å™¨ä¸€å‘¨å¹´çºªå¿µè§†é¢‘ TIS Trinity Union First Anniversary</a>. bilibili. 2019-11-29 [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220823131237/https://www.bilibili.com/video/BV17J41197be?t=15.8">å­˜æ¡£</a>äº2022-08-23ï¼‰.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>kafuuchino-desu. <a href="https://github.com/kafuuchino-desu/MCDaemon">MCDaemon</a>. GitHub. [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220823093059/https://github.com/kafuuchino-desu/MCDaemon">å­˜æ¡£</a>äº2022-08-23ï¼‰.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>kafuuchino-desu. <a href="https://github.com/kafuuchino-desu/MCDaemon/commit/ab6e9d92fdcb0f2a2a13c77d573d1af61fc51920">Initial commit</a>. GitHub. 2018-11-03 [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220823093612/https://github.com/kafuuchino-desu/MCDaemon/commit/ab6e9d92fdcb0f2a2a13c77d573d1af61fc51920">å­˜æ¡£</a>äº2022-08-23ï¼‰.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>TISUnion. <a href="https://github.com/TISUnion/MCDaemon-go">MCDaemon-go</a>. GitHub. [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220823094520/https://github.com/TISUnion/MCDaemon-go">å­˜æ¡£</a>äº2022-08-23ï¼‰.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>lightbrotherV. <a href="https://github.com/TISUnion/MCDaemon-go/commit/72322490b6aa5570baafc3de10f3af5b32380e20">Initial commit</a>. GitHub. 2018-12-02 [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220823112917/https://github.com/TISUnion/MCDaemon-go/commit/72322490b6aa5570baafc3de10f3af5b32380e20">å­˜æ¡£</a>äº2022-08-23ï¼‰.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>Fallen-Breath. <a href="https://github.com/Fallen-Breath/MCDReforged">MCDReforged</a>. GitHub. [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220515211259/https://github.com/Fallen-Breath/MCDReforged">å­˜æ¡£</a>äº2022-05-15ï¼‰.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>Fallen-Breath. <a href="https://github.com/Fallen-Breath/MCDReforged/commit/e7cc72a523f8c8b113df37c41015704cf4031e2b">init</a>. GitHub. 2020-05-30 [2022-08-23]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220823113116/https://github.com/Fallen-Breath/MCDReforged/commit/e7cc72a523f8c8b113df37c41015704cf4031e2b">å­˜æ¡£</a>äº2022-08-23ï¼‰.<a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Minecraft</category>
      
      <category>MCDRç³»åˆ—æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Minecraft</tag>
      
      <tag>MCDReforged</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•ç§‘å­¦åœ°ä¹°èœï¼šé˜¶æ¢¯èœä»·</title>
    <link href="/zh-CN/2022/08/21f435f762dc/"/>
    <url>/zh-CN/2022/08/21f435f762dc/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨ <a href="https://www.bilibili.com/video/BV17B4y1k7fZ">ã€Šå¦‚ä½•ç§‘å­¦çš„ä¹°é¥¼ã€‹</a><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="shenjack_. [ã€Šå¦‚ä½•ç§‘å­¦çš„ä¹°é¥¼ã€‹](https://www.bilibili.com/video/BV17B4y1k7fZ). 2022-08-07 [2022-08-09]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220809133655/https://www.bilibili.com/video/BV17B4y1k7fZ)äº2022-08-09ï¼‰.">[3]</span></a></sup> ä¸­ï¼Œæˆ‘ä»¬ä¹°å¥½äº†å¤§é¥¼ï¼Œæ¥ä¸‹æ¥éœ€è¦ä¹°å‡ æ£µå¤§è‘±ï¼Œåšä¸€é“ç…é¥¼å·å¤§è‘±ã€‚</p></blockquote><p><img src="https://picture.zhanganzhi.com/2022/08/09/celzgar.png" alt="ç…é¥¼å·å¤§è‘±"></p><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p><img src="https://picture.zhanganzhi.com/2022/08/09/u7ie4lr.png" alt="åŸå§‹é¢˜ç›®"></p><p>å¤§è‘±çš„ä»·æ ¼éµå¾ªä»¥ä¸‹è§„å¾‹ï¼šç¬¬ä¸€æ£µçš„ä»·æ ¼ä¸º 1 å…ƒ&#x2F;æ£µï¼Œæ¯è´­ä¹° 20 æ£µåˆ™ä¸Šæ¶¨ä¸€å…ƒã€‚</p><table><thead><tr><th>æ•°é‡</th><th>å•ä»·</th></tr></thead><tbody><tr><td>1-20</td><td>1 å…ƒ&#x2F;æ£µ</td></tr><tr><td>21-40</td><td>2 å…ƒ&#x2F;æ£µ</td></tr><tr><td>41-60</td><td>3 å…ƒ&#x2F;æ£µ</td></tr><tr><td>61-80</td><td>4 å…ƒ&#x2F;æ£µ</td></tr><tr><td>81-100</td><td>5 å…ƒ&#x2F;æ£µ</td></tr><tr><td>â€¦â€¦</td><td>â€¦â€¦</td></tr></tbody></table><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¦–å…ˆå°†é—®é¢˜æ‹†è§£ï¼Œä¸€æ˜¯æ¯æ£µè‘±çš„å•ä»·ï¼ŒäºŒæ˜¯å¦‚ä½•åˆè®¡æ€»ä»·ã€‚</p><p>å•ä»·çš„å˜åŒ–è§„å¾‹æ˜¯æ¯ä¹° 20 ä¸ªå¢åŠ  1ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°é‡é™¤ä»¥ 20ï¼Œæ•´æ•°éƒ¨åˆ†å³ä¸ºå½“å‰æ•°é‡çš„å•ä»·ã€‚</p><p>åˆè®¡æ€»ä»·éœ€è¦å°†æ¯ä¸€æ£µè‘±çš„å•ä»·ç›¸åŠ ï¼Œè€Œå­¦è¿‡å°å­¦äºŒå¹´çº§æ•°å­¦çš„æˆ‘ä»¬çŸ¥é“ï¼Œåªéœ€è¦è¿ç”¨å¾®ç§¯åˆ†çš„çŸ¥è¯†ï¼Œå³å¯æ±‚å’Œã€‚</p><h2 id="åˆ—å¼"><a href="#åˆ—å¼" class="headerlink" title="åˆ—å¼"></a>åˆ—å¼</h2><h3 id="å•ä»·"><a href="#å•ä»·" class="headerlink" title="å•ä»·"></a>å•ä»·</h3><p>æ•°é‡æ¯å¢é•¿ 20 ä¸ªï¼Œå•ä»·å¢é•¿ 1 å…ƒã€‚å›å¿†æˆ‘ä»¬çš„æ•°å­¦çŸ¥è¯†ï¼Œè¿™æ­£ç¬¦åˆé˜¶è·ƒå‡½æ•°çš„ç‰¹å¾ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/09/4aei8w4.png" alt="é˜¶è·ƒå‡½æ•°&lt;sup id&#x3D;&quot;fnref:4&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:4&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;Stewart J, Redlin L, Watson S. Precalculus[M]. Cengage Learning, 2012.&quot;&gt;[4]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>åˆ—å‡ºè¡¨è¾¾å¼ï¼Œå¹¶ç”»å›¾è§‚å¯Ÿæ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚</p><p>$$\lfloor\frac{n-1}{20}\rfloor+1$$</p><p><img src="https://picture.zhanganzhi.com/2022/08/09/707d2uc.png" alt="ç”»å›¾æ£€æŸ¥"></p><h3 id="æ€»ä»·"><a href="#æ€»ä»·" class="headerlink" title="æ€»ä»·"></a>æ€»ä»·</h3><p>æœ‰äº†å•ä»·ï¼Œå³å¯è®¡ç®—æ€»ä»·ï¼Œä½¿ç”¨æ±‚å’Œç¬¦å·å°†å•ä»·ç›¸åŠ ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/09/25udoc4.png" alt="æ±‚å’Œç¬¦å·&lt;sup id&#x3D;&quot;fnref:4&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:4&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;Stewart J, Redlin L, Watson S. Precalculus[M]. Cengage Learning, 2012.&quot;&gt;[4]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>åˆ—å‡ºè¡¨è¾¾å¼ï¼Œå¹¶ç”»å›¾è§‚å¯Ÿæ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚</p><p>$$\sum_{n&#x3D;1}^{x}(\lfloor\frac{n-1}{20}\rfloor+1)$$</p><p><img src="https://picture.zhanganzhi.com/2022/08/09/48tb3f7.png" alt="ç”»å›¾æ£€æŸ¥"></p><h2 id="è§£ç­”"><a href="#è§£ç­”" class="headerlink" title="è§£ç­”"></a>è§£ç­”</h2><p>è‘±çš„å•ä»·ä¸º $\lfloor\frac{n-1}{20}\rfloor+1$ï¼Œæ€»ä»·ä¸º $\sum_{n&#x3D;1}^{x}(\lfloor\frac{n-1}{20}\rfloor+1)$ã€‚å›¾è¡¨é“¾æ¥ï¼š<a href="https://www.desmos.com/calculator/qc16ngykwu">https://www.desmos.com/calculator/qc16ngykwu</a>ã€‚</p><p>è‹¥ä¸€æ£µè‘±ä¸ºåŠæ–¤ï¼Œé‚£ä¹ˆåœ¨å•ä»· 1-2 å…ƒå·¦å³æ˜¯ç§‘å­¦çš„ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡è´­ä¹° 40 æ£µä»¥å†…æ˜¯æœ€ç§‘å­¦çš„ã€‚</p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://pixabay.com/photos/winter-onion-leek-root-stalk-228039/">https://pixabay.com/photos/winter-onion-leek-root-stalk-228039/</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.pexels.com/zh-cn/photo/1508666/">https://www.pexels.com/zh-cn/photo/1508666/</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>shenjack_. <a href="https://www.bilibili.com/video/BV17B4y1k7fZ">ã€Šå¦‚ä½•ç§‘å­¦çš„ä¹°é¥¼ã€‹</a>. 2022-08-07 [2022-08-09]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220809133655/https://www.bilibili.com/video/BV17B4y1k7fZ">å­˜æ¡£</a>äº2022-08-09ï¼‰.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>Stewart J, Redlin L, Watson S. Precalculus[M]. Cengage Learning, 2012.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>å­¦æœ¯</category>
      
      <category>æ²™é›•ç³»åˆ—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç”Ÿæ´»</tag>
      
      <tag>æ•°å­¦</tag>
      
      <tag>å¾®ç§¯åˆ†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è´­ä¹°è¥¿æ•° 4T æ–°ç´«ç›˜</title>
    <link href="/zh-CN/2022/08/81f2bb325590/"/>
    <url>/zh-CN/2022/08/81f2bb325590/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä»¥å‰æ­ NAS çš„æ—¶å€™ç”¨äº†å—å®¶é‡Œæ—§å°å¼æœºæ‹†ä¸‹æ¥çš„ç¡¬ç›˜ï¼Œåªæœ‰ 512Gï¼Œå®¹é‡ä¸€ç›´æŒºåƒç´§çš„ï¼ŒåŠ ä¸Šè¿™ä¸ªç¡¬ç›˜å¿«åå¹´äº†ï¼Œä¸æ”¾å¿ƒå®‰å…¨æ€§ï¼Œå†³å®šæ¢ä¸ªæ–°çš„ã€‚</p></blockquote><span id="more"></span><h2 id="æ—§ç¡¬ç›˜çš„ç”±æ¥"><a href="#æ—§ç¡¬ç›˜çš„ç”±æ¥" class="headerlink" title="æ—§ç¡¬ç›˜çš„ç”±æ¥"></a>æ—§ç¡¬ç›˜çš„ç”±æ¥</h2><p>å®¶é‡Œåå¹´å‰ä¹°äº†ä¸ªä¸€ä½“æœºæ”¾å®¶é‡Œç”¨ï¼Œä½†æ˜¯æ€§èƒ½ä¸å¼ºä½¿ç”¨é¢‘ç‡ä¸é«˜ï¼Œå»å¹´çœ‹ç€å†åƒç°æ›´ä¸å€¼é’±äº†ï¼Œå‡ ç™¾å—é’±ä¹°äº†å‡ºå»ã€‚<strong>ä½†æ˜¯å–ä¹‹å‰ä¸Šæ·˜å®èŠ±äº† 16 å—é’±ä¹°äº†ä¸ª 500G çš„åŠ£è´¨ç¡¬ç›˜å·æ¢æ¢æŸ±ï¼Œè¿˜éå¸¸è´´å¿ƒåœ°å¸®å¿™è£…äº†ä¸ª win7 ç³»ç»Ÿã€‚</strong></p><p><img src="https://picture.zhanganzhi.com/2022/08/02/0evw9xr.png" alt="é»‘å¿ƒäºŒæ‰‹å•†å®¶"></p><h2 id="ç¡¬ç›˜é€‰å‹"><a href="#ç¡¬ç›˜é€‰å‹" class="headerlink" title="ç¡¬ç›˜é€‰å‹"></a>ç¡¬ç›˜é€‰å‹</h2><p>ç»¼åˆäº†ä»·æ ¼å’Œå®¹é‡ä¹‹åï¼Œå†³å®šä¹° 4T çš„ç¡¬ç›˜ï¼Œå¯¹æ¯”ä¹‹åç¡®å®šäº†è¥¿æ•°çš„ <code>WD42EJRX</code>ã€‚äº¬ä¸œè‡ªè¥ä»·æ ¼ 529 å…ƒï¼Œç­‰äº†å¿«ä¸€ä¸ªæœˆä¸€ç›´æ²¡é™ä¸‹å»ï¼Œä»Šå¤©å†™æ–‡ç« é™åˆ° 509 äº†ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªæ˜¯ä¸æ˜¯å ç“¦ç›˜ã€‚è´¹äº†ä¸€ç•ªåŠŸå¤«ï¼Œæ‰¾åˆ°äº†<a href="https://www.bilibili.com/read/cv14273159">è¿™ç¯‡æ–‡ç« </a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="æµ·é—¨ç‰Œæ¢­é±¼ç½å¤´. [åå¹´ï¼Œ2Tï¼šè¥¿æ•°æ–°æ¬¾ç´«ç›˜æ·±å…¥æµ‹è¯•](https://www.bilibili.com/read/cv14273159). 2021-12-03 [2022-07-20]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](http://web.archive.org/web/20220802103829/https://www.bilibili.com/read/cv14273159)äº2022-08-03ï¼‰.">[1]</span></a></sup>ï¼Œç¡®å®šä¸æ˜¯å ç“¦ç›˜ã€‚å·§çš„æ˜¯åœ¨æˆ‘ä¸‹å•å‰ï¼Œè¿™ç¯‡æ–‡ç« çš„ä½œè€…å‘å¸ƒäº†ä¸€æ¡<a href="https://t.bilibili.com/687792429254836233">åŠ¨æ€</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="æµ·é—¨ç‰Œæ¢­é±¼ç½å¤´. [åŠ¨æ€](https://t.bilibili.com/687792429254836233). 2022-07-28 [2022-07-29]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](http://web.archive.org/web/20220802104250/https://t.bilibili.com/687792429254836233)äº2022-08-03ï¼‰.">[2]</span></a></sup>ï¼Œé€šè¿‡ç ´è§£ç”µè·¯æ¿è¯å®äº†ç¡®å®æ˜¯ä¸€å— CMR ç¡¬ç›˜ã€‚</p><h2 id="å¼€ç®±"><a href="#å¼€ç®±" class="headerlink" title="å¼€ç®±"></a>å¼€ç®±</h2><p>äº¬ä¸œçš„åŒ…è£…æœ‰äº›ç®€é™‹ï¼Œç¡¬ç›˜ç›’å­ç›´æ¥å¥—äº†ä¸ªå¿«é€’æ³¡æ²«è¢‹ï¼Œä¹Ÿä¸è£…ç®±ã€‚ç›’å­é‡Œæ˜¯ä¸€ä¸ªå¡‘æ–™çš„æ¶å­ï¼Œé‡Œé¢é™ç”µè¢‹åŒ…ç€ç¡¬ç›˜ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/02/k2c57us.jpg" alt="ç›’å­å·²ç»æŒ¤å‹å˜å½¢äº†"></p><p><img src="https://picture.zhanganzhi.com/2022/08/02/ad2fdt7.jpg" alt="ç¡¬ç›˜æ­£é¢"></p><p><img src="https://picture.zhanganzhi.com/2022/08/02/c5eiczr.png" alt="åšåº¦éå¸¸æ˜æ˜¾"></p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>å¥åº·ä¿¡æ¯å¿˜äº†æˆªå›¾äº†ï¼Œå¾ˆæ­£å¸¸ï¼Œäº¬ä¸œè‡ªè¥åº”è¯¥ä¸ä¼šç¯¡æ”¹çš„ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/02/emtnrxn.png" alt="ç”¨äº†ä¸ƒä¸ªå°æ—¶æ‰«ä¸€éåé“"></p><p><img src="https://picture.zhanganzhi.com/2022/08/02/9v329ah.png" alt="è¯»å–é€Ÿåº¦æ›²çº¿"></p><p><img src="https://picture.zhanganzhi.com/2022/08/02/nmgr2ra.png" alt="å†™å…¥é€Ÿåº¦æ›²çº¿"></p><p>æŒ‰æ–‡ç« <sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="æµ·é—¨ç‰Œæ¢­é±¼ç½å¤´. [åå¹´ï¼Œ2Tï¼šè¥¿æ•°æ–°æ¬¾ç´«ç›˜æ·±å…¥æµ‹è¯•](https://www.bilibili.com/read/cv14273159). 2021-12-03 [2022-07-20]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](http://web.archive.org/web/20220802103829/https://www.bilibili.com/read/cv14273159)äº2022-08-03ï¼‰.">[1]</span></a></sup>çš„æ–¹æ³•åˆè·‘äº†ä¸‹éšæœºè¯»å†™ç”¨äºåˆ¤æ–­å ç“¦ï¼ŒçœŸçš„æœ‰ç‚’è±†å­çš„å£°éŸ³ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/02/2ece2xp.png" alt="æ ¼å¼åŒ–æµ‹ä¸ªé€Ÿ"></p><h2 id="å®è£…"><a href="#å®è£…" class="headerlink" title="å®è£…"></a>å®è£…</h2><p>è£…ä¸Šè®¾ç½®æŒ‚è½½ï¼Œç„¶åè°ƒä¸€ä¸‹ samba é…ç½®æ–‡ä»¶ï¼ŒæŠŠæ—§ç¡¬ç›˜æ–‡ä»¶æ‹·è¿‡æ¥å³å¯ã€‚ç¬¬ä¸€æ¬¡æ‹·æ–‡ä»¶åœ¨ 100 MB&#x2F;s å·¦å³å¾˜å¾Šï¼Œä¹‹åå°±å¯ä»¥ç¨³å®šå æ»¡åƒå…†ç½‘çº¿çš„é€Ÿåº¦äº†ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/08/02/3jp0ese.png" alt="ç¬¬ä¸€æ¬¡é€Ÿåº¦ä¸å¤ªç¨³"></p><p><img src="https://picture.zhanganzhi.com/2022/08/02/thu935z.png" alt="å®é™…ä½¿ç”¨çš„é€Ÿåº¦"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>æµ·é—¨ç‰Œæ¢­é±¼ç½å¤´. <a href="https://www.bilibili.com/read/cv14273159">åå¹´ï¼Œ2Tï¼šè¥¿æ•°æ–°æ¬¾ç´«ç›˜æ·±å…¥æµ‹è¯•</a>. 2021-12-03 [2022-07-20]. ï¼ˆåŸå§‹å†…å®¹<a href="http://web.archive.org/web/20220802103829/https://www.bilibili.com/read/cv14273159">å­˜æ¡£</a>äº2022-08-03ï¼‰.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>æµ·é—¨ç‰Œæ¢­é±¼ç½å¤´. <a href="https://t.bilibili.com/687792429254836233">åŠ¨æ€</a>. 2022-07-28 [2022-07-29]. ï¼ˆåŸå§‹å†…å®¹<a href="http://web.archive.org/web/20220802104250/https://t.bilibili.com/687792429254836233">å­˜æ¡£</a>äº2022-08-03ï¼‰.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æ—¥å¸¸</category>
      
      <category>å¼€ç®±</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¼€ç®±</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git Conventional Commits</title>
    <link href="/en/2022/06/ca740262a99f/"/>
    <url>/en/2022/06/ca740262a99f/</url>
    
    <content type="html"><![CDATA[<blockquote><p>The Conventional Commits specification is a lightweight convention on top of commit messages. It provides an easy set of rules for creating an explicit commit history; which makes it easier to write automated tools on top of. This convention dovetails with <a href="https://semver.org/">SemVer</a>, by describing the features, fixes, and breaking changes made in commit messages.</p></blockquote><span id="more"></span><ul><li>Automatically generating CHANGELOGs.</li><li>Automatically determining a semantic version bump (based on the types of commits landed).</li><li>Communicating the nature of changes to teammates, the public, and other stakeholders.</li><li>Triggering build and publish processes.</li><li>Making it easier for people to contribute to your projects, by allowing them to explore a more structured commit history.</li></ul><h2 id="Specification"><a href="#Specification" class="headerlink" title="Specification"></a>Specification</h2><p><a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="&quot;[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/)&quot;. Retrieved June 28, 2022.">[1]</span></a></sup> specifies the structure of the commit message:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">&lt;type&gt;[optional scope]: &lt;description&gt;<br><br>[optional body]<br><br>[optional footer(s)]<br></code></pre></td></tr></table></figure><h3 id="Type"><a href="#Type" class="headerlink" title="Type"></a>Type</h3><p>The type must use <strong>lowercase</strong>, cannot empty, followed by the OPTIONAL scope, OPTIONAL <code>!</code>, and REQUIRED terminal colon and space.</p><p>There are all available commit types:</p><ul><li><code>build</code></li><li><code>chore</code></li><li><code>ci</code></li><li><code>docs</code></li><li><code>feat</code></li><li><code>fix</code></li><li><code>perf</code></li><li><code>refactor</code></li><li><code>revert</code></li><li><code>style</code></li><li><code>test</code></li></ul><h3 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h3><p>A scope MAY be provided after a type. A scope MUST consist of a noun describing a section of the codebase surrounded by parenthesis.</p><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>The description is a short summary of the code changes, cannot be empty, and does not end with a period.</p><h3 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h3><p>A longer commit body MAY be provided after the short description, providing additional contextual information about the code changes. The body MUST begin one blank line after the description.</p><p>A commit body is free-form and MAY consist of any number of newline separated paragraphs.</p><h3 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h3><p>One or more footers MAY be provided one blank line after the body. Each footer MUST consist of a word token, followed by either a <code>:&lt;space&gt;</code> or <code>&lt;space&gt;#</code> separator, followed by a string value.</p><p>A footerâ€™s token MUST use <code>-</code> in place of whitespace characters, a only exception is made for <code>BREAKING CHANGE</code>.</p><p>A footerâ€™s value MAY contain spaces and newlines.</p><h3 id="Correlate-with-SemVer"><a href="#Correlate-with-SemVer" class="headerlink" title="Correlate with SemVer"></a>Correlate with SemVer</h3><p>Some commit types may affect <a href="https://semver.org/">SemVer</a> changes:</p><ol><li><strong>fix</strong> means patches a bug, this correlates with <code>PATCH</code> in Semantic Versioning.</li><li><strong>feat</strong> means introduces a new feature, this correlates with <code>MINOR</code> in Semantic Versioning.</li><li><strong>BREAKING CHANGE</strong> is in the footer, or appends a <code>!</code> after the type&#x2F;scope, this correlates with <code>MAJOR</code> in Semantic Versioning.</li></ol><h2 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h2><h3 id="Gitmoji"><a href="#Gitmoji" class="headerlink" title="Gitmoji"></a>Gitmoji</h3><p><a href="https://gitmoji.dev/">Gitmoji</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="&quot;[gitmoji](https://gitmoji.dev/)&quot;. [Archived](https://web.archive.org/web/20220628095615/https://gitmoji.dev/) from the original on June 28, 2022. Retrieved June 28, 2022.">[2]</span></a></sup> is an initiative to standardize and explain the use of emojis on GitHub commit messages.</p><h3 id="VS-Code-Extension"><a href="#VS-Code-Extension" class="headerlink" title="VS Code Extension"></a>VS Code Extension</h3><p>When committing in the VS Code, <a href="https://marketplace.visualstudio.com/items?itemName=vivaxy.vscode-conventional-commits">Conventional Commits</a><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="&quot;[Semantic Versioning](https://semver.org/)&quot;. [Archived](https://web.archive.org/web/20220628082309/https://semver.org/) from the original on June 28, 2022. Retrieved June 28, 2022.">[3]</span></a></sup> extension can help to generate a commit message.</p><p><img src="https://picture.zhanganzhi.com/2022/06/28/ap3xacu.png" alt="The interface of Conventional Commits"></p><h3 id="GitHub-Action"><a href="#GitHub-Action" class="headerlink" title="GitHub Action"></a>GitHub Action</h3><p><a href="https://github.com/google-github-actions/release-please-action">Release Please Action</a><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="&quot;[Release Please Action](https://github.com/google-github-actions/release-please-action)&quot;. [Archived](https://web.archive.org/web/20220628095655/https://github.com/google-github-actions/release-please-action) from the original on June 28, 2022. Retrieved June 28, 2022.">[4]</span></a></sup> is a GitHub Action, which can auto-generate and create releases based on commit messages.</p><p>Release Please Action will automatically create release pr includes generated CHANGELOG. When PR is merged, it will create a release, and you can run CI&#x2F;CD and upload files to the release.</p><p><img src="https://picture.zhanganzhi.com/2022/06/28/h8ihofj.png" alt="The PR created by Release Please Action"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>&quot;<a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a>&quot;. Retrieved June 28, 2022.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>&quot;<a href="https://gitmoji.dev/">gitmoji</a>&quot;. <a href="https://web.archive.org/web/20220628095615/https://gitmoji.dev/">Archived</a> from the original on June 28, 2022. Retrieved June 28, 2022.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>&quot;<a href="https://semver.org/">Semantic Versioning</a>&quot;. <a href="https://web.archive.org/web/20220628082309/https://semver.org/">Archived</a> from the original on June 28, 2022. Retrieved June 28, 2022.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>&quot;<a href="https://github.com/google-github-actions/release-please-action">Release Please Action</a>&quot;. <a href="https://web.archive.org/web/20220628095655/https://github.com/google-github-actions/release-please-action">Archived</a> from the original on June 28, 2022. Retrieved June 28, 2022.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>GitHub</tag>
      
      <tag>VS Code</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git çº¦å®šå¼æäº¤</title>
    <link href="/zh-CN/2022/06/ca740262a99f/"/>
    <url>/zh-CN/2022/06/ca740262a99f/</url>
    
    <content type="html"><![CDATA[<blockquote><p>çº¦å®šå¼æäº¤è§„èŒƒæ˜¯ä¸€ç§åŸºäºæäº¤ä¿¡æ¯çš„è½»é‡çº§çº¦å®šã€‚å®ƒæä¾›äº†ä¸€ç»„ç®€å•è§„åˆ™æ¥åˆ›å»ºæ¸…æ™°çš„æäº¤å†å²ï¼›è¿™æ›´æœ‰åˆ©äºç¼–å†™è‡ªåŠ¨åŒ–å·¥å…·ã€‚é€šè¿‡åœ¨æäº¤ä¿¡æ¯ä¸­æè¿°åŠŸèƒ½ã€ä¿®å¤å’Œç ´åæ€§å˜æ›´ï¼Œä½¿è¿™ç§æƒ¯ä¾‹ä¸ <a href="https://semver.org/">SemVer</a> ç›¸äº’å¯¹åº”ã€‚</p></blockquote><span id="more"></span><ul><li>è‡ªåŠ¨åŒ–ç”Ÿæˆ CHANGELOGã€‚</li><li>åŸºäºæäº¤çš„ç±»å‹ï¼Œè‡ªåŠ¨å†³å®šè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å˜æ›´ã€‚</li><li>å‘åŒäº‹ã€å…¬ä¼—ä¸å…¶ä»–åˆ©ç›Šå…³ç³»è€…ä¼ è¾¾å˜åŒ–çš„æ€§è´¨ã€‚</li><li>è§¦å‘æ„å»ºå’Œéƒ¨ç½²æµç¨‹ã€‚</li><li>è®©äººä»¬æ¢ç´¢ä¸€ä¸ªæ›´åŠ ç»“æ„åŒ–çš„æäº¤å†å²ï¼Œä»¥ä¾¿é™ä½å¯¹ä½ çš„é¡¹ç›®åšå‡ºè´¡çŒ®çš„éš¾åº¦ã€‚</li></ul><h2 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h2><p><a href="https://www.conventionalcommits.org/en/v1.0.0/">çº¦å®šå¼æäº¤</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/). [2022-06-28].">[1]</span></a></sup> è§„å®šäº†æ¯ä¸€æ¡ commit message çš„æ ¼å¼ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">&lt;type&gt;[optional scope]: &lt;description&gt;<br><br>[optional body]<br><br>[optional footer(s)]<br></code></pre></td></tr></table></figure><h3 id="ç±»å‹ï¼ˆtypeï¼‰"><a href="#ç±»å‹ï¼ˆtypeï¼‰" class="headerlink" title="ç±»å‹ï¼ˆtypeï¼‰"></a>ç±»å‹ï¼ˆtypeï¼‰</h3><p>ç±»å‹åº”å½“ä½¿ç”¨<strong>å°å†™å­—æ¯</strong>ï¼Œä¸èƒ½ä¸ºç©ºï¼Œåæ¥<strong>å¯é€‰çš„</strong>èŒƒå›´å­—æ®µå’Œ <code>!</code>ï¼Œä»¥åŠ<strong>å¿…è¦çš„</strong>å†’å·å’Œç©ºæ ¼ã€‚</p><p>ä¸‹ä¸ºå¯ç”¨çš„ç±»å‹åˆ—è¡¨ï¼š</p><ul><li><code>build</code></li><li><code>chore</code></li><li><code>ci</code></li><li><code>docs</code></li><li><code>feat</code></li><li><code>fix</code></li><li><code>perf</code></li><li><code>refactor</code></li><li><code>revert</code></li><li><code>style</code></li><li><code>test</code></li></ul><h3 id="èŒƒå›´ï¼ˆscopeï¼‰"><a href="#èŒƒå›´ï¼ˆscopeï¼‰" class="headerlink" title="èŒƒå›´ï¼ˆscopeï¼‰"></a>èŒƒå›´ï¼ˆscopeï¼‰</h3><p>èŒƒå›´å­—æ®µ<strong>å¯ä»¥</strong>è·Ÿéšåœ¨ç±»å‹å­—æ®µåé¢ã€‚èŒƒå›´<strong>å¿…é¡»</strong>æ˜¯ä¸€ä¸ªæè¿°æŸéƒ¨åˆ†ä»£ç çš„åè¯ï¼Œå¹¶ç”¨åœ†æ‹¬å·åŒ…å›´ã€‚</p><h3 id="æè¿°ï¼ˆdescriptionï¼‰"><a href="#æè¿°ï¼ˆdescriptionï¼‰" class="headerlink" title="æè¿°ï¼ˆdescriptionï¼‰"></a>æè¿°ï¼ˆdescriptionï¼‰</h3><p>å¯¹ä»£ç å˜æ›´çš„ç®€çŸ­æ€»ç»“ï¼Œä¸èƒ½ä¸ºç©ºï¼Œç»“å°¾ä¸å†™å¥å·ã€‚</p><h3 id="æ­£æ–‡ï¼ˆbodyï¼‰"><a href="#æ­£æ–‡ï¼ˆbodyï¼‰" class="headerlink" title="æ­£æ–‡ï¼ˆbodyï¼‰"></a>æ­£æ–‡ï¼ˆbodyï¼‰</h3><p>åœ¨ç®€çŸ­æè¿°ä¹‹åï¼Œ<strong>å¯ä»¥</strong>ç¼–å†™è¾ƒé•¿çš„æäº¤æ­£æ–‡ï¼Œä¸ºä»£ç å˜æ›´æä¾›é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚<strong>æ­£æ–‡</strong>å¿…é¡»èµ·å§‹äºæè¿°å­—æ®µç»“æŸçš„ä¸€ä¸ªç©ºè¡Œåã€‚</p><p>æ­£æ–‡å†…å®¹è‡ªç”±ç¼–å†™ï¼Œå¹¶<strong>å¯ä»¥</strong>ä½¿ç”¨ç©ºè¡Œåˆ†éš”ä¸åŒæ®µè½ã€‚</p><h3 id="è„šæ³¨ï¼ˆfooterï¼‰"><a href="#è„šæ³¨ï¼ˆfooterï¼‰" class="headerlink" title="è„šæ³¨ï¼ˆfooterï¼‰"></a>è„šæ³¨ï¼ˆfooterï¼‰</h3><p>åœ¨æ­£æ–‡ç»“æŸçš„ä¸€ä¸ªç©ºè¡Œä¹‹åï¼Œ<strong>å¯ä»¥</strong>ç¼–å†™ä¸€è¡Œæˆ–å¤šè¡Œè„šæ³¨ã€‚æ¯è¡Œè„šæ³¨éƒ½<strong>å¿…é¡»</strong>åŒ…å«ä¸€ä¸ªä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œåé¢ç´§è·Ÿ <code>:&lt;space&gt;</code> æˆ– <code>&lt;space&gt;#</code> ä½œä¸ºåˆ†éš”ç¬¦ï¼Œåé¢å†ç´§è·Ÿä»¤ç‰Œçš„å€¼ã€‚</p><p>è„šæ³¨çš„ä»¤ç‰Œ<strong>å¿…é¡»</strong>ä½¿ç”¨ <code>-</code> ä½œä¸ºè¿å­—ç¬¦ï¼Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯ <code>BREAKING CHANGE</code>ã€‚</p><p>è„šæ³¨çš„å€¼<strong>å¯ä»¥</strong>åŒ…å«ç©ºæ ¼å’Œæ¢è¡Œã€‚</p><h3 id="SemVer-çš„å½±å“"><a href="#SemVer-çš„å½±å“" class="headerlink" title="SemVer çš„å½±å“"></a>SemVer çš„å½±å“</h3><p>æœ‰äº›æäº¤ç±»å‹å¯¹ <a href="https://semver.org/">SemVer</a> çš„ç‰ˆæœ¬å·æœ‰å½±å“ï¼š</p><ol><li><strong>fix</strong> è¡¨ç¤ºä¿®å¤äº†ä¸€ä¸ª bugï¼Œå¯¹åº”è¯­ä¹‰åŒ–ç‰ˆæœ¬çš„ <code>PATCH</code>ã€‚</li><li><strong>feat</strong> è¡¨ç¤ºæ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯¹åº”è¯­ä¹‰åŒ–ç‰ˆæœ¬çš„ <code>MINOR</code>ã€‚</li><li><strong>BREAKING CHANGE</strong> åŒ…å«åœ¨è„šæ³¨ä¸­ï¼Œæˆ–ç±»å‹&#x2F;èŒƒå›´åæœ‰ä¸€ä¸ª <code>!</code>ï¼Œå¯¹åº”è¯­ä¹‰åŒ–ç‰ˆæœ¬çš„ <code>MAJOR</code>ã€‚</li></ol><h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><h3 id="Gitmoji"><a href="#Gitmoji" class="headerlink" title="Gitmoji"></a>Gitmoji</h3><p><a href="https://gitmoji.dev/">Gitmoji</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[gitmoji](https://gitmoji.dev/). [2022-06-28]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220628095615/https://gitmoji.dev/)äº2022-06-28ï¼‰.">[2]</span></a></sup> æ˜¯ä¸€é¡¹æ—¨åœ¨è§„èŒƒå’Œè§£é‡Šåœ¨ GitHub æäº¤æ¶ˆæ¯ä¸Šä½¿ç”¨è¡¨æƒ…ç¬¦å·çš„å€¡è®®ã€‚</p><h3 id="VS-Code-æ‰©å±•"><a href="#VS-Code-æ‰©å±•" class="headerlink" title="VS Code æ‰©å±•"></a>VS Code æ‰©å±•</h3><p>åœ¨ VS Code ä¸­æäº¤æ—¶ï¼Œ<a href="https://marketplace.visualstudio.com/items?itemName=vivaxy.vscode-conventional-commits">Conventional Commits</a><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Semantic Versioning](https://semver.org/). [2022-06-28]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220628082309/https://semver.org/)äº2022-06-28ï¼‰.">[3]</span></a></sup> æ‰©å±•å¯ä»¥å¸®åŠ©ç”Ÿæˆæäº¤ä¿¡æ¯ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/28/ap3xacu.png" alt="Conventional Commits çš„ç•Œé¢"></p><h3 id="GitHub-Action"><a href="#GitHub-Action" class="headerlink" title="GitHub Action"></a>GitHub Action</h3><p><a href="https://github.com/google-github-actions/release-please-action">Release Please Action</a><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Release Please Action](https://github.com/google-github-actions/release-please-action). [2022-06-28]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220628095655/https://github.com/google-github-actions/release-please-action)äº2022-06-28ï¼‰.">[4]</span></a></sup> æ˜¯ä¸€ä¸ª GitHub Actionï¼Œå¯ä»¥æ ¹æ®æäº¤ä¿¡æ¯è‡ªåŠ¨ç”Ÿæˆ CHANGELOG å’Œå‘å¸ƒ Releaseã€‚</p><p>Release Please Action ä¼šè‡ªåŠ¨åˆ›å»ºå‘å¸ƒ PRï¼ŒåŒ…å«ç”Ÿæˆçš„ CHANGELOGã€‚å½“ PR åˆå¹¶æ—¶ï¼Œå‘å¸ƒ Releaseï¼Œæ­¤æ—¶å¯ä»¥æ‰§è¡Œ CI&#x2F;CDï¼Œå°†æ–‡ä»¶ä¸Šä¼ åˆ° Release å’Œå‘å¸ƒã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/28/h8ihofj.png" alt="Release Please Action åˆ›å»ºçš„ PR"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a>. [2022-06-28].<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://gitmoji.dev/">gitmoji</a>. [2022-06-28]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220628095615/https://gitmoji.dev/">å­˜æ¡£</a>äº2022-06-28ï¼‰.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://semver.org/">Semantic Versioning</a>. [2022-06-28]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220628082309/https://semver.org/">å­˜æ¡£</a>äº2022-06-28ï¼‰.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://github.com/google-github-actions/release-please-action">Release Please Action</a>. [2022-06-28]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220628095655/https://github.com/google-github-actions/release-please-action">å­˜æ¡£</a>äº2022-06-28ï¼‰.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>GitHub</tag>
      
      <tag>VS Code</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GitHub Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢</title>
    <link href="/zh-CN/2022/06/0800d76d306e/"/>
    <url>/zh-CN/2022/06/0800d76d306e/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Hexo å®˜æ–¹æ–‡æ¡£çš„ <a href="https://pages.github.com/">GitHub Pages</a> éƒ¨ç½²æ–¹æ¡ˆ<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[å°† Hexo éƒ¨ç½²åˆ° GitHub Pages](https://hexo.io/zh-cn/docs/github-pages). Hexo. 2022-06-11 [2022-06-17]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220617122944/https://hexo.io/zh-cn/docs/github-pages)äº2022-06-17ï¼‰.">[1]</span></a></sup>éœ€è¦æ³¨å†Œç¬¬ä¸‰æ–¹è´¦å·ä¸”ç»‘å®šä¿¡ç”¨å¡ï¼Œæ‰€ä»¥åˆ›å»ºåšå®¢æ—¶é€‰æ‹©äº†ä¸€é”®éƒ¨ç½²<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[éƒ¨ç½²](https://hexo.io/zh-cn/docs/one-command-deployment). Hexo. 2022-06-11 [2022-06-17]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220617122947/https://hexo.io/zh-cn/docs/one-command-deployment)äº2022-06-17ï¼‰.">[2]</span></a></sup>çš„æ–¹æ¡ˆï¼Œä½†æ˜¯éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ <code>hexo clean &amp;&amp; hexo d</code> éƒ¨ç½²åšå®¢ï¼Œæœ‰äº›éº»çƒ¦ï¼Œäºæ˜¯å†³å®šæ”¹ä¸º GitHub Actions è‡ªåŠ¨éƒ¨ç½²ã€‚</p></blockquote><span id="more"></span><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>åˆ†åˆ«è®¾ç½®åšå®¢ä»“åº“å’Œéƒ¨ç½²ä»“åº“ï¼Œéƒ¨ç½²ä»“åº“ä¸º <a href="https://pages.github.com/">GitHub Pages</a>ã€‚</p><h2 id="é…ç½®-SSH"><a href="#é…ç½®-SSH" class="headerlink" title="é…ç½® SSH"></a>é…ç½® SSH</h2><p>åœ¨æœ¬åœ°ç”Ÿæˆä¸€å¯¹ SSH å¯†é’¥ï¼Œæ³¨æ„æ›´æ”¹æ–‡ä»¶åé¿å…å°†æ­£åœ¨ä½¿ç”¨çš„å¯†é’¥è¦†ç›–ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-keygen -t ed25519 -C <span class="hljs-string">&quot;your_email@example.com&quot;</span><br></code></pre></td></tr></table></figure><p>åœ¨<strong>åšå®¢ä»“åº“</strong>çš„ <code>Settings -&gt; Secrets -&gt; Actions</code> ä¸­æ·»åŠ  SSH <strong>ç§é’¥</strong>ï¼Œå‘½åä¸º <code>SSH_DEPLOY_KEY</code>ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/011b4r1.png" alt="æ·»åŠ ç§é’¥"></p><p>åœ¨<strong>éƒ¨ç½²ä»“åº“</strong>çš„ <code>Settings -&gt; Deploy keys</code> ä¸­æ·»åŠ  SSH <strong>å…¬é’¥</strong>ï¼Œæ³¨æ„å‹¾é€‰ <code>Allow write access</code>ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/ui72xts.png" alt="æ·»åŠ å…¬é’¥"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/ktzdikp.png" alt="å‹¾é€‰ Allow write access"></p><h2 id="é…ç½®-hexo-deployer-git"><a href="#é…ç½®-hexo-deployer-git" class="headerlink" title="é…ç½® hexo-deployer-git"></a>é…ç½® hexo-deployer-git</h2><p>å®‰è£… <code>hexo-deployer-git</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-deployer-git<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>_config.yml</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[éƒ¨ç½²](https://hexo.io/zh-cn/docs/one-command-deployment). Hexo. 2022-06-11 [2022-06-17]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220617122947/https://hexo.io/zh-cn/docs/one-command-deployment)äº2022-06-17ï¼‰.">[2]</span></a></sup>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">&#x27;git&#x27;</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:Username/Repository</span><br></code></pre></td></tr></table></figure><h2 id="ç¼–å†™-Workflow"><a href="#ç¼–å†™-Workflow" class="headerlink" title="ç¼–å†™ Workflow"></a>ç¼–å†™ Workflow</h2><p>åˆ›å»º <code>.github/workflows/deployment.yml</code>ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼Œæ³¨æ„ä¿®æ”¹ä»“åº“åœ°å€å’Œ Git é…ç½®ã€‚æ­¤æ—¶å½“ <code>push</code> åˆ°åšå®¢ä»“åº“æ—¶ï¼ŒGitHub Actions å°†ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">on:</span> <span class="hljs-string">push</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">deployment:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">Deployment</span><br><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Check</span> <span class="hljs-string">Out</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Clone</span> <span class="hljs-string">Repo</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">repository:</span> <span class="hljs-string">Username/Repository</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">.deploy_git</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-number">16</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Git</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          git config --global user.name &quot;Example&quot;</span><br><span class="hljs-string">          git config --global user.email &quot;email@example.com&quot;</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">SSH</span> <span class="hljs-string">Key</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          mkdir -p ~/.ssh</span><br><span class="hljs-string">          echo &quot;$&#123;&#123; secrets.SSH_DEPLOY_KEY &#125;&#125;&quot; &gt; ~/.ssh/id_ed25519</span><br><span class="hljs-string">          chmod 600 ~/.ssh/id_ed25519</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          npm install --location=global hexo-cli</span><br><span class="hljs-string">          npm install</span><br><span class="hljs-string">          hexo d</span><br></code></pre></td></tr></table></figure><h2 id="Workflow-è§£æ"><a href="#Workflow-è§£æ" class="headerlink" title="Workflow è§£æ"></a>Workflow è§£æ</h2><p>ä¸¤ä¸ª Checkout çš„ä½œç”¨æ˜¯åˆ‡æ¢åˆ°åšå®¢ä»“åº“æœ€æ–°æäº¤ï¼Œå¹¶ä¸”å°†éƒ¨ç½²ä»“åº“å…‹éš†åˆ° <code>.deploy_git</code>ï¼Œä¹Ÿå°±æ˜¯ Hexo çš„éƒ¨ç½²ç›®å½•ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Check</span> <span class="hljs-string">Out</span><br>    <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Clone</span> <span class="hljs-string">Repo</span><br>  <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br>  <span class="hljs-attr">with:</span><br>   <span class="hljs-attr">repository:</span> <span class="hljs-string">Username/Repository</span><br>   <span class="hljs-attr">path:</span> <span class="hljs-string">.deploy_git</span><br></code></pre></td></tr></table></figure><p>ä¸‹ä¸€æ­¥å®‰è£… Nodeï¼Œç‰ˆæœ¬éœ€è¦ä¸åšå®¢ä½¿ç”¨çš„ç‰ˆæœ¬ç›¸åŒã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node</span><br>  <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span><br>  <span class="hljs-attr">with:</span><br>    <span class="hljs-attr">node-version:</span> <span class="hljs-number">16</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®æäº¤çš„ç”¨æˆ·åå’Œé‚®ç®±ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Git</span><br>  <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">    git config --global user.name &quot;Example&quot;</span><br><span class="hljs-string">    git config --global user.email &quot;email@example.com&quot;</span><br></code></pre></td></tr></table></figure><p>å°†å­˜å‚¨åœ¨ä»“åº“ Secrets çš„ SSH ç§é’¥å­˜å‚¨åˆ°æœ¬åœ°ä¾› Git ä½¿ç”¨ã€‚<code>mkdir</code> æ˜¯ä¸ºäº†ä¸‹ä¸€æ­¥å¯ä»¥åœ¨ <code>~/.ssh</code> ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œ<code>chmod</code> è®¾ç½®æƒé™ï¼ŒGit æ‰èƒ½ä½¿ç”¨ç§é’¥<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[åˆ©ç”¨ Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢](https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/). Sanonz. 2020-05-12 [2022-06-17]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20210618140206/https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/)äº2021-06-18ï¼‰.">[3]</span></a></sup>ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">SSH</span> <span class="hljs-string">Key</span><br>  <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">    mkdir -p ~/.ssh</span><br><span class="hljs-string">    echo &quot;$&#123;&#123; secrets.SSH_DEPLOY_KEY &#125;&#125;&quot; &gt; ~/.ssh/id_ed25519</span><br><span class="hljs-string">    chmod 600 ~/.ssh/id_ed25519</span><br></code></pre></td></tr></table></figure><p>æœ€åå®‰è£… Hexo å’Œä¾èµ–ï¼Œè¿è¡Œ <code>hexo d</code> éƒ¨ç½²åšå®¢ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span><br>  <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">    npm install --location=global hexo-cli</span><br><span class="hljs-string">    npm install</span><br><span class="hljs-string">    hexo d</span><br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://hexo.io/zh-cn/docs/github-pages">å°† Hexo éƒ¨ç½²åˆ° GitHub Pages</a>. Hexo. 2022-06-11 [2022-06-17]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220617122944/https://hexo.io/zh-cn/docs/github-pages">å­˜æ¡£</a>äº2022-06-17ï¼‰.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://hexo.io/zh-cn/docs/one-command-deployment">éƒ¨ç½²</a>. Hexo. 2022-06-11 [2022-06-17]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220617122947/https://hexo.io/zh-cn/docs/one-command-deployment">å­˜æ¡£</a>äº2022-06-17ï¼‰.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/">åˆ©ç”¨ Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢</a>. Sanonz. 2020-05-12 [2022-06-17]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20210618140206/https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/">å­˜æ¡£</a>äº2021-06-18ï¼‰.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>ç»éªŒåˆ†äº«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GitHub</tag>
      
      <tag>åšå®¢</tag>
      
      <tag>è‡ªåŠ¨éƒ¨ç½²</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CurseForge Modpack Downloader Tutorial</title>
    <link href="/en/2022/06/7b049d0aa9ff/"/>
    <url>/en/2022/06/7b049d0aa9ff/</url>
    
    <content type="html"><![CDATA[<blockquote><p>On May 16, 2022, CurseForge released the official API. This result in third-party launchers no longer to download modpacks, like MultiMC and PCL2. More info can be found in <a href="https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2">â€œThe CurseForge Official API is Now Liveâ€</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Moran Weiss. &quot;[The CurseForge Official API is Now Live](https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2)&quot;. Overwolf Blog. May 16, 2022. [Archived](https://web.archive.org/web/20220608151743/https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2) from the original on June 8, 2022. Retrieved May 23, 2022.">[1]</span></a></sup>.</p></blockquote><span id="more"></span><p>Therefore, I made a software <a href="https://github.com/AnzhiZhang/CurseForgeModpackDownloader">CurseForge Modpack Downloader</a> (CMPDL). It could download mods for modpack downloaded from CurseForge, an pack to the format that is supported by launchers like MultiMC, HMCL, and PCL2.</p><p>At this moment, they say HMCL and PCL2 can download again, but obviously, it is not in the official method. MMCâ€™s author said he has may support the API Key of CurseForge to downlaod<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="phit. &quot;[Looks like CurseForge API in MultiMC is deprecated and unusable](https://github.com/MultiMC/Launcher/issues/4716#issuecomment-1135498404)&quot;. GitHub. May 24, 2022. [Archived](https://web.archive.org/web/20220608152954/https://github.com/MultiMC/Launcher/issues/4716) from the original on June 8, 2022. Retrieved May 26, 2022.">[2]</span></a></sup>.</p><p>Today (July 2023), I recommend using <a href="https://prismlauncher.org/">Prism Launcher</a> instead of MMC, which is an forked version of MMC and supports package downloads from CourseForge and more useful features.  There is no migration cost and you just need to set up the same instance directory as MMC.</p><h2 id="Download-Program"><a href="#Download-Program" class="headerlink" title="Download Program"></a>Download Program</h2><p>Open the <a href="https://github.com/AnzhiZhang/CurseForgeModpackDownloader">repository</a>, and download the newest version on the right side. You also could click <a href="https://github.com/AnzhiZhang/CurseForgeModpackDownloader/releases/latest">here</a> to go to the newest release.</p><p><img src="https://picture.zhanganzhi.com/2022/07/02/stjqlmi.png" alt="Find Releases"></p><p><img src="https://picture.zhanganzhi.com/2022/07/02/bp3dzql.png" alt="Download the first one in Assets"></p><h2 id="Download-Modpack"><a href="#Download-Modpack" class="headerlink" title="Download Modpack"></a>Download Modpack</h2><p>There are two ways to download modpacks: direct download in program or import.</p><h3 id="Direct-Download-in-CMPDL"><a href="#Direct-Download-in-CMPDL" class="headerlink" title="Direct Download in CMPDL"></a>Direct Download in CMPDL</h3><p>You could find modpacks in the list.</p><p><img src="https://picture.zhanganzhi.com/2022/07/02/l7f94y7.png" alt="Select a modpack"></p><p><img src="https://picture.zhanganzhi.com/2022/07/02/1uo8z0g.png" alt="Entry keywords at the top to search"></p><p><img src="https://picture.zhanganzhi.com/2022/07/02/mptddvj.png" alt="Change sort"></p><p><img src="https://picture.zhanganzhi.com/2022/07/02/b5o9rnr.png" alt="Filter game version"></p><p>After selecting a modpack, you could choose the modpack version at the bottom right.</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/2defdt2.png" alt="Choose modpack version"></p><p><img src="https://picture.zhanganzhi.com/2022/07/02/ldo9vkm.png" alt="Click download and wait for the downloading"></p><h3 id="Use-CurseForge-Download-and-Import"><a href="#Use-CurseForge-Download-and-Import" class="headerlink" title="Use CurseForge Download and Import"></a>Use CurseForge Download and Import</h3><p>Find moodpack your like on CourseForge and download modpack file, I will use Restrict Skyblock for example.</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/7jqy8d1.png" alt="Go to Files"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/0lwxnnf.png" alt="Choose modpack version"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/4lgr1mb.png" alt="Click Download"></p><p><img src="https://picture.zhanganzhi.com/2022/07/02/ebln9qo.png" alt="Click Import"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/teu0gwf.png" alt="Select the file downloaded from CurseForge"></p><p><img src="https://picture.zhanganzhi.com/2022/07/02/yg7seuc.png" alt="Wait for the downloading"></p><h2 id="Import-to-Launcher"><a href="#Import-to-Launcher" class="headerlink" title="Import to Launcher"></a>Import to Launcher</h2><p>Wait for the downloading to finish and pop this prompt. Import the zip file (located at the program path, if imported from a specific file, it is the original path) into your launcher.</p><p><img src="https://picture.zhanganzhi.com/2022/07/02/wps5n6s.png" alt="Prompt of finished"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/r1o164g.png" alt="Import to MultiMC"></p><h2 id="Get-CurseForge-API-Key"><a href="#Get-CurseForge-API-Key" class="headerlink" title="Get CurseForge API Key"></a>Get CurseForge API Key</h2><p>Go to <a href="https://console.curseforge.com/">https://console.curseforge.com/</a> and sign up with Google.</p><p><img src="https://picture.zhanganzhi.com/2022/06/27/4shwhrw.png" alt="Only allowed Google"></p><p><img src="https://picture.zhanganzhi.com/2022/06/27/n854m6c.png" alt="Copy in API Keys"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Moran Weiss. &quot;<a href="https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2">The CurseForge Official API is Now Live</a>&quot;. Overwolf Blog. May 16, 2022. <a href="https://web.archive.org/web/20220608151743/https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2">Archived</a> from the original on June 8, 2022. Retrieved May 23, 2022.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>phit. &quot;<a href="https://github.com/MultiMC/Launcher/issues/4716#issuecomment-1135498404">Looks like CurseForge API in MultiMC is deprecated and unusable</a>&quot;. GitHub. May 24, 2022. <a href="https://web.archive.org/web/20220608152954/https://github.com/MultiMC/Launcher/issues/4716">Archived</a> from the original on June 8, 2022. Retrieved May 26, 2022.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Minecraft</category>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Minecraft</tag>
      
      <tag>æ•´åˆåŒ…</tag>
      
      <tag>CurseForge</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CurseForge æ•´åˆåŒ…ä¸‹è½½å™¨æ•™ç¨‹</title>
    <link href="/zh-CN/2022/06/7b049d0aa9ff/"/>
    <url>/zh-CN/2022/06/7b049d0aa9ff/</url>
    
    <content type="html"><![CDATA[<blockquote><p>2022å¹´5æœˆ16æ—¥ï¼ŒCurseForge å‘å¸ƒäº†å®˜æ–¹ APIï¼ŒåŒæ—¶å¼ƒç”¨äº†æ—§çš„ APIï¼Œè¿™å¯¼è‡´ç¬¬ä¸‰æ–¹å¯åŠ¨å™¨æ— æ³•ä¸‹è½½ï¼Œå¦‚ MultiMC å’Œ PCL2ã€‚å…·ä½“åŸå› å’Œè¯¦ç»†æƒ…å†µåœ¨ <a href="https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2">ã€ŠThe CurseForge Official API is Now Liveã€‹</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Moran Weiss. [The CurseForge Official API is Now Live](https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2). Overwolf Blog. 2022-05-16 [2022-05-23]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220608151743/https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2)äº2022-06-08ï¼‰.">[1]</span></a></sup> ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚</p></blockquote><span id="more"></span><p>å› æ­¤ï¼Œæˆ‘åˆ¶ä½œäº†ä¸€ä¸ªè½¯ä»¶ <a href="https://github.com/AnzhiZhang/CurseForgeModpackDownloader">CurseForge Modpack Downloader</a> (CMPDL)ï¼Œå¯ä»¥å°† CurseForge ä¸‹è½½çš„æ•´åˆåŒ…è¡¥å…¨æ–‡ä»¶ï¼Œåˆ¶ä½œä¸ºå¯åŠ¨å™¨æ”¯æŒçš„æ ¼å¼ã€‚ç›®å‰å·²æµ‹è¯•æ”¯æŒçš„å¯åŠ¨å™¨åˆ—è¡¨ä¸ºï¼šMultiMCï¼ŒHMCL å’Œ PCL2ã€‚</p><p>å½“å‰ï¼Œæ®è¯´ HMCL å’Œ PCL2 å·²é‡æ–°æ”¯æŒä¸‹è½½ï¼Œä½†æ˜¾ç„¶ä¸æ˜¯å®˜æ–¹è®¤å¯çš„æ–¹å¼ã€‚MMC ä½œè€…è¡¨ç¤ºæ²¡æœ‰çŸ­æœŸæ”¯æŒçš„è®¡åˆ’ï¼Œé•¿æœŸå¯èƒ½æ”¯æŒ API Key çš„æ–¹å¼<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="phit. [Looks like CurseForge API in MultiMC is deprecated and unusable](https://github.com/MultiMC/Launcher/issues/4716#issuecomment-1135498404). GitHub. 2022-05-24 [2022-05-26]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220608152954/https://github.com/MultiMC/Launcher/issues/4716)äº2022-06-08ï¼‰.">[2]</span></a></sup>ã€‚</p><p>ä»Šå¤©ï¼ˆ2023å¹´7æœˆï¼‰ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ <a href="https://prismlauncher.org/">Prism Launcher</a> æ¥æ›¿ä»£ MMCï¼Œè¿™æ˜¯ MMC çš„åˆ†æ”¯ç‰ˆæœ¬ï¼Œä¸”æ”¯æŒ CourseForge æ•´åˆåŒ…ä¸‹è½½åŠæ›´å¤šå®ç”¨åŠŸèƒ½ã€‚ä½¿ç”¨å®ƒæ²¡æœ‰ä»»ä½•è¿ç§»æˆæœ¬ï¼Œæ‚¨åªéœ€è¦è®¾ç½®ä¸ MMC ç›¸åŒçš„å®ä¾‹ç›®å½•å³å¯ã€‚</p><h2 id="ä¸‹è½½ç¨‹åº"><a href="#ä¸‹è½½ç¨‹åº" class="headerlink" title="ä¸‹è½½ç¨‹åº"></a>ä¸‹è½½ç¨‹åº</h2><p>æ‰“å¼€ <a href="https://github.com/AnzhiZhang/CurseForgeModpackDownloader">ç¨‹åºä»“åº“</a>ï¼Œåœ¨å³ä¾§çš„ Releases ä¸‹è½½æœ€æ–°ç‰ˆã€‚æ‚¨ä¹Ÿå¯ä»¥ç‚¹å‡» <a href="https://github.com/AnzhiZhang/CurseForgeModpackDownloader/releases/latest">è¿™é‡Œ</a> ç›´æ¥å‰å¾€æœ€æ–°ç‰ˆ</p><p><img src="https://picture.zhanganzhi.com/2022/07/02/stjqlmi.png" alt="æ‰¾åˆ° Releases"></p><p><img src="https://picture.zhanganzhi.com/2022/07/02/bp3dzql.png" alt="ä¸‹è½½ Assets çš„ç¬¬ä¸€ä¸ª"></p><h2 id="ä¸‹è½½æ•´åˆåŒ…"><a href="#ä¸‹è½½æ•´åˆåŒ…" class="headerlink" title="ä¸‹è½½æ•´åˆåŒ…"></a>ä¸‹è½½æ•´åˆåŒ…</h2><p>å…±æœ‰ä¸¤ç§æ–¹å¼ä¸‹è½½æ•´åˆåŒ…ï¼šç›´æ¥åœ¨ç¨‹åºå†…ä¸‹è½½æˆ–å¯¼å…¥ã€‚</p><h3 id="ç›´æ¥ä½¿ç”¨-CMPDL-ä¸‹è½½"><a href="#ç›´æ¥ä½¿ç”¨-CMPDL-ä¸‹è½½" class="headerlink" title="ç›´æ¥ä½¿ç”¨ CMPDL ä¸‹è½½"></a>ç›´æ¥ä½¿ç”¨ CMPDL ä¸‹è½½</h3><p>åœ¨ä¸­é—´çš„åˆ—è¡¨å¯ä»¥ç›´æ¥é€‰æ‹©æ•´åˆåŒ…ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/lqfefxc.png" alt="é€‰æ‹©æ•´åˆåŒ…"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/wxp7lxf.png" alt="åœ¨ä¸Šæ–¹è¾“å…¥å…³é”®è¯æœç´¢"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/fy60yqf.png" alt="ä¿®æ”¹æ’åºæ–¹å¼"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/4kir4gd.png" alt="ç­›é€‰æ¸¸æˆç‰ˆæœ¬"></p><p>é€‰æ‹©æ•´åˆåŒ…åï¼Œå¯ä»¥åœ¨å³ä¸‹æ–¹é€‰æ‹©æ•´åˆåŒ…ç‰ˆæœ¬ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/2defdt2.png" alt="é€‰æ‹©æ•´åˆåŒ…ç‰ˆæœ¬"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/mm9ulsp.png" alt="ç‚¹å‡»ä¸‹è½½å¹¶ç­‰å¾…å®Œæˆ"></p><h3 id="ä½¿ç”¨-CurseForge-ä¸‹è½½å¹¶å¯¼å…¥"><a href="#ä½¿ç”¨-CurseForge-ä¸‹è½½å¹¶å¯¼å…¥" class="headerlink" title="ä½¿ç”¨ CurseForge ä¸‹è½½å¹¶å¯¼å…¥"></a>ä½¿ç”¨ CurseForge ä¸‹è½½å¹¶å¯¼å…¥</h3><p>åœ¨ CourseForge ä¸Šæ‰¾åˆ°å–œæ¬¢çš„æ•´åˆåŒ…ï¼Œä¸‹è½½æ•´åˆåŒ…æ–‡ä»¶ï¼Œæ­¤å¤„ä»¥ Restrict Skyblock ä¸ºä¾‹</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/7jqy8d1.png" alt="æ‰“å¼€ Files"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/0lwxnnf.png" alt="é€‰æ‹©æ•´åˆåŒ…ç‰ˆæœ¬"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/4lgr1mb.png" alt="ç‚¹å‡» Download ä¸‹è½½"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/w0x17uf.png" alt="ç‚¹å‡»å¯¼å…¥"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/teu0gwf.png" alt="é€‰æ‹©ä» CurseForge ä¸‹è½½çš„æ–‡ä»¶"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/l3mkqq6.png" alt="ç­‰å¾…ä¸‹è½½å®Œæˆ"></p><h2 id="å¯¼å…¥å¯åŠ¨å™¨"><a href="#å¯¼å…¥å¯åŠ¨å™¨" class="headerlink" title="å¯¼å…¥å¯åŠ¨å™¨"></a>å¯¼å…¥å¯åŠ¨å™¨</h2><p>ç­‰å¾…ä¸‹è½½å®Œæˆå¼¹å‡ºä¸‹å›¾æç¤ºã€‚å°†å‹ç¼©åŒ…ï¼ˆä½äºè½¯ä»¶ç›®å½•ï¼Œå¦‚æœæ˜¯å¯¼å…¥å³ä¸ºåŸè·¯å¾„ï¼‰å¯¼å…¥å¯åŠ¨å™¨å³å¯ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/6cpt62r.png" alt="æç¤ºä¸‹è½½å®Œæˆ"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/r1o164g.png" alt="å¯¼å…¥ MultiMC"></p><h2 id="CurseForge-API-Key-è·å–æ–¹å¼"><a href="#CurseForge-API-Key-è·å–æ–¹å¼" class="headerlink" title="CurseForge API Key è·å–æ–¹å¼"></a>CurseForge API Key è·å–æ–¹å¼</h2><p>åœ¨ <a href="https://console.curseforge.com/">https://console.curseforge.com/</a>ï¼Œä½¿ç”¨ Google æ³¨å†Œã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/27/4shwhrw.png" alt="ä»…æ”¯æŒ Google ç™»å½•"></p><p><img src="https://picture.zhanganzhi.com/2022/06/27/n854m6c.png" alt="åœ¨ API Keys ä¸­å¤åˆ¶"></p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Moran Weiss. <a href="https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2">The CurseForge Official API is Now Live</a>. Overwolf Blog. 2022-05-16 [2022-05-23]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220608151743/https://medium.com/overwolf/the-curseforge-official-api-is-now-live-d314606355c2">å­˜æ¡£</a>äº2022-06-08ï¼‰.<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>phit. <a href="https://github.com/MultiMC/Launcher/issues/4716#issuecomment-1135498404">Looks like CurseForge API in MultiMC is deprecated and unusable</a>. GitHub. 2022-05-24 [2022-05-26]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220608152954/https://github.com/MultiMC/Launcher/issues/4716">å­˜æ¡£</a>äº2022-06-08ï¼‰.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Minecraft</category>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Minecraft</tag>
      
      <tag>æ•´åˆåŒ…</tag>
      
      <tag>CurseForge</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GPG å…¥é—¨æ•™ç¨‹</title>
    <link href="/zh-CN/2022/06/1c71f69657ed/"/>
    <url>/zh-CN/2022/06/1c71f69657ed/</url>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹å’Œæ¦‚å¿µ"><a href="#ç®€ä»‹å’Œæ¦‚å¿µ" class="headerlink" title="ç®€ä»‹å’Œæ¦‚å¿µ"></a>ç®€ä»‹å’Œæ¦‚å¿µ</h2><p>å®Œæ•´çš„å®˜æ–¹æ–‡æ¡£å¯åœ¨ <a href="https://www.gnupg.org/">å®˜ç½‘</a> é˜…è¯»ã€‚</p><blockquote><p>GNU Privacy Guardï¼ˆGnuPG æˆ– GPGï¼‰æ˜¯ä¸€ä¸ªå¯†ç å­¦è½¯ä»¶ï¼Œç”¨äºåŠ å¯†ã€ç­¾åé€šä¿¡å†…å®¹åŠç®¡ç†éå¯¹ç§°å¯†ç å­¦çš„å¯†é’¥ã€‚GnuPG æ˜¯è‡ªç”±è½¯ä»¶ï¼Œéµå¾ª IETF è®¢å®šçš„ OpenPGP æŠ€æœ¯æ ‡å‡†è®¾è®¡ï¼Œå¹¶ä¸ PGP ä¿æŒå…¼å®¹ã€‚</p></blockquote><p>GPG æœ‰è®¸å¤šç”¨é€”ï¼ŒåŒ…æ‹¬æ–‡ä»¶å’Œé‚®ä»¶åŠ å¯†ã€ç­¾åã€Git æäº¤ç­¾åç­‰ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/2hq6kjy.png" alt="ç»è¿‡ GPG ç­¾åçš„æäº¤å¯ä»¥åœ¨ GitHub æ˜¾ç¤ºç»¿è‰²çš„ Verified&lt;sup id&#x3D;&quot;fnref:1&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:1&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;[About commit signature verification](https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;authentication&#x2F;managing-commit-signature-verification&#x2F;about-commit-signature-verification). GitHub Docs. [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20220606095245&#x2F;https:&#x2F;&#x2F;docs.github.com&#x2F;en&#x2F;authentication&#x2F;managing-commit-signature-verification&#x2F;about-commit-signature-verification)äº2022-06-06ï¼‰&quot;&gt;[1]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>ä»¥ä¸‹æ¦‚å¿µå»ºè®®å…ˆæµè§ˆä¸€éï¼Œæ“ä½œåå†å›æ¥çœ‹ä¸€éï¼Œå¯ä»¥æ›´å¥½ç†è§£ã€‚</p><h3 id="ä¸»å¯†é’¥ï¼ˆPrimary-Keyï¼‰å’Œå­å¯†é’¥ï¼ˆSubkeyï¼‰"><a href="#ä¸»å¯†é’¥ï¼ˆPrimary-Keyï¼‰å’Œå­å¯†é’¥ï¼ˆSubkeyï¼‰" class="headerlink" title="ä¸»å¯†é’¥ï¼ˆPrimary Keyï¼‰å’Œå­å¯†é’¥ï¼ˆSubkeyï¼‰"></a>ä¸»å¯†é’¥ï¼ˆPrimary Keyï¼‰å’Œå­å¯†é’¥ï¼ˆSubkeyï¼‰</h3><p>ç±»ä¼¼è¯ä¹¦çš„æ ¹è¯ä¹¦ç»“æ„ï¼ŒGPG å¯†é’¥åˆ†ä¸ºä¸»å¯†é’¥å’Œå­å¯†é’¥ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/jgoxt42.png" alt="ä¸»å¯†é’¥å’Œå­å¯†é’¥çš„å…³ç³»&lt;sup id&#x3D;&quot;fnref:5&quot; class&#x3D;&quot;footnote-ref&quot;&gt;&lt;a href&#x3D;&quot;#fn:5&quot; rel&#x3D;&quot;footnote&quot;&gt;&lt;span class&#x3D;&quot;hint--top hint--rounded&quot; aria-label&#x3D;&quot;å—¯äº†ä¸ªè¸¢. [ç®€æ˜ GPG æ¦‚å¿µ](https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;137801979). çŸ¥ä¹. 2020-05-02 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https:&#x2F;&#x2F;web.archive.org&#x2F;save&#x2F;https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;137801979)äº2022-06-06ï¼‰&quot;&gt;[5]&lt;&#x2F;span&gt;&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;"></p><p>å­å¯†é’¥è™½ç„¶æœ‰è‡ªå·±çš„å…¬é’¥ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨å¯¼å‡ºçš„æ˜¯ä¸€ç»„å…¬é’¥ï¼Œå‘å¸ƒè¿™ä¸€ä¸ªå…¬é’¥å³å¯è®¤è¯æ‰€æœ‰å­å¯†é’¥ã€‚æ‰€æœ‰çš„å˜æ›´éƒ½æ˜¯é€šè¿‡è¿™ä¸ªå…¬é’¥å‘å¸ƒçš„ï¼Œæ¯”å¦‚ UID çš„æ›´æ”¹ã€å­å¯†é’¥çš„æ–°å¢æˆ–æ’¤é”€ç­‰ã€‚</p><h3 id="å¯†é’¥ç±»å‹"><a href="#å¯†é’¥ç±»å‹" class="headerlink" title="å¯†é’¥ç±»å‹"></a>å¯†é’¥ç±»å‹</h3><p>å…±æœ‰å››ç§ç±»å‹çš„å¯†é’¥ï¼Œå¯¹åº”çš„ç¼©å†™<sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="UlyC. [2021å¹´ï¼Œç”¨æ›´ç°ä»£çš„æ–¹æ³•ä½¿ç”¨PGPï¼ˆä¸Šï¼‰](https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/). UlyC - Cçš„åšå®¢. 2021-01-13 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220606133111/https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/)äº2022-06-06ï¼‰">[8]</span></a></sup>å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>å…¨å</th><th>ç¼©å†™</th></tr></thead><tbody><tr><td>ä¸»å…¬é’¥</td><td>Public Key</td><td>pub</td></tr><tr><td>å­å…¬é’¥</td><td>Public Subkey</td><td>sub</td></tr><tr><td>ä¸»ç§é’¥</td><td>Secret Key</td><td>sec</td></tr><tr><td>å­ç§é’¥</td><td>Secret Subkey</td><td>ssb</td></tr></tbody></table><h3 id="ç”¨é€”ï¼ˆUsageï¼‰"><a href="#ç”¨é€”ï¼ˆUsageï¼‰" class="headerlink" title="ç”¨é€”ï¼ˆUsageï¼‰"></a>ç”¨é€”ï¼ˆUsageï¼‰</h3><p>æ¯ä¸ªå¯†é’¥å¯ä»¥ç”¨ä¸åŒçš„ç”¨é€”ï¼Œä¸‹è¡¨æ˜¯ä¸åŒç”¨é€”çš„å«ä¹‰ï¼š</p><table><thead><tr><th>ç¼©å†™</th><th>å…¨å</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>C</td><td>Certificating</td><td>è®¤è¯ï¼Œå¦‚å­å¯†é’¥æˆ–è¯ä¹¦ï¼Œç±»ä¼¼æ ¹è¯ä¹¦çš„ä½œç”¨ã€‚</td></tr><tr><td>S</td><td>Signing</td><td>ç­¾åï¼Œå¦‚æ–‡ä»¶æ•°å­—ç­¾åã€é‚®ä»¶ç­¾åã€Git æäº¤ã€‚</td></tr><tr><td>A</td><td>Authenticating</td><td>èº«ä»½éªŒè¯ï¼Œå¦‚ç™»å½•ã€‚</td></tr><tr><td>E</td><td>Encrypting</td><td>åŠ å¯†ï¼Œå¦‚æ–‡ä»¶å’Œæ–‡æœ¬ã€‚</td></tr></tbody></table><p>å…·æœ‰ <code>C</code> çš„å¯†é’¥æ˜¯ä¸»å¯†é’¥ï¼Œåªæœ‰è¿™ä¸ªå¯†é’¥å¯ä»¥ç”¨äºï¼š</p><ul><li>æ·»åŠ æˆ–æ’¤é”€å­å¯†é’¥çš„ç”¨é€”</li><li>æ·»åŠ ã€æ›´æ”¹æˆ–æ’¤é”€å¯†é’¥å…³è”çš„èº«ä»½ï¼ˆUIDï¼‰</li><li>æ·»åŠ æˆ–æ›´æ”¹æœ¬èº«æˆ–å…¶ä»–å­å¯†é’¥çš„åˆ°æœŸæ—¶é—´</li><li>ä¸ºäº†ç½‘ç»œä¿¡ä»»ç›®çš„ä¸ºå…¶å®ƒå¯†é’¥ç­¾å<sup id="fnref:7" class="footnote-ref"><a href="#fn:7" rel="footnote"><span class="hint--top hint--rounded" aria-label="Konstantin Ryabitsev. [ç”¨ PGP ä¿æŠ¤ä»£ç å®Œæ•´æ€§ï¼ˆäºŒï¼‰ï¼šç”Ÿæˆä½ çš„ä¸»å¯†é’¥](https://linux.cn/article-9529-1.html). Linux ä¸­å›½. 2018-04-09 [2022-06-06].">[7]</span></a></sup></li></ul><h3 id="ç”¨æˆ·-IDï¼ˆUser-IDï¼‰"><a href="#ç”¨æˆ·-IDï¼ˆUser-IDï¼‰" class="headerlink" title="ç”¨æˆ· IDï¼ˆUser IDï¼‰"></a>ç”¨æˆ· IDï¼ˆUser IDï¼‰</h3><p>ç”¨æˆ· ID ç”¨äºå°†å¯†é’¥å’ŒçœŸäººå…³è”ï¼Œå¯ä»¥æœ‰å¤šä¸ª UIDï¼Œä¸€èˆ¬ä¸ºä»¥ä¸‹æ ¼å¼ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">Name &lt;name@example.com&gt;<br></code></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨å¤šä¸ªèº«ä»½ï¼Œæ¯”å¦‚ä¸ªäººé‚®ç®±ã€ GitHub è´¦å·ã€å…¬å¸é‚®ç®±<sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Konstantin Ryabitsev. [ç”¨ PGP ä¿æŠ¤ä»£ç å®Œæ•´æ€§ï¼ˆä¸€ï¼‰ï¼š åŸºæœ¬æ¦‚å¿µå’Œå·¥å…·](https://linux.cn/article-9524-1.html). Linux ä¸­å›½. 2018-04-08 [2022-06-06].">[6]</span></a></sup>ï¼Œå¯ä»¥è®¾ç½®ä¸ºè¿™æ ·ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">Name &lt;name@example.com&gt;<br>Name(GitHub) &lt;name@users.noreply.github.com&gt;<br>Name(Work) &lt;name@work.com&gt;<br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„å…¬é’¥ä¼šåŒ…å«ç”µå­é‚®ä»¶åœ°å€ï¼Œæ³¨æ„éšç§å’Œåƒåœ¾é‚®ä»¶é—®é¢˜ã€‚</p><h3 id="å¯†é’¥-IDï¼ˆKey-IDï¼‰"><a href="#å¯†é’¥-IDï¼ˆKey-IDï¼‰" class="headerlink" title="å¯†é’¥ IDï¼ˆKey IDï¼‰"></a>å¯†é’¥ IDï¼ˆKey IDï¼‰</h3><p>æ¯ä¸€ä¸ªå¯†é’¥ IDï¼ˆKey IDï¼‰æœ‰ä¸‰ç§å½¢å¼ï¼ŒæŒ‡å®šå¯†é’¥çš„æœ€å¥½æ–¹å¼å°±æ˜¯ä½¿ç”¨æŒ‡çº¹ï¼Œå¯ä»¥æœ€å¤§é™åº¦é¿å…é‡å¤çš„ IDï¼š</p><ul><li>æŒ‡çº¹ï¼šè¯ä¹¦çš„ SHA-1 å“ˆå¸Œï¼Œ20 å­—èŠ‚ï¼›</li><li>é•¿ IDï¼šæŒ‡çº¹çš„æœ€å 16 ä½ï¼Œ8 å­—èŠ‚ï¼›</li><li>çŸ­ IDï¼šæŒ‡çº¹çš„æœ€å 8 ä½ï¼Œ4 å­—èŠ‚ï¼›</li></ul><h3 id="è¿‡æœŸï¼ˆExpireï¼‰å’Œæ’¤é”€ï¼ˆRevokeï¼‰"><a href="#è¿‡æœŸï¼ˆExpireï¼‰å’Œæ’¤é”€ï¼ˆRevokeï¼‰" class="headerlink" title="è¿‡æœŸï¼ˆExpireï¼‰å’Œæ’¤é”€ï¼ˆRevokeï¼‰"></a>è¿‡æœŸï¼ˆExpireï¼‰å’Œæ’¤é”€ï¼ˆRevokeï¼‰</h3><p>GPG å¯†é’¥å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¯ä»¥æ˜¯æ°¸ä¹…æœ‰æ•ˆã€‚å¾ˆå¤šäººä¼šç»™ä¸»å¯†é’¥è®¾ç½®é•¿æœŸæœ‰æ•ˆï¼Œå¯¹ä¸åŒç”¨é€”çš„å­å¯†é’¥è®¾ç½®è¾ƒçŸ­çš„æœŸé™ã€‚</p><p>GPG å¯ä»¥å‘å¸ƒæ’¤é”€è¯ä¹¦ï¼Œå‘å¸ƒæ’¤é”€è¯ä¹¦åï¼Œå…¶ä»–äººæ”¶åˆ°åå°±çŸ¥é“ä¹‹å‰å‘å¸ƒçš„å¯†é’¥å¤±æ•ˆäº†ã€‚</p><h2 id="å®‰è£…-GPG"><a href="#å®‰è£…-GPG" class="headerlink" title="å®‰è£… GPG"></a>å®‰è£… GPG</h2><p>å¦‚æœå®‰è£…äº† <a href="https://git-scm.com/">Git</a>ï¼Œå¯ç›´æ¥ä½¿ç”¨ Git Bashã€‚</p><p>ä¹Ÿå¯ä»¥åˆ° <a href="https://www.gnupg.org/download/">å®˜ç½‘</a> ä¸‹è½½å®‰è£…ã€‚</p><h2 id="ç”Ÿæˆå¯†é’¥"><a href="#ç”Ÿæˆå¯†é’¥" class="headerlink" title="ç”Ÿæˆå¯†é’¥"></a>ç”Ÿæˆå¯†é’¥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gpg --full-gen-key<br></code></pre></td></tr></table></figure><p>é€‰æ‹©åŠ å¯†ç±»å‹ï¼Œæ¨è RSA 4096ã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs console">Please select what kind of key you want:<br>   (1) RSA and RSA (default)<br>   (2) DSA and Elgamal<br>   (3) DSA (sign only)<br>   (4) RSA (sign only)<br>  (14) Existing key from card<br>Your selection? 1<br>RSA keys may be between 1024 and 4096 bits long.<br>What keysize do you want? (3072) 4096<br>Requested keysize is 4096 bits<br></code></pre></td></tr></table></figure><p>è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œ<code>0</code> ä¸ºæ°¸ä¹…ã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs console">Please specify how long the key should be valid.<br>         0 = key does not expire<br>      &lt;n&gt;  = key expires in n days<br>      &lt;n&gt;w = key expires in n weeks<br>      &lt;n&gt;m = key expires in n months<br>      &lt;n&gt;y = key expires in n years<br>Key is valid for? (0)<br>Key does not expire at all<br>Is this correct? (y/N) y<br></code></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºè¾“å…¥å§“åå’Œé‚®ç®±ï¼Œ<code>Comment</code> ç•™ç©ºå³å¯ï¼Œç„¶åè®¾ç½®å¯†é’¥çš„å¯†ç ã€‚å¯†ç ç”¨äºå¯¹ç§°åŠ å¯†æœ¬åœ°å­˜å‚¨çš„ç§é’¥ï¼Œåœ¨æ–‡ä»¶æ³„éœ²çš„æƒ…å†µä¸‹ä¹Ÿèƒ½ä¿æŠ¤ä½ çš„å¯†é’¥ï¼Œåœ¨ä½¿ç”¨ GPG å¯†é’¥æ—¶ç»å¸¸éœ€è¦è¾“å…¥å¯†ç ä»¥éªŒè¯èº«ä»½ã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs console">GnuPG needs to construct a user ID to identify your key.<br><br>Real name: Name<br>Email address: name@example.com<br>Comment:<br>You selected this USER-ID:<br>    &quot;Name &lt;name@example.com&gt;&quot;<br><br>Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2022/06/19/h6k7ui1.png" alt="è®¾ç½®å¯†ç "></p><p>åŒæ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç”¨é€”ä¸º <code>E</code> çš„å­å¯†é’¥ï¼Œç”Ÿæˆçš„å¯†é’¥å°†ä¼šåˆ—å‡ºã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs console">public and secret key created and signed.<br><br>pub   rsa4096 2022-06-06 [SC]<br>      5DE3E0509C47EA3CF04A42D34AEE18F83AFDEB23<br>uid                      Name &lt;name@example.com&gt;<br>sub   rsa4096 2022-06-06 [E]<br></code></pre></td></tr></table></figure><h3 id="ç”Ÿæˆå­å¯†é’¥"><a href="#ç”Ÿæˆå­å¯†é’¥" class="headerlink" title="ç”Ÿæˆå­å¯†é’¥"></a>ç”Ÿæˆå­å¯†é’¥</h3><p><strong>åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œåº”å½“é¿å…ä½¿ç”¨ä¸»å¯†é’¥ï¼Œè€Œæ˜¯ä¸ºä¸åŒç”¨é€”ä½¿ç”¨ä¸åŒçš„å­å¯†é’¥ã€‚</strong><sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="UlyC. [2021å¹´ï¼Œç”¨æ›´ç°ä»£çš„æ–¹æ³•ä½¿ç”¨PGPï¼ˆä¸Šï¼‰](https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/). UlyC - Cçš„åšå®¢. 2021-01-13 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220606133111/https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/)äº2022-06-06ï¼‰">[8]</span></a></sup></p><p>è¿›å…¥å¯†é’¥çš„ç¼–è¾‘ï¼Œå‚æ•°ä¸ºä¸Šä¸€æ­¥è¾“å‡ºçš„å¯†é’¥æŒ‡çº¹ã€‚åŠ ä¸Š <code>--expert</code> å‚æ•°ä»¥åœ¨ä¸‹ä¸€æ­¥ä½¿ç”¨ <a href="https://zh.wikipedia.org/wiki/Curve25519">Curve 25519</a> ç®—æ³•ç”Ÿæˆå­å¯†é’¥<sup id="fnref:9" class="footnote-ref"><a href="#fn:9" rel="footnote"><span class="hint--top hint--rounded" aria-label="UlyC. [2021å¹´ï¼Œç”¨æ›´ç°ä»£çš„æ–¹æ³•ä½¿ç”¨PGPï¼ˆä¸­ï¼‰](https://ulyc.github.io/2021/01/18/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%AD/). UlyC - Cçš„åšå®¢. 2021-01-18 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220606133131/https://ulyc.github.io/2021/01/18/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%AD/)äº2022-06-06ï¼‰">[9]</span></a></sup>ï¼Œè¿™æ˜¯ä¸€ç§å®‰å…¨æ€§ä»‹äº RSA 2048 å’Œ RSA 4096 ä¹‹é—´çš„ç®—æ³•ï¼Œä¸”é€Ÿåº¦æ›´å¿«ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gpg --expert --edit-key 5DE3E0509C47EA3CF04A42D34AEE18F83AFDEB23<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>addkey</code> æ·»åŠ å­å¯†é’¥ï¼Œæ ¹æ®æç¤ºé€‰æ‹©ã€è¾“å…¥å¯†ç ã€ä¿å­˜æ›´æ”¹ã€‚</p><p>æ³¨æ„ä¸åŒç”¨é€”çš„å­å¯†é’¥å¯èƒ½éœ€è¦é€‰æ‹©ä¸åŒçš„åŠ å¯†æ–¹å¼ã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs console"><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">addkey</span><br>Please select what kind of key you want:<br>   (3) DSA (sign only)<br>   (4) RSA (sign only)<br>   (5) Elgamal (encrypt only)<br>   (6) RSA (encrypt only)<br>   (7) DSA (set your own capabilities)<br>   (8) RSA (set your own capabilities)<br>  (10) ECC (sign only)<br>  (11) ECC (set your own capabilities)<br>  (12) ECC (encrypt only)<br>  (13) Existing key<br>  (14) Existing key from card<br>Your selection? 10<br>Please select which elliptic curve you want:<br>   (1) Curve 25519<br>   (3) NIST P-256<br>   (4) NIST P-384<br>   (5) NIST P-521<br>   (6) Brainpool P-256<br>   (7) Brainpool P-384<br>   (8) Brainpool P-512<br>   (9) secp256k1<br>Your selection? 1<br>Please specify how long the key should be valid.<br>         0 = key does not expire<br>      &lt;n&gt;  = key expires in n days<br>      &lt;n&gt;w = key expires in n weeks<br>      &lt;n&gt;m = key expires in n months<br>      &lt;n&gt;y = key expires in n years<br>Key is valid for? (0)<br>Key does not expire at all<br>Is this correct? (y/N) y<br>Really create? (y/N) y<br></code></pre></td></tr></table></figure><p>åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†è¾“å…¥å¯†ç ã€‚ç”Ÿæˆå®Œæˆåä¿å­˜ã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs console"><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">save</span><br></code></pre></td></tr></table></figure><h3 id="æ’¤é”€è¯ä¹¦"><a href="#æ’¤é”€è¯ä¹¦" class="headerlink" title="æ’¤é”€è¯ä¹¦"></a>æ’¤é”€è¯ä¹¦</h3><p>é»˜è®¤æƒ…å†µä¸‹ç”Ÿæˆå¯†é’¥åä¼šåœ¨ç”¨æˆ·æ–‡ä»¶å¤¹å†…çš„ <code>.gnupg\openpgp-revocs.d</code> ç”Ÿæˆä¸€ä»½æ’¤é”€è¯ä¹¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>gpg --output revoke.asc --gen-revoke mykey</code> ç”Ÿæˆä¸€ä»½ã€‚</p><h2 id="ç®¡ç†å¯†é’¥"><a href="#ç®¡ç†å¯†é’¥" class="headerlink" title="ç®¡ç†å¯†é’¥"></a>ç®¡ç†å¯†é’¥</h2><h3 id="åˆ—å‡ºå¯†é’¥"><a href="#åˆ—å‡ºå¯†é’¥" class="headerlink" title="åˆ—å‡ºå¯†é’¥"></a>åˆ—å‡ºå¯†é’¥</h3><p>ä½¿ç”¨ <code>gpg --list-keys</code> å³å¯åˆ—å‡ºæœ¬åœ°æ‰€æœ‰å…¬é’¥å’Œå­å…¬é’¥ï¼Œè¿˜æœ‰ä¸€ä¸ªç®€ä¾¿å†™æ³•ï¼š<code>gpg -k</code>ã€‚</p><p>ç§é’¥ç±»ä¼¼ï¼Œ<code>gpg --list-secret-keys</code> å’Œ <code>gpg -K</code>ã€‚</p><hr><p>æˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨æ—¶ï¼Œé•¿ ID å’ŒçŸ­ ID æ›´æ–¹ä¾¿ï¼Œä½¿ç”¨ <code>--keyid-format &#123;none|short|0xshort|long|0xlong&#125;</code> å³å¯è¾“å‡ºé•¿ ID æˆ–çŸ­ IDï¼š</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gpg -k --keyid-format short</span><br>~/.gnupg/pubring.kbx<br>---------------------------------<br>pub   rsa2048/3AFDEB23 2017-08-16 [SC]<br>      5DE3E0509C47EA3CF04A42D34AEE18F83AFDEB23<br>uid         [ultimate] GitHub (web-flow commit signing) &lt;noreply@github.com&gt;<br></code></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gpg -k --keyid-format long</span><br>~/.gnupg/pubring.kbx<br>---------------------------------<br>pub   rsa2048/4AEE18F83AFDEB23 2017-08-16 [SC]<br>      5DE3E0509C47EA3CF04A42D34AEE18F83AFDEB23<br>uid                 [ultimate] GitHub (web-flow commit signing) &lt;noreply@github.com&gt;<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ä¼šè¾“å‡ºè¿ç»­çš„ 20 å­—èŠ‚æŒ‡çº¹ï¼Œä¾‹å¦‚ <code>5DE3E0509C47EA3CF04A42D34AEE18F83AFDEB23</code>ã€‚ä½¿ç”¨ <code>--fingerprint</code> å‚æ•°å¯è¾“å‡ºæœ‰ç©ºæ ¼åˆ†éš”çš„æŒ‡çº¹ï¼Œä¾‹å¦‚ <code>5DE3 E050 9C47 EA3C F04A  42D3 4AEE 18F8 3AFD EB23</code>ã€‚</p><p>ä»¥ä¸Šä¸¤ä¸ªå‚æ•°å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ <code>~/.gnupg/gpg.conf</code> ä¸­æ·»åŠ ä»¥é¿å…é‡å¤è¾“å…¥ï¼Œæ–‡ä»¶éœ€è¦æ‰‹åŠ¨åˆ›å»ºã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">keyid-format long<br>fingerprint<br></code></pre></td></tr></table></figure><h3 id="å¯¼å…¥å’Œå¯¼å‡º"><a href="#å¯¼å…¥å’Œå¯¼å‡º" class="headerlink" title="å¯¼å…¥å’Œå¯¼å‡º"></a>å¯¼å…¥å’Œå¯¼å‡º</h3><p>ä½¿ç”¨ <code>gpg --import key.gpg</code> å¯¼å…¥å¯†é’¥ï¼Œåé¢ä¼šæåˆ°å¯¼å…¥ GitHub çš„å…¬é’¥ã€‚</p><hr><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä½¿ç”¨ ASCII-armored æ ¼å¼çš„å…¬é’¥ï¼š</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gpg --<span class="hljs-built_in">export</span> --armor 4AEE18F83AFDEB23</span><br>-----BEGIN PGP PUBLIC KEY BLOCK-----<br>[...]<br>-----END PGP PUBLIC KEY BLOCK-----<br></code></pre></td></tr></table></figure><p>å¢åŠ  <code>--output</code> å‚æ•°ä»¥å¯¼å‡ºåˆ°æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gpg --armor --output public-key.gpg --<span class="hljs-built_in">export</span> 4AEE18F83AFDEB23<br></code></pre></td></tr></table></figure><p>å¯¼å‡ºç§é’¥ï¼Œéœ€è¦è¾“å…¥å¯†ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gpg --armor --output private-key.gpg --export-secret-keys 4AEE18F83AFDEB23<br></code></pre></td></tr></table></figure><p>å»ºè®®å°†å¯¼å‡ºçš„å…¬ç§é’¥å’Œæ’¤é”€è¯ä¹¦åšå¥½å¤‡ä»½ã€‚</p><h3 id="ä¿®æ”¹ç”¨æˆ·-IDï¼ˆUIDï¼‰"><a href="#ä¿®æ”¹ç”¨æˆ·-IDï¼ˆUIDï¼‰" class="headerlink" title="ä¿®æ”¹ç”¨æˆ· IDï¼ˆUIDï¼‰"></a>ä¿®æ”¹ç”¨æˆ· IDï¼ˆUIDï¼‰</h3><p>è¿›å…¥ç¼–è¾‘å¯†é’¥ï¼Œç„¶åä¿®æ”¹ UIDï¼Œå¯ä»¥æ·»åŠ ã€è®¾ç½®ä¸» UIDã€æ’¤é”€å’Œåˆ é™¤ã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gpg --edit-key 4AEE18F83AFDEB23</span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">adduid</span><br>Real name: Name(Work)<br>Email address: name@work.com<br>Comment:<br>You selected this USER-ID:<br>    &quot;Name(Work) &lt;name@work.com&gt;&quot;<br><br>Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">uid 1</span><br>[ultimate] (1)* Name &lt;name@example.com&gt;<br>[ unknown] (2). Name(Work) &lt;name@work.com&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">primary</span><br>[ultimate] (1)* Name &lt;name@example.com&gt;<br>[ unknown] (2)  Name(Work) &lt;name@work.com&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">uid 1</span><br>[ultimate] (1). Name &lt;name@example.com&gt;<br>[ unknown] (2)  Name(Work) &lt;name@work.com&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">uid 2</span><br>[ultimate] (1). Name &lt;name@example.com&gt;<br>[ unknown] (2)* Name(Work) &lt;name@work.com&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">revuid</span><br>[ultimate] (1). Name &lt;name@example.com&gt;<br>[ revoked] (2)  Name(Work) &lt;name@work.com&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">uid 2</span><br>[ultimate] (1). Name &lt;name@example.com&gt;<br>[ revoked] (2)* Name(Work) &lt;name@work.com&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">deluid</span><br>[ultimate] (1). Name &lt;name@example.com&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">save</span><br></code></pre></td></tr></table></figure><h2 id="Git-GitHub-ä½¿ç”¨"><a href="#Git-GitHub-ä½¿ç”¨" class="headerlink" title="Git &amp; GitHub ä½¿ç”¨"></a>Git &amp; GitHub ä½¿ç”¨</h2><p>Git æäº¤å¯ä»¥ä½¿ç”¨ GPG å¯†é’¥ç­¾åï¼Œå¢åŠ  <code>--show-signature</code> å‚æ•°å³å¯æ˜¾ç¤ºæäº¤çš„ç­¾åä¿¡æ¯ã€‚</p><p>æœªä¿¡ä»»çš„å…¬é’¥ç­¾åçš„æäº¤æ˜¾ç¤ºçº¢è‰²æç¤ºã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/txzi1fd.png" alt="æœªä¿¡ä»»å…¬é’¥çš„ç­¾å"></p><p>å·²ä¿¡ä»»çš„å…¬é’¥ç­¾åçš„æäº¤æ˜¾ç¤ºé’è‰²æç¤ºã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/dje94dq.png" alt="å·²ä¿¡ä»»å…¬é’¥çš„ç­¾å"></p><h3 id="Git-è®¾ç½®"><a href="#Git-è®¾ç½®" class="headerlink" title="Git è®¾ç½®"></a>Git è®¾ç½®</h3><p>å¯†é’¥çš„ UID éœ€è¦åŒ…æ‹¬ Git ä½¿ç”¨çš„é‚®ç®±ã€‚</p><p>é¦–å…ˆå‘Šè¯‰ Git ä½¿ç”¨çš„å¯†é’¥ã€‚<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Telling Git about your signing key](https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key). GitHub Docs. [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220529202622/https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key)äº2022-05-29ï¼‰">[3]</span></a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global user.signingkey 4AEE18F83AFDEB23<br></code></pre></td></tr></table></figure><p>ç„¶åè®¾ç½®æäº¤æ—¶ä½¿ç”¨ GPG ç­¾åã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global commit.gpgsign <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="ä¿¡ä»»-GitHub-å…¬é’¥"><a href="#ä¿¡ä»»-GitHub-å…¬é’¥" class="headerlink" title="ä¿¡ä»» GitHub å…¬é’¥"></a>ä¿¡ä»» GitHub å…¬é’¥</h3><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¼å…¥å¹¶ä¿¡ä»» GitHub çš„å…¬é’¥ã€‚<sup id="fnref:11" class="footnote-ref"><a href="#fn:11" rel="footnote"><span class="hint--top hint--rounded" aria-label="VonC. [What is GitHub's public GPG key?](https://stackoverflow.com/questions/60482588/what-is-githubs-public-gpg-key). Stack Overflow. 2022-03-02 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20211123035710/https://stackoverflow.com/questions/60482588/what-is-githubs-public-gpg-key)äº2021-11-23ï¼‰">[11]</span></a></sup></p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs console"><span class="hljs-meta prompt_">$ </span><span class="language-bash">curl https://github.com/web-flow.gpg | gpg --import</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">gpg --edit-key 968479A1AFF927E37D1A566BB5690EEEBB952194</span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">trust</span><br><span class="hljs-meta prompt_">gpg&gt; </span><span class="language-bash">save</span><br></code></pre></td></tr></table></figure><h3 id="ä¸Šä¼ å…¬é’¥åˆ°-GitHub"><a href="#ä¸Šä¼ å…¬é’¥åˆ°-GitHub" class="headerlink" title="ä¸Šä¼ å…¬é’¥åˆ° GitHub"></a>ä¸Šä¼ å…¬é’¥åˆ° GitHub</h3><p>æ‰“å¼€ GitHub è®¾ç½®ï¼Œæ‰¾åˆ° <code>SSH and GPG Keys</code>ã€‚<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Adding a new GPG key to your GitHub account](https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account). GitHub Docs. [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220531040934/https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account)äº2022-05-31ï¼‰">[2]</span></a></sup></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/c6mmdq9.png" alt="GitHub è®¾ç½®"></p><p>ç‚¹å‡» <code>New GPG Key</code>ï¼ŒæŠŠå¯¼å‡ºçš„å…¬é’¥å¤åˆ¶è¿›å»ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/98vpfaj.png" alt="æ–°å»º GPG å¯†é’¥"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/eiq03eb.png" alt="å¡«å†™å¹¶ä¿å­˜"></p><p>æ­¤æ—¶ç­¾åçš„æäº¤åœ¨ GitHub å³å¯æ˜¾ç¤ºç»¿è‰²çš„ <code>Verified</code>ã€‚</p><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification">About commit signature verification</a>. GitHub Docs. [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220606095245/https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification">å­˜æ¡£</a>äº2022-06-06ï¼‰<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account">Adding a new GPG key to your GitHub account</a>. GitHub Docs. [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220531040934/https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account">å­˜æ¡£</a>äº2022-05-31ï¼‰<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key">Telling Git about your signing key</a>. GitHub Docs. [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220529202622/https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key">å­˜æ¡£</a>äº2022-05-29ï¼‰<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>é˜®ä¸€å³°. <a href="https://www.ruanyifeng.com/blog/2013/07/gpg.html">GPGå…¥é—¨æ•™ç¨‹</a>. é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—. 2013-07-12 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220601090505/https://www.ruanyifeng.com/blog/2013/07/gpg.html">å­˜æ¡£</a>äº2022-06-01ï¼‰<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>å—¯äº†ä¸ªè¸¢. <a href="https://zhuanlan.zhihu.com/p/137801979">ç®€æ˜ GPG æ¦‚å¿µ</a>. çŸ¥ä¹. 2020-05-02 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/save/https://zhuanlan.zhihu.com/p/137801979">å­˜æ¡£</a>äº2022-06-06ï¼‰<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>Konstantin Ryabitsev. <a href="https://linux.cn/article-9524-1.html">ç”¨ PGP ä¿æŠ¤ä»£ç å®Œæ•´æ€§ï¼ˆä¸€ï¼‰ï¼š åŸºæœ¬æ¦‚å¿µå’Œå·¥å…·</a>. Linux ä¸­å›½. 2018-04-08 [2022-06-06].<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>Konstantin Ryabitsev. <a href="https://linux.cn/article-9529-1.html">ç”¨ PGP ä¿æŠ¤ä»£ç å®Œæ•´æ€§ï¼ˆäºŒï¼‰ï¼šç”Ÿæˆä½ çš„ä¸»å¯†é’¥</a>. Linux ä¸­å›½. 2018-04-09 [2022-06-06].<a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:8" class="footnote-text"><span>UlyC. <a href="https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/">2021å¹´ï¼Œç”¨æ›´ç°ä»£çš„æ–¹æ³•ä½¿ç”¨PGPï¼ˆä¸Šï¼‰</a>. UlyC - Cçš„åšå®¢. 2021-01-13 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220606133111/https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/">å­˜æ¡£</a>äº2022-06-06ï¼‰<a href="#fnref:8" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:9" class="footnote-text"><span>UlyC. <a href="https://ulyc.github.io/2021/01/18/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%AD/">2021å¹´ï¼Œç”¨æ›´ç°ä»£çš„æ–¹æ³•ä½¿ç”¨PGPï¼ˆä¸­ï¼‰</a>. UlyC - Cçš„åšå®¢. 2021-01-18 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220606133131/https://ulyc.github.io/2021/01/18/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%AD/">å­˜æ¡£</a>äº2022-06-06ï¼‰<a href="#fnref:9" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:10" class="footnote-text"><span>UlyC. <a href="https://ulyc.github.io/2021/01/26/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8B/">2021å¹´ï¼Œç”¨æ›´ç°ä»£çš„æ–¹æ³•ä½¿ç”¨PGPï¼ˆä¸‹ï¼‰</a>. UlyC - Cçš„åšå®¢. 2021-01-26 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220606170227/https://ulyc.github.io/2021/01/26/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8B/">å­˜æ¡£</a>äº2022-06-06ï¼‰<a href="#fnref:10" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:11" class="footnote-text"><span>VonC. <a href="https://stackoverflow.com/questions/60482588/what-is-githubs-public-gpg-key">What is GitHubâ€™s public GPG key?</a>. Stack Overflow. 2022-03-02 [2022-06-06]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20211123035710/https://stackoverflow.com/questions/60482588/what-is-githubs-public-gpg-key">å­˜æ¡£</a>äº2021-11-23ï¼‰<a href="#fnref:11" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
      <category>å®‰å…¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GitHub</tag>
      
      <tag>è®¡ç®—æœº</tag>
      
      <tag>å¯†ç å­¦</tag>
      
      <tag>GPG</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Minecraft Forge Mod å¼€å‘ç¯å¢ƒæ­å»º</title>
    <link href="/zh-CN/2022/06/226b86b1999a/"/>
    <url>/zh-CN/2022/06/226b86b1999a/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å‚è€ƒäº† <a href="https://boson.v2mcdev.com/introducation/intro.html">Boson 1.16 Modding Tutorial</a> çš„ <code>ç¯å¢ƒé…ç½®</code><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ç¯å¢ƒé…ç½®](https://boson.v2mcdev.com/devenvironment/intro.html). Boson 1.16 Modding Tutorial. [2022-06-04].">[1]</span></a></sup> éƒ¨åˆ†ã€‚</p><h2 id="å‡†å¤‡å·¥å…·"><a href="#å‡†å¤‡å·¥å…·" class="headerlink" title="å‡†å¤‡å·¥å…·"></a>å‡†å¤‡å·¥å…·</h2><ul><li>IDEï¼š<a href="https://www.jetbrains.com/zh-cn/idea/">IntelliJ IDEA</a></li><li>Javaå¼€å‘ç¯å¢ƒï¼š<a href="https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html#:~:text=Java%20SE%20Development%20Kit%208u311">JDK 8u311</a></li><li>å®‰è£…ç¤ºä¾‹æ’ä»¶ï¼š<a href="https://files.minecraftforge.net/net/minecraftforge/forge/">Forge MDK</a></li></ul><p><img src="https://picture.zhanganzhi.com/2022/06/19/hh9z1s5.png" alt="MDKä¸‹è½½"></p><h2 id="å¯¼å…¥é¡¹ç›®"><a href="#å¯¼å…¥é¡¹ç›®" class="headerlink" title="å¯¼å…¥é¡¹ç›®"></a>å¯¼å…¥é¡¹ç›®</h2><p>è§£å‹ä¸‹è½½çš„å‹ç¼©æ–‡ä»¶ï¼Œä½¿ç”¨ IDEA æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œç­‰å¾…é¡¹ç›®å¯¼å…¥å®Œæˆã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/575ptqi.png" alt="é¡¹ç›®å¯¼å…¥å®Œæˆ"></p><p>æ‰“å¼€ <code>Settings</code> -&gt; <code>Build, Execution, Deployment</code> -&gt; <code>Build Tools</code> -&gt; <code>Gradle</code>ï¼Œå°† <code>Build and run using</code> è®¾ç½®ä¸º <code>IntelliJ IDEA</code> ä»¥åŠ å¿«è¿è¡Œé€Ÿåº¦</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/zmdjmu9.png" alt="Gradle è®¾ç½®"></p><p>å»ºè®®å°† <code>build.gradle</code> ä¸­çš„æ‰€æœ‰ <code>property &#39;forge.logging.console.level&#39;, &#39;debug&#39;</code> æ”¹ä¸º <code>property &#39;forge.logging.console.level&#39;, &#39;info&#39;</code> ä»¥å‡å°‘æ—¥å¿—è¾“å‡ºã€‚</p><p>æ‰“å¼€å³ä¾§çš„ <code>Gradle</code> é¢æ¿ï¼Œè¿è¡Œ <code>genIntellijRuns</code>ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/kmxtmtj.png" alt="ç”Ÿæˆ IDEA è¿è¡Œé…ç½®"></p><p>åœ¨å³ä¸Šè§’é€‰æ‹© <code>runClient</code>ï¼Œä½¿ç”¨ run æˆ– debug å¯åŠ¨ Minecraftã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/iyiwnkf.png" alt="ç‚¹å‡»è¿è¡Œå®¢æˆ·ç«¯"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/pt49mui.png" alt="æˆåŠŸè¿è¡Œå®¢æˆ·ç«¯"></p><h3 id="é¡¹ç›®æ–‡ä»¶ç»“æ„ç®€ä»‹"><a href="#é¡¹ç›®æ–‡ä»¶ç»“æ„ç®€ä»‹" class="headerlink" title="é¡¹ç›®æ–‡ä»¶ç»“æ„ç®€ä»‹"></a>é¡¹ç›®æ–‡ä»¶ç»“æ„ç®€ä»‹</h3><table><thead><tr><th>æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</th><th>ç®€ä»‹</th></tr></thead><tbody><tr><td>build.gradle</td><td>Gradle é…ç½®æ–‡ä»¶ï¼Œå¤§éƒ¨åˆ†é¡¹ç›®é…ç½®éƒ½åœ¨è¿™é‡Œã€‚</td></tr><tr><td>build å’Œ out</td><td>ç¼–è¯‘ç›®å½•ï¼Œæ‰“åŒ…çš„ jar æ–‡ä»¶åœ¨ <code>build/libs</code> ä¸­ã€‚</td></tr><tr><td>run</td><td>MC æ ¹ç›®å½•ï¼Œå¯ä»¥åœ¨æ­¤å¤„æŸ¥çœ‹æ—¥å¿—ç­‰ä¿¡æ¯ã€‚</td></tr><tr><td>src</td><td>èµ„æºæ–‡ä»¶å’Œæºç ç›®å½•ã€‚</td></tr></tbody></table><h2 id="é…ç½®æ¨¡ç»„ä¿¡æ¯"><a href="#é…ç½®æ¨¡ç»„ä¿¡æ¯" class="headerlink" title="é…ç½®æ¨¡ç»„ä¿¡æ¯"></a>é…ç½®æ¨¡ç»„ä¿¡æ¯</h2><h3 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h3><p>æ‰“å¼€ <code>build.gradle</code>ï¼Œæ‰¾åˆ° <code>version</code>ã€<code>group</code> å’Œ <code>archiveBaseName</code>ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/hfsxkze.png" alt="é»˜è®¤çš„é…ç½®"></p><ul><li><code>version</code> æ˜¯ç‰ˆæœ¬å·ï¼Œä¸€èˆ¬éµå¾ª Forgeçš„ <a href="https://mcforge.readthedocs.io/en/latest/gettingstarted/versioning/">è¯­ä¹‰åŒ–ç‰ˆæœ¬</a>ï¼Œæ”¹ä¸º <code>1.16.5-0.0.1.0</code>ã€‚</li><li><code>group</code> æ˜¯åŒ…åï¼Œä¸€èˆ¬ä¸ºåŸŸåï¼Œè¿™é‡Œé…ç½®ä¸º <code>com.example</code>ã€‚</li><li><code>archiveBaseName</code> æ˜¯æ‰“åŒ…çš„æ–‡ä»¶çš„åŸºç¡€åï¼Œæ‰“åŒ…çš„æ–‡ä»¶åæ ¼å¼ä¸º <code>&lt;archivesBaseName&gt;-&lt;version&gt;.jar</code>ã€‚ä¿®æ”¹å®Œæˆåç‚¹å‡»å³ä¸Šè§’çš„ <code>Load Gradle Changes</code>ã€‚</li></ul><p><img src="https://picture.zhanganzhi.com/2022/06/19/lemo4gi.png" alt="ä¿®æ”¹åçš„é…ç½®"><br><img src="https://picture.zhanganzhi.com/2022/06/19/l2fu0mi.png" alt="ç‚¹å‡»åŠ è½½æ–°é…ç½®"></p><h3 id="mods-toml"><a href="#mods-toml" class="headerlink" title="mods.toml"></a>mods.toml</h3><p>è¿™éƒ¨åˆ†å†…å®¹å¯ä»¥åœ¨æ¸¸æˆå†…çš„æ¨¡ç»„åˆ—è¡¨çœ‹åˆ°æ•ˆæœã€‚æ‰“å¼€ <code>src/main/resources/META-INF/mods.toml</code>ï¼Œæ³¨é‡Šè¯´æ˜å¾—å¾ˆå…¨é¢ï¼Œä¹Ÿå¯ä»¥å‚è€ƒä¸‹è¡¨<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Structuring Your Mod](https://mcforge.readthedocs.io/en/latest/gettingstarted/structuring/). Forge Documentation. [2022-06-04]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220605133857/https://mcforge.readthedocs.io/en/latest/gettingstarted/structuring/)äº2022-06-05ï¼‰.">[2]</span></a></sup>ï¼š</p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>license</td><td>string</td><td>è®¸å¯è¯åç§°ã€‚</td></tr><tr><td>modid</td><td>string</td><td>modidã€‚</td></tr><tr><td>version</td><td>string</td><td>æ¨¡ç»„ç‰ˆæœ¬ï¼Œå¿…é¡»æ˜¯ç‚¹åˆ†éš”çš„æ•°å­—ï¼Œæœ€å¥½ç¬¦åˆ Forge çš„ <a href="https://mcforge.readthedocs.io/en/latest/gettingstarted/versioning/">è¯­ä¹‰åŒ–ç‰ˆæœ¬</a> ç»“æ„ã€‚</td></tr><tr><td>displayName</td><td>string</td><td>æ¨¡ç»„æ˜¾ç¤ºçš„åç§°ã€‚</td></tr><tr><td>updateJSONURL</td><td>string</td><td><a href="https://mcforge.readthedocs.io/en/latest/misc/updatechecker/">ç‰ˆæœ¬ JSON æ–‡ä»¶</a> çš„ URLã€‚</td></tr><tr><td>displayURL</td><td>string</td><td>æ¨¡ç»„ä¸»é¡µçš„URLã€‚</td></tr><tr><td>logoFile</td><td>string</td><td>logo æ–‡ä»¶åï¼Œå¿…é¡»ä½äº resources æ–‡ä»¶å¤¹å†…ã€‚</td></tr><tr><td>credits</td><td>string</td><td>é¸£è°¢ã€‚</td></tr><tr><td>authors</td><td>string</td><td>æ¨¡ç»„ä½œè€…ã€‚</td></tr><tr><td>description</td><td>string</td><td>æ¨¡ç»„æè¿°ï¼Œå¯ä»¥æ˜¯å¤šè¡Œã€‚</td></tr><tr><td>dependencies</td><td>[list]</td><td>æ¨¡ç»„ä¾èµ–åˆ—è¡¨ã€‚</td></tr></tbody></table><h3 id="æ¨¡ç»„ä¸»ç±»"><a href="#æ¨¡ç»„ä¸»ç±»" class="headerlink" title="æ¨¡ç»„ä¸»ç±»"></a>æ¨¡ç»„ä¸»ç±»</h3><p>åˆ é™¤ <code>src/main/java</code> å†…çš„å…¨éƒ¨æ–‡ä»¶ï¼ŒæŒ‰ <code>group</code> å’Œ <code>modid</code>ï¼Œè‡ªå·±æ–°å»ºä¸€ä¸ªåŒ…å’Œç±»ï¼Œè¿™ä¸ªç±»å°±æ˜¯æ¨¡ç»„çš„å…¥å£ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.examplemod;<br><br><span class="hljs-keyword">import</span> net.minecraftforge.fml.common.Mod;<br><br><span class="hljs-meta">@Mod(&quot;examplemod&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExampleMod</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="pack-mcmeta"><a href="#pack-mcmeta" class="headerlink" title="pack.mcmeta"></a>pack.mcmeta</h3><p>æ•°æ®åŒ…æè¿°ï¼Œå¯ä»¥ä¿®æ”¹ <code>description</code>ã€‚</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/f9kf0y9.png" alt="é€‰æ‹©æ•°æ®åŒ…çš„ç•Œé¢"></p><h2 id="å…¶å®ƒæ¨¡ç»„"><a href="#å…¶å®ƒæ¨¡ç»„" class="headerlink" title="å…¶å®ƒæ¨¡ç»„"></a>å…¶å®ƒæ¨¡ç»„</h2><h3 id="ä¾èµ–é¡¹"><a href="#ä¾èµ–é¡¹" class="headerlink" title="ä¾èµ–é¡¹"></a>ä¾èµ–é¡¹</h3><p>å¦‚æœæƒ³å°†æŸä¸ªæ¨¡ç»„è®¾ç½®ä¸ºä¾èµ–é¡¹ï¼Œéœ€è¦åœ¨ <code>mods.toml</code> ä¸­é…ç½®ï¼Œæ¯ä¸€ä¸ªä¾èµ–é¡¹çš„æ ¼å¼å¿…é¡»ä¸º <code>[[dependencies.modid]]</code>ï¼Œå‚è€ƒä¸‹è¡¨<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Mods.toml](https://forge.gemwire.uk/wiki/Mods.toml#:~:text=http%3A//example.com/%22-,Dependency%20Configurations,-Mods%20can%20define). Forge Community Wiki. 2022-03-22 [2022-06-04]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220605134745/https://forge.gemwire.uk/wiki/Mods.toml#:~:text=http%3A//example.com/%22-,Dependency%20Configurations,-Mods%20can%20define)äº2022-06-05ï¼‰.">[3]</span></a></sup>ï¼š</p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>modId</td><td>string</td><td>ä¾èµ–é¡¹çš„æ¨¡ç»„ IDã€‚</td></tr><tr><td>mandatory</td><td>boolean</td><td>ä¾èµ–é¡¹æœªæ»¡è¶³æ—¶æ˜¯å¦å´©æºƒã€‚</td></tr><tr><td>versionRange</td><td>string</td><td>å¯æ¥å—çš„ä¾èµ–é¡¹ç‰ˆæœ¬ï¼Œä»¥ <a href="https://maven.apache.org/enforcer/enforcer-rules/versionRanges.html">Maven version spec</a> è¡¨ç¤ºã€‚ç©ºå­—ç¬¦ä¸²ä¸ºæ— è¾¹ç•Œç‰ˆæœ¬èŒƒå›´ï¼Œå³åŒ¹é…ä»»æ„ç‰ˆæœ¬ã€‚</td></tr><tr><td>ordering</td><td>string</td><td>å®šä¹‰æ¨¡ç»„æ˜¯å¦å¿…é¡»åœ¨æ­¤ä¾èµ–é¡¹ä¹‹å‰æˆ–ä¹‹ååŠ è½½ã€‚æœ‰æ•ˆå€¼ä¸º <code>BEFORE</code>ï¼ˆå¿…é¡»åœ¨ä¹‹å‰åŠ è½½ï¼‰ã€<code>AFTER</code>ï¼ˆå¿…é¡»åœ¨ä¹‹ååŠ è½½ï¼‰å’Œ <code>NONE</code>ï¼ˆä¸å…³å¿ƒé¡ºåºï¼‰ã€‚</td></tr><tr><td>side</td><td>string</td><td>æœ‰æ•ˆå€¼ä¸º <code>CLIENT</code>ï¼ˆå­˜åœ¨äºå®¢æˆ·ç«¯ï¼‰ã€<code>SERVER</code>ï¼ˆå­˜åœ¨äºä¸“ç”¨æœåŠ¡å™¨ï¼‰å’Œ <code>BOTH</code>ï¼ˆå­˜åœ¨äºä¸¤ä¾§ï¼‰ã€‚</td></tr></tbody></table><p>å°½ç®¡ç©ºå­—ç¬¦ä¸²çš„ <code>versionRange</code> å¯ä»¥åŒ¹é…ä»»æ„ç‰ˆæœ¬ï¼Œä½†æ˜¯å»ºè®®ä½¿ç”¨ <code>[0,)</code> åŒ¹é…ã€‚</p><h3 id="åŠ è½½æ¨¡ç»„"><a href="#åŠ è½½æ¨¡ç»„" class="headerlink" title="åŠ è½½æ¨¡ç»„"></a>åŠ è½½æ¨¡ç»„</h3><p>å¦‚æœæƒ³åŠ è½½å…¶å®ƒæ¨¡ç»„ï¼Œä¸å¯ä»¥ç›´æ¥æ”¾åœ¨ <code>/run/mods</code> ä¸­åŠ è½½ï¼Œéœ€è¦é…ç½® <code>build.gradle</code>ã€‚<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Dependencies](https://forge.gemwire.uk/wiki/Dependencies). Forge Community Wiki. 2021-08-02 [2022-06-04]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220605135343/https://forge.gemwire.uk/wiki/Dependencies)äº2022-06-05ï¼‰.">[4]</span></a></sup></p><p>å¤§éƒ¨åˆ†æ¨¡ç»„éƒ½ä¼šæä¾›é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ JEI<sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Getting Started [1.13 and Up]](https://github.com/mezz/JustEnoughItems/wiki/Getting-Started-%5B1.13-and-Up%5D). mezz/JustEnoughItems Wiki. 2021-11-30 [2022-06-05]. ï¼ˆåŸå§‹å†…å®¹[å­˜æ¡£](https://web.archive.org/web/20220605140318/https://github.com/mezz/JustEnoughItems/wiki/Getting-Started-%5B1.13-and-Up%5D)äº2022-06-05ï¼‰.">[5]</span></a></sup>ï¼Œé…ç½® <code>build.gradle</code> å³å¯æ­£ç¡®åŠ è½½ï¼š</p><p><img src="https://picture.zhanganzhi.com/2022/06/19/ei54p06.png" alt="JEI æä¾›çš„é…ç½®"></p><p>ä¹Ÿæœ‰éƒ¨åˆ†æ¨¡ç»„ä¸æä¾›ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼ã€‚</p><h4 id="æœ¬åœ°æ–‡ä»¶"><a href="#æœ¬åœ°æ–‡ä»¶" class="headerlink" title="æœ¬åœ°æ–‡ä»¶"></a>æœ¬åœ°æ–‡ä»¶</h4><p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª <code>lib</code> æ–‡ä»¶å¤¹ï¼Œå°†ä¸‹è½½çš„æ¨¡ç»„æ–‡ä»¶æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ã€‚</p><p>åœ¨ <code>build.gradle</code> ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">repositories</span> &#123;<br>    <span class="hljs-keyword">flatDir</span> &#123;<br>        dirs <span class="hljs-string">&#x27;lib&#x27;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>depdependencies</code> çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">runtimeOnly fg.deobf(<span class="hljs-string">&quot;&lt;group&gt;:&lt;artifact&gt;:&lt;version&gt;&quot;</span>)<br></code></pre></td></tr></table></figure><p>ä»¥ JEI ä¸ºä¾‹ï¼Œä¸‹è½½ <code>jei-1.16.5-7.7.1.152.jar</code>ï¼Œæ”¾å…¥ <code>lib</code> æ–‡ä»¶å¤¹ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">runtimeOnly fg.deobf(<span class="hljs-string">&quot;mezz.jei:jei:1.16.5-7.7.1.152&quot;</span>)<br></code></pre></td></tr></table></figure><p>æ³¨ï¼šgroup ä¸å½±å“æœ¬åœ°æ–‡ä»¶åŠ è½½ï¼Œå¯ä»¥éšæ„å¡«å†™ã€‚</p><h4 id="Curse-Maven"><a href="#Curse-Maven" class="headerlink" title="Curse Maven"></a><a href="https://www.cursemaven.com/">Curse Maven</a></h4><p>æœ¬åœ°æ–‡ä»¶çš„æ–¹å¼å¹¶ä¸æ–¹ä¾¿ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½æ¨¡ç»„ï¼Œå¯¹å¤šäººåˆä½œä¹Ÿä¸å‹å¥½ï¼Œ<a href="https://www.cursemaven.com/">Curse Maven</a> æ”¯æŒæ‰€æœ‰ä¸Šä¼ åˆ° <a href="https://www.curseforge.com/">Curse Forge</a> çš„æ¨¡ç»„ï¼Œåœ¨ <code>build.gradle</code> ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">repositories</span> &#123;<br>    maven &#123;<br>        url <span class="hljs-string">&quot;https://cursemaven.com&quot;</span><br>        content &#123;<br>            includeGroup <span class="hljs-string">&quot;curse.maven&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>depdependencies</code> çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">runtimeOnly fg.deobf(<span class="hljs-string">&quot;curse.maven:&lt;descriptor&gt;-&lt;projectid&gt;:&lt;fileids&gt;&quot;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://picture.zhanganzhi.com/2022/06/19/n6j3daq.png" alt="&amp;ltdescriptor&gt; å¯ä»¥ä¸ºä»»æ„å†…å®¹ï¼Œè¿™ä¼šæ˜¾ç¤ºåœ¨ä¸‹è½½çš„æ–‡ä»¶åæ±‡æ€»ï¼Œæœ€å¥½è®¾ç½®ä¸ºæ¨¡ç»„çš„åç§°ï¼Œå¦‚é¡¹ç›®å"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/8bjqnnp.png" alt="&amp;ltprojectid&gt; é¡¹ç›®ID"></p><p><img src="https://picture.zhanganzhi.com/2022/06/19/c07tjwl.png" alt="&amp;ltfileids&gt; æ–‡ä»¶ID"></p><p>ä»¥ <a href="https://www.curseforge.com/minecraft/mc-mods/jei/files/3681294">JEI 1.16.5-7.7.1.152</a> ä¸ºä¾‹ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">runtimeOnly fg.deobf(<span class="hljs-string">&quot;curse.maven:jei-238222:3681294&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="GitHub-Actions-é…ç½®ï¼ˆå¯é€‰ï¼‰"><a href="#GitHub-Actions-é…ç½®ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="GitHub Actions é…ç½®ï¼ˆå¯é€‰ï¼‰"></a>GitHub Actions é…ç½®ï¼ˆå¯é€‰ï¼‰</h2><p>é€šè¿‡é…ç½® GitHub Actionsï¼Œå¯ä»¥å®ç°å‘å¸ƒ Release å’Œ PR è‡ªåŠ¨æ‰“åŒ…ã€‚</p><p>é¦–å…ˆä¿®æ”¹ <code>build.gradle</code>ï¼Œå°† <code>version</code> éƒ¨åˆ†æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">project</span>.hasProperty(<span class="hljs-string">&#x27;inputVersion&#x27;</span>)) &#123;<br>    version = <span class="hljs-keyword">project</span>.inputVersion<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    version = <span class="hljs-string">&#x27;1.16.5-0.0.1.0&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»º <code>.github/workflows</code> æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸¤ä¸ª <code>yml</code> æ–‡ä»¶ï¼Œæ³¨æ„ä¿®æ”¹ <code>&lt;modname&gt;</code>ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Release</span> <span class="hljs-string">Packer</span><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">workflow_dispatch:</span><br>    <span class="hljs-attr">inputs:</span><br>      <span class="hljs-attr">version:</span><br>        <span class="hljs-attr">description:</span> <span class="hljs-string">&#x27;Release Version&#x27;</span><br>        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-attr">type:</span> <span class="hljs-string">string</span><br>      <span class="hljs-attr">pre_release:</span><br>        <span class="hljs-attr">description:</span> <span class="hljs-string">&#x27;This is a pre-release&#x27;</span><br>        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-attr">type:</span> <span class="hljs-string">boolean</span><br>        <span class="hljs-attr">default:</span> <span class="hljs-literal">false</span><br><br><span class="hljs-attr">env:</span><br>  <span class="hljs-attr">NAME:</span> <span class="hljs-string">&lt;modname&gt;-$&#123;&#123;</span> <span class="hljs-string">github.event.inputs.version</span> <span class="hljs-string">&#125;&#125;</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">pack:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">Pack</span><br><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Check</span> <span class="hljs-string">Out</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Java</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-java@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">java-version:</span> <span class="hljs-string">&#x27;8&#x27;</span><br>          <span class="hljs-attr">distribution:</span> <span class="hljs-string">&#x27;adopt&#x27;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Chmod</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">chmod</span> <span class="hljs-string">+x</span> <span class="hljs-string">./gradlew</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Pack</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">./gradlew</span> <span class="hljs-string">jar</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">Release</span><br>        <span class="hljs-attr">id:</span> <span class="hljs-string">create_release</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/create-release@v1</span><br>        <span class="hljs-attr">env:</span><br>          <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">tag_name:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">github.event.inputs.version</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">release_name:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.NAME</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">draft:</span> <span class="hljs-literal">false</span><br>          <span class="hljs-attr">prerelease:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">github.event.inputs.pre_release</span> <span class="hljs-string">&#125;&#125;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">Release</span> <span class="hljs-string">Asset</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-release-asset@v1</span><br>        <span class="hljs-attr">env:</span><br>          <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">upload_url:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">steps.create_release.outputs.upload_url</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">asset_path:</span> <span class="hljs-string">build/libs/$&#123;&#123;</span> <span class="hljs-string">env.NAME</span> <span class="hljs-string">&#125;&#125;.jar</span><br>          <span class="hljs-attr">asset_name:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.NAME</span> <span class="hljs-string">&#125;&#125;.jar</span><br>          <span class="hljs-attr">asset_content_type:</span> <span class="hljs-string">application/java-archive</span><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">PR</span> <span class="hljs-string">Packer</span><br><span class="hljs-attr">on:</span> <span class="hljs-string">pull_request_target</span><br><br><span class="hljs-attr">env:</span><br>  <span class="hljs-attr">NAME:</span> <span class="hljs-string">&quot;&lt;modname&gt;-#$<span class="hljs-template-variable">&#123;&#123; github.event.number &#125;&#125;</span>&quot;</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">pack:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">Pack</span><br><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Check</span> <span class="hljs-string">Out</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">ref:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">github.event.pull_request.head.sha</span> <span class="hljs-string">&#125;&#125;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Java</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-java@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">java-version:</span> <span class="hljs-string">&#x27;8&#x27;</span><br>          <span class="hljs-attr">distribution:</span> <span class="hljs-string">&#x27;adopt&#x27;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Chmod</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">chmod</span> <span class="hljs-string">+x</span> <span class="hljs-string">./gradlew</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Pack</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">&quot;./gradlew -PinputVersion=#$<span class="hljs-template-variable">&#123;&#123; github.event.number &#125;&#125;</span> jar&quot;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">Artifact</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-artifact@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.NAME</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">build/libs/$&#123;&#123;</span> <span class="hljs-string">env.NAME</span> <span class="hljs-string">&#125;&#125;.jar</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Find</span> <span class="hljs-string">Comment</span><br>        <span class="hljs-attr">id:</span> <span class="hljs-string">find_comment</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">peter-evans/find-comment@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">issue-number:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">github.event.number</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">comment-author:</span> <span class="hljs-string">github-actions[bot]</span><br>          <span class="hljs-attr">direction:</span> <span class="hljs-string">first</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">Comment</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">peter-evans/create-or-update-comment@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">issue-number:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">github.event.number</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">body:</span> <span class="hljs-string">åœ¨</span> [<span class="hljs-string">è¿™é‡Œ</span>]<span class="hljs-string">(../actions/runs/$&#123;&#123;</span> <span class="hljs-string">github.run_id</span> <span class="hljs-string">&#125;&#125;)</span> <span class="hljs-string">ä¸‹è½½æ­¤</span> <span class="hljs-string">PR</span> <span class="hljs-string">çš„æœ€æ–°æ‰“åŒ…ã€‚</span><br>        <span class="hljs-attr">if:</span> <span class="hljs-string">steps.find_comment.outputs.comment-id</span> <span class="hljs-string">==</span> <span class="hljs-number">0</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Update</span> <span class="hljs-string">Comment</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">peter-evans/create-or-update-comment@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">comment-id:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">steps.find_comment.outputs.comment-id</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">body:</span> <span class="hljs-string">åœ¨</span> [<span class="hljs-string">è¿™é‡Œ</span>]<span class="hljs-string">(../actions/runs/$&#123;&#123;</span> <span class="hljs-string">github.run_id</span> <span class="hljs-string">&#125;&#125;)</span> <span class="hljs-string">ä¸‹è½½æ­¤</span> <span class="hljs-string">PR</span> <span class="hljs-string">çš„æœ€æ–°æ‰“åŒ…ã€‚</span><br>          <span class="hljs-attr">edit-mode:</span> <span class="hljs-string">replace</span><br>        <span class="hljs-attr">if:</span> <span class="hljs-string">steps.find_comment.outputs.comment-id</span> <span class="hljs-type">!=</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><section class="footnotes"><h2 id="References">References</h2><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://boson.v2mcdev.com/devenvironment/intro.html">ç¯å¢ƒé…ç½®</a>. Boson 1.16 Modding Tutorial. [2022-06-04].<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://mcforge.readthedocs.io/en/latest/gettingstarted/structuring/">Structuring Your Mod</a>. Forge Documentation. [2022-06-04]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220605133857/https://mcforge.readthedocs.io/en/latest/gettingstarted/structuring/">å­˜æ¡£</a>äº2022-06-05ï¼‰.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://forge.gemwire.uk/wiki/Mods.toml#:~:text=http%3A//example.com/%22-,Dependency%20Configurations,-Mods%20can%20define">Mods.toml</a>. Forge Community Wiki. 2022-03-22 [2022-06-04]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220605134745/https://forge.gemwire.uk/wiki/Mods.toml#:~:text=http%3A//example.com/%22-,Dependency%20Configurations,-Mods%20can%20define">å­˜æ¡£</a>äº2022-06-05ï¼‰.<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://forge.gemwire.uk/wiki/Dependencies">Dependencies</a>. Forge Community Wiki. 2021-08-02 [2022-06-04]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220605135343/https://forge.gemwire.uk/wiki/Dependencies">å­˜æ¡£</a>äº2022-06-05ï¼‰.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://github.com/mezz/JustEnoughItems/wiki/Getting-Started-%5B1.13-and-Up%5D">Getting Started [1.13 and Up]</a>. mezz&#x2F;JustEnoughItems Wiki. 2021-11-30 [2022-06-05]. ï¼ˆåŸå§‹å†…å®¹<a href="https://web.archive.org/web/20220605140318/https://github.com/mezz/JustEnoughItems/wiki/Getting-Started-%5B1.13-and-Up%5D">å­˜æ¡£</a>äº2022-06-05ï¼‰.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Minecraft</category>
      
      <category>Mod</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Minecraft</tag>
      
      <tag>Java</tag>
      
      <tag>Forge</tag>
      
      <tag>Mod</tag>
      
      <tag>Gradle</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
